(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wh(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var nu={exports:{}},pi={},su={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var es=Symbol.for("react.element"),Vh=Symbol.for("react.portal"),Gh=Symbol.for("react.fragment"),Kh=Symbol.for("react.strict_mode"),Qh=Symbol.for("react.profiler"),Jh=Symbol.for("react.provider"),Yh=Symbol.for("react.context"),Xh=Symbol.for("react.forward_ref"),Zh=Symbol.for("react.suspense"),ef=Symbol.for("react.memo"),tf=Symbol.for("react.lazy"),jl=Symbol.iterator;function rf(e){return e===null||typeof e!="object"?null:(e=jl&&e[jl]||e["@@iterator"],typeof e=="function"?e:null)}var iu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},au=Object.assign,ou={};function tn(e,t,r){this.props=e,this.context=t,this.refs=ou,this.updater=r||iu}tn.prototype.isReactComponent={};tn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};tn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lu(){}lu.prototype=tn.prototype;function jo(e,t,r){this.props=e,this.context=t,this.refs=ou,this.updater=r||iu}var No=jo.prototype=new lu;No.constructor=jo;au(No,tn.prototype);No.isPureReactComponent=!0;var Nl=Array.isArray,cu=Object.prototype.hasOwnProperty,ko={current:null},uu={key:!0,ref:!0,__self:!0,__source:!0};function du(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)cu.call(t,n)&&!uu.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:es,type:e,key:i,ref:o,props:s,_owner:ko.current}}function nf(e,t){return{$$typeof:es,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function So(e){return typeof e=="object"&&e!==null&&e.$$typeof===es}function sf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var kl=/\/+/g;function Di(e,t){return typeof e=="object"&&e!==null&&e.key!=null?sf(""+e.key):t.toString(36)}function Ts(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case es:case Vh:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Di(o,0):n,Nl(s)?(r="",e!=null&&(r=e.replace(kl,"$&/")+"/"),Ts(s,t,r,"",function(u){return u})):s!=null&&(So(s)&&(s=nf(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(kl,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Nl(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Di(i,l);o+=Ts(i,t,r,c,s)}else if(c=rf(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Di(i,l++),o+=Ts(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ls(e,t,r){if(e==null)return e;var n=[],s=0;return Ts(e,n,"","",function(i){return t.call(r,i,s++)}),n}function af(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _e={current:null},Ps={transition:null},of={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:Ps,ReactCurrentOwner:ko};function hu(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:ls,forEach:function(e,t,r){ls(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ls(e,function(){t++}),t},toArray:function(e){return ls(e,function(t){return t})||[]},only:function(e){if(!So(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};F.Component=tn;F.Fragment=Gh;F.Profiler=Qh;F.PureComponent=jo;F.StrictMode=Kh;F.Suspense=Zh;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=of;F.act=hu;F.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=au({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=ko.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)cu.call(t,c)&&!uu.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:es,type:e.type,key:s,ref:i,props:n,_owner:o}};F.createContext=function(e){return e={$$typeof:Yh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Jh,_context:e},e.Consumer=e};F.createElement=du;F.createFactory=function(e){var t=du.bind(null,e);return t.type=e,t};F.createRef=function(){return{current:null}};F.forwardRef=function(e){return{$$typeof:Xh,render:e}};F.isValidElement=So;F.lazy=function(e){return{$$typeof:tf,_payload:{_status:-1,_result:e},_init:af}};F.memo=function(e,t){return{$$typeof:ef,type:e,compare:t===void 0?null:t}};F.startTransition=function(e){var t=Ps.transition;Ps.transition={};try{e()}finally{Ps.transition=t}};F.unstable_act=hu;F.useCallback=function(e,t){return _e.current.useCallback(e,t)};F.useContext=function(e){return _e.current.useContext(e)};F.useDebugValue=function(){};F.useDeferredValue=function(e){return _e.current.useDeferredValue(e)};F.useEffect=function(e,t){return _e.current.useEffect(e,t)};F.useId=function(){return _e.current.useId()};F.useImperativeHandle=function(e,t,r){return _e.current.useImperativeHandle(e,t,r)};F.useInsertionEffect=function(e,t){return _e.current.useInsertionEffect(e,t)};F.useLayoutEffect=function(e,t){return _e.current.useLayoutEffect(e,t)};F.useMemo=function(e,t){return _e.current.useMemo(e,t)};F.useReducer=function(e,t,r){return _e.current.useReducer(e,t,r)};F.useRef=function(e){return _e.current.useRef(e)};F.useState=function(e){return _e.current.useState(e)};F.useSyncExternalStore=function(e,t,r){return _e.current.useSyncExternalStore(e,t,r)};F.useTransition=function(){return _e.current.useTransition()};F.version="18.3.1";su.exports=F;var N=su.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lf=N,cf=Symbol.for("react.element"),uf=Symbol.for("react.fragment"),df=Object.prototype.hasOwnProperty,hf=lf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ff={key:!0,ref:!0,__self:!0,__source:!0};function fu(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)df.call(t,n)&&!ff.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:cf,type:e,key:i,ref:o,props:s,_owner:hf.current}}pi.Fragment=uf;pi.jsx=fu;pi.jsxs=fu;nu.exports=pi;var a=nu.exports,mu={exports:{}},$e={},pu={exports:{}},gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,$){var D=E.length;E.push($);e:for(;0<D;){var B=D-1>>>1,U=E[B];if(0<s(U,$))E[B]=$,E[D]=U,D=B;else break e}}function r(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var $=E[0],D=E.pop();if(D!==$){E[0]=D;e:for(var B=0,U=E.length,De=U>>>1;B<De;){var fe=2*(B+1)-1,Nt=E[fe],He=fe+1,on=E[He];if(0>s(Nt,D))He<U&&0>s(on,Nt)?(E[B]=on,E[He]=D,B=He):(E[B]=Nt,E[fe]=D,B=fe);else if(He<U&&0>s(on,D))E[B]=on,E[He]=D,B=He;else break e}}return $}function s(E,$){var D=E.sortIndex-$.sortIndex;return D!==0?D:E.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,p=3,y=!1,m=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(E){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=E)n(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=r(u)}}function v(E){if(b=!1,f(E),!m)if(r(c)!==null)m=!0,C(w);else{var $=r(u);$!==null&&O(v,$.startTime-E)}}function w(E,$){m=!1,b&&(b=!1,x(T),T=-1),y=!0;var D=p;try{for(f($),d=r(c);d!==null&&(!(d.expirationTime>$)||E&&!I());){var B=d.callback;if(typeof B=="function"){d.callback=null,p=d.priorityLevel;var U=B(d.expirationTime<=$);$=e.unstable_now(),typeof U=="function"?d.callback=U:d===r(c)&&n(c),f($)}else n(c);d=r(c)}if(d!==null)var De=!0;else{var fe=r(u);fe!==null&&O(v,fe.startTime-$),De=!1}return De}finally{d=null,p=D,y=!1}}var _=!1,j=null,T=-1,S=5,A=-1;function I(){return!(e.unstable_now()-A<S)}function te(){if(j!==null){var E=e.unstable_now();A=E;var $=!0;try{$=j(!0,E)}finally{$?je():(_=!1,j=null)}}else _=!1}var je;if(typeof g=="function")je=function(){g(te)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,Zt=tt.port2;tt.port1.onmessage=te,je=function(){Zt.postMessage(null)}}else je=function(){k(te,0)};function C(E){j=E,_||(_=!0,je())}function O(E,$){T=k(function(){E(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){m||y||(m=!0,C(w))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(E){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var D=p;p=$;try{return E()}finally{p=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,$){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var D=p;p=E;try{return $()}finally{p=D}},e.unstable_scheduleCallback=function(E,$,D){var B=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?B+D:B):D=B,E){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=D+U,E={id:h++,callback:$,priorityLevel:E,startTime:D,expirationTime:U,sortIndex:-1},D>B?(E.sortIndex=D,t(u,E),r(c)===null&&E===r(u)&&(b?(x(T),T=-1):b=!0,O(v,D-B))):(E.sortIndex=U,t(c,E),m||y||(m=!0,C(w))),E},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(E){var $=p;return function(){var D=p;p=$;try{return E.apply(this,arguments)}finally{p=D}}}})(gu);pu.exports=gu;var mf=pu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf=N,Ae=mf;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xu=new Set,Ln={};function vr(e,t){Gr(e,t),Gr(e+"Capture",t)}function Gr(e,t){for(Ln[e]=t,e=0;e<t.length;e++)xu.add(t[e])}var yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xa=Object.prototype.hasOwnProperty,gf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sl={},El={};function xf(e){return xa.call(El,e)?!0:xa.call(Sl,e)?!1:gf.test(e)?El[e]=!0:(Sl[e]=!0,!1)}function vf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function yf(e,t,r,n){if(t===null||typeof t>"u"||vf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function be(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var he={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){he[e]=new be(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];he[t]=new be(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){he[e]=new be(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){he[e]=new be(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){he[e]=new be(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){he[e]=new be(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){he[e]=new be(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){he[e]=new be(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){he[e]=new be(e,5,!1,e.toLowerCase(),null,!1,!1)});var Eo=/[\-:]([a-z])/g;function Co(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Eo,Co);he[t]=new be(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Eo,Co);he[t]=new be(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Eo,Co);he[t]=new be(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){he[e]=new be(e,1,!1,e.toLowerCase(),null,!1,!1)});he.xlinkHref=new be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){he[e]=new be(e,1,!1,e.toLowerCase(),null,!0,!0)});function To(e,t,r,n){var s=he.hasOwnProperty(t)?he[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(yf(t,r,s,n)&&(r=null),n||s===null?xf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var jt=pf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cs=Symbol.for("react.element"),Tr=Symbol.for("react.portal"),Pr=Symbol.for("react.fragment"),Po=Symbol.for("react.strict_mode"),va=Symbol.for("react.profiler"),vu=Symbol.for("react.provider"),yu=Symbol.for("react.context"),Oo=Symbol.for("react.forward_ref"),ya=Symbol.for("react.suspense"),wa=Symbol.for("react.suspense_list"),Ro=Symbol.for("react.memo"),Ct=Symbol.for("react.lazy"),wu=Symbol.for("react.offscreen"),Cl=Symbol.iterator;function ln(e){return e===null||typeof e!="object"?null:(e=Cl&&e[Cl]||e["@@iterator"],typeof e=="function"?e:null)}var Z=Object.assign,Ii;function xn(e){if(Ii===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ii=t&&t[1]||""}return`
`+Ii+e}var Mi=!1;function Ui(e,t){if(!e||Mi)return"";Mi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Mi=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?xn(e):""}function wf(e){switch(e.tag){case 5:return xn(e.type);case 16:return xn("Lazy");case 13:return xn("Suspense");case 19:return xn("SuspenseList");case 0:case 2:case 15:return e=Ui(e.type,!1),e;case 11:return e=Ui(e.type.render,!1),e;case 1:return e=Ui(e.type,!0),e;default:return""}}function _a(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pr:return"Fragment";case Tr:return"Portal";case va:return"Profiler";case Po:return"StrictMode";case ya:return"Suspense";case wa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yu:return(e.displayName||"Context")+".Consumer";case vu:return(e._context.displayName||"Context")+".Provider";case Oo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ro:return t=e.displayName||null,t!==null?t:_a(e.type)||"Memo";case Ct:t=e._payload,e=e._init;try{return _a(e(t))}catch{}}return null}function _f(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _a(t);case 8:return t===Po?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _u(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bf(e){var t=_u(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function us(e){e._valueTracker||(e._valueTracker=bf(e))}function bu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=_u(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Bs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ba(e,t){var r=t.checked;return Z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Tl(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=qt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ju(e,t){t=t.checked,t!=null&&To(e,"checked",t,!1)}function ja(e,t){ju(e,t);var r=qt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Na(e,t.type,r):t.hasOwnProperty("defaultValue")&&Na(e,t.type,qt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Na(e,t,r){(t!=="number"||Bs(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var vn=Array.isArray;function Fr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+qt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ka(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return Z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ol(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(P(92));if(vn(r)){if(1<r.length)throw Error(P(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:qt(r)}}function Nu(e,t){var r=qt(t.value),n=qt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Rl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ku(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ku(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ds,Su=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ds=ds||document.createElement("div"),ds.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ds.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Dn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jf=["Webkit","ms","Moz","O"];Object.keys(bn).forEach(function(e){jf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bn[t]=bn[e]})});function Eu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||bn.hasOwnProperty(e)&&bn[e]?(""+t).trim():t+"px"}function Cu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Eu(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Nf=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ea(e,t){if(t){if(Nf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function Ca(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ta=null;function Ao(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pa=null,Br=null,qr=null;function Al(e){if(e=ns(e)){if(typeof Pa!="function")throw Error(P(280));var t=e.stateNode;t&&(t=wi(t),Pa(e.stateNode,e.type,t))}}function Tu(e){Br?qr?qr.push(e):qr=[e]:Br=e}function Pu(){if(Br){var e=Br,t=qr;if(qr=Br=null,Al(e),t)for(e=0;e<t.length;e++)Al(t[e])}}function Ou(e,t){return e(t)}function Ru(){}var zi=!1;function Au(e,t,r){if(zi)return e(t,r);zi=!0;try{return Ou(e,t,r)}finally{zi=!1,(Br!==null||qr!==null)&&(Ru(),Pu())}}function In(e,t){var r=e.stateNode;if(r===null)return null;var n=wi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(P(231,t,typeof r));return r}var Oa=!1;if(yt)try{var cn={};Object.defineProperty(cn,"passive",{get:function(){Oa=!0}}),window.addEventListener("test",cn,cn),window.removeEventListener("test",cn,cn)}catch{Oa=!1}function kf(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(h){this.onError(h)}}var jn=!1,qs=null,Hs=!1,Ra=null,Sf={onError:function(e){jn=!0,qs=e}};function Ef(e,t,r,n,s,i,o,l,c){jn=!1,qs=null,kf.apply(Sf,arguments)}function Cf(e,t,r,n,s,i,o,l,c){if(Ef.apply(this,arguments),jn){if(jn){var u=qs;jn=!1,qs=null}else throw Error(P(198));Hs||(Hs=!0,Ra=u)}}function yr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $u(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $l(e){if(yr(e)!==e)throw Error(P(188))}function Tf(e){var t=e.alternate;if(!t){if(t=yr(e),t===null)throw Error(P(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return $l(s),e;if(i===n)return $l(s),t;i=i.sibling}throw Error(P(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?e:t}function Lu(e){return e=Tf(e),e!==null?Du(e):null}function Du(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Du(e);if(t!==null)return t;e=e.sibling}return null}var Iu=Ae.unstable_scheduleCallback,Ll=Ae.unstable_cancelCallback,Pf=Ae.unstable_shouldYield,Of=Ae.unstable_requestPaint,re=Ae.unstable_now,Rf=Ae.unstable_getCurrentPriorityLevel,$o=Ae.unstable_ImmediatePriority,Mu=Ae.unstable_UserBlockingPriority,Ws=Ae.unstable_NormalPriority,Af=Ae.unstable_LowPriority,Uu=Ae.unstable_IdlePriority,gi=null,ot=null;function $f(e){if(ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(gi,e,void 0,(e.current.flags&128)===128)}catch{}}var Ye=Math.clz32?Math.clz32:If,Lf=Math.log,Df=Math.LN2;function If(e){return e>>>=0,e===0?32:31-(Lf(e)/Df|0)|0}var hs=64,fs=4194304;function yn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vs(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=yn(l):(i&=o,i!==0&&(n=yn(i)))}else o=r&~s,o!==0?n=yn(o):i!==0&&(n=yn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ye(t),s=1<<r,n|=e[r],t&=~s;return n}function Mf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uf(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ye(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=Mf(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Aa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zu(){var e=hs;return hs<<=1,!(hs&4194240)&&(hs=64),e}function Fi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ts(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ye(t),e[t]=r}function zf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ye(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Lo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ye(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var W=0;function Fu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bu,Do,qu,Hu,Wu,$a=!1,ms=[],Lt=null,Dt=null,It=null,Mn=new Map,Un=new Map,Pt=[],Ff="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dl(e,t){switch(e){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Mn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Un.delete(t.pointerId)}}function un(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ns(t),t!==null&&Do(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Bf(e,t,r,n,s){switch(t){case"focusin":return Lt=un(Lt,e,t,r,n,s),!0;case"dragenter":return Dt=un(Dt,e,t,r,n,s),!0;case"mouseover":return It=un(It,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Mn.set(i,un(Mn.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Un.set(i,un(Un.get(i)||null,e,t,r,n,s)),!0}return!1}function Vu(e){var t=or(e.target);if(t!==null){var r=yr(t);if(r!==null){if(t=r.tag,t===13){if(t=$u(r),t!==null){e.blockedOn=t,Wu(e.priority,function(){qu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Os(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=La(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ta=n,r.target.dispatchEvent(n),Ta=null}else return t=ns(r),t!==null&&Do(t),e.blockedOn=r,!1;t.shift()}return!0}function Il(e,t,r){Os(e)&&r.delete(t)}function qf(){$a=!1,Lt!==null&&Os(Lt)&&(Lt=null),Dt!==null&&Os(Dt)&&(Dt=null),It!==null&&Os(It)&&(It=null),Mn.forEach(Il),Un.forEach(Il)}function dn(e,t){e.blockedOn===t&&(e.blockedOn=null,$a||($a=!0,Ae.unstable_scheduleCallback(Ae.unstable_NormalPriority,qf)))}function zn(e){function t(s){return dn(s,e)}if(0<ms.length){dn(ms[0],e);for(var r=1;r<ms.length;r++){var n=ms[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Lt!==null&&dn(Lt,e),Dt!==null&&dn(Dt,e),It!==null&&dn(It,e),Mn.forEach(t),Un.forEach(t),r=0;r<Pt.length;r++)n=Pt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Pt.length&&(r=Pt[0],r.blockedOn===null);)Vu(r),r.blockedOn===null&&Pt.shift()}var Hr=jt.ReactCurrentBatchConfig,Gs=!0;function Hf(e,t,r,n){var s=W,i=Hr.transition;Hr.transition=null;try{W=1,Io(e,t,r,n)}finally{W=s,Hr.transition=i}}function Wf(e,t,r,n){var s=W,i=Hr.transition;Hr.transition=null;try{W=4,Io(e,t,r,n)}finally{W=s,Hr.transition=i}}function Io(e,t,r,n){if(Gs){var s=La(e,t,r,n);if(s===null)Yi(e,t,n,Ks,r),Dl(e,n);else if(Bf(s,e,t,r,n))n.stopPropagation();else if(Dl(e,n),t&4&&-1<Ff.indexOf(e)){for(;s!==null;){var i=ns(s);if(i!==null&&Bu(i),i=La(e,t,r,n),i===null&&Yi(e,t,n,Ks,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Yi(e,t,n,null,r)}}var Ks=null;function La(e,t,r,n){if(Ks=null,e=Ao(n),e=or(e),e!==null)if(t=yr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$u(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ks=e,null}function Gu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rf()){case $o:return 1;case Mu:return 4;case Ws:case Af:return 16;case Uu:return 536870912;default:return 16}default:return 16}}var At=null,Mo=null,Rs=null;function Ku(){if(Rs)return Rs;var e,t=Mo,r=t.length,n,s="value"in At?At.value:At.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Rs=s.slice(e,1<n?1-n:void 0)}function As(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ps(){return!0}function Ml(){return!1}function Le(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ps:Ml,this.isPropagationStopped=Ml,this}return Z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),t}var rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=Le(rn),rs=Z({},rn,{view:0,detail:0}),Vf=Le(rs),Bi,qi,hn,xi=Z({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&e.type==="mousemove"?(Bi=e.screenX-hn.screenX,qi=e.screenY-hn.screenY):qi=Bi=0,hn=e),Bi)},movementY:function(e){return"movementY"in e?e.movementY:qi}}),Ul=Le(xi),Gf=Z({},xi,{dataTransfer:0}),Kf=Le(Gf),Qf=Z({},rs,{relatedTarget:0}),Hi=Le(Qf),Jf=Z({},rn,{animationName:0,elapsedTime:0,pseudoElement:0}),Yf=Le(Jf),Xf=Z({},rn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zf=Le(Xf),em=Z({},rn,{data:0}),zl=Le(em),tm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nm[e])?!!t[e]:!1}function zo(){return sm}var im=Z({},rs,{key:function(e){if(e.key){var t=tm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=As(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zo,charCode:function(e){return e.type==="keypress"?As(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?As(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),am=Le(im),om=Z({},xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fl=Le(om),lm=Z({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zo}),cm=Le(lm),um=Z({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),dm=Le(um),hm=Z({},xi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fm=Le(hm),mm=[9,13,27,32],Fo=yt&&"CompositionEvent"in window,Nn=null;yt&&"documentMode"in document&&(Nn=document.documentMode);var pm=yt&&"TextEvent"in window&&!Nn,Qu=yt&&(!Fo||Nn&&8<Nn&&11>=Nn),Bl=" ",ql=!1;function Ju(e,t){switch(e){case"keyup":return mm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Or=!1;function gm(e,t){switch(e){case"compositionend":return Yu(t);case"keypress":return t.which!==32?null:(ql=!0,Bl);case"textInput":return e=t.data,e===Bl&&ql?null:e;default:return null}}function xm(e,t){if(Or)return e==="compositionend"||!Fo&&Ju(e,t)?(e=Ku(),Rs=Mo=At=null,Or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qu&&t.locale!=="ko"?null:t.data;default:return null}}var vm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!vm[e.type]:t==="textarea"}function Xu(e,t,r,n){Tu(n),t=Qs(t,"onChange"),0<t.length&&(r=new Uo("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var kn=null,Fn=null;function ym(e){cd(e,0)}function vi(e){var t=$r(e);if(bu(t))return e}function wm(e,t){if(e==="change")return t}var Zu=!1;if(yt){var Wi;if(yt){var Vi="oninput"in document;if(!Vi){var Wl=document.createElement("div");Wl.setAttribute("oninput","return;"),Vi=typeof Wl.oninput=="function"}Wi=Vi}else Wi=!1;Zu=Wi&&(!document.documentMode||9<document.documentMode)}function Vl(){kn&&(kn.detachEvent("onpropertychange",ed),Fn=kn=null)}function ed(e){if(e.propertyName==="value"&&vi(Fn)){var t=[];Xu(t,Fn,e,Ao(e)),Au(ym,t)}}function _m(e,t,r){e==="focusin"?(Vl(),kn=t,Fn=r,kn.attachEvent("onpropertychange",ed)):e==="focusout"&&Vl()}function bm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vi(Fn)}function jm(e,t){if(e==="click")return vi(t)}function Nm(e,t){if(e==="input"||e==="change")return vi(t)}function km(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ze=typeof Object.is=="function"?Object.is:km;function Bn(e,t){if(Ze(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!xa.call(t,s)||!Ze(e[s],t[s]))return!1}return!0}function Gl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kl(e,t){var r=Gl(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Gl(r)}}function td(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?td(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rd(){for(var e=window,t=Bs();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Bs(e.document)}return t}function Bo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Sm(e){var t=rd(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&td(r.ownerDocument.documentElement,r)){if(n!==null&&Bo(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Kl(r,i);var o=Kl(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Em=yt&&"documentMode"in document&&11>=document.documentMode,Rr=null,Da=null,Sn=null,Ia=!1;function Ql(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ia||Rr==null||Rr!==Bs(n)||(n=Rr,"selectionStart"in n&&Bo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Sn&&Bn(Sn,n)||(Sn=n,n=Qs(Da,"onSelect"),0<n.length&&(t=new Uo("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Rr)))}function gs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ar={animationend:gs("Animation","AnimationEnd"),animationiteration:gs("Animation","AnimationIteration"),animationstart:gs("Animation","AnimationStart"),transitionend:gs("Transition","TransitionEnd")},Gi={},nd={};yt&&(nd=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);function yi(e){if(Gi[e])return Gi[e];if(!Ar[e])return e;var t=Ar[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in nd)return Gi[e]=t[r];return e}var sd=yi("animationend"),id=yi("animationiteration"),ad=yi("animationstart"),od=yi("transitionend"),ld=new Map,Jl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gt(e,t){ld.set(e,t),vr(t,[e])}for(var Ki=0;Ki<Jl.length;Ki++){var Qi=Jl[Ki],Cm=Qi.toLowerCase(),Tm=Qi[0].toUpperCase()+Qi.slice(1);Gt(Cm,"on"+Tm)}Gt(sd,"onAnimationEnd");Gt(id,"onAnimationIteration");Gt(ad,"onAnimationStart");Gt("dblclick","onDoubleClick");Gt("focusin","onFocus");Gt("focusout","onBlur");Gt(od,"onTransitionEnd");Gr("onMouseEnter",["mouseout","mouseover"]);Gr("onMouseLeave",["mouseout","mouseover"]);Gr("onPointerEnter",["pointerout","pointerover"]);Gr("onPointerLeave",["pointerout","pointerover"]);vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pm=new Set("cancel close invalid load scroll toggle".split(" ").concat(wn));function Yl(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Cf(n,t,void 0,e),e.currentTarget=null}function cd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Yl(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Yl(s,l,u),i=c}}}if(Hs)throw e=Ra,Hs=!1,Ra=null,e}function K(e,t){var r=t[Ba];r===void 0&&(r=t[Ba]=new Set);var n=e+"__bubble";r.has(n)||(ud(t,e,2,!1),r.add(n))}function Ji(e,t,r){var n=0;t&&(n|=4),ud(r,e,n,t)}var xs="_reactListening"+Math.random().toString(36).slice(2);function qn(e){if(!e[xs]){e[xs]=!0,xu.forEach(function(r){r!=="selectionchange"&&(Pm.has(r)||Ji(r,!1,e),Ji(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xs]||(t[xs]=!0,Ji("selectionchange",!1,t))}}function ud(e,t,r,n){switch(Gu(t)){case 1:var s=Hf;break;case 4:s=Wf;break;default:s=Io}r=s.bind(null,t,r,e),s=void 0,!Oa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Yi(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=or(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Au(function(){var u=i,h=Ao(r),d=[];e:{var p=ld.get(e);if(p!==void 0){var y=Uo,m=e;switch(e){case"keypress":if(As(r)===0)break e;case"keydown":case"keyup":y=am;break;case"focusin":m="focus",y=Hi;break;case"focusout":m="blur",y=Hi;break;case"beforeblur":case"afterblur":y=Hi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Kf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=cm;break;case sd:case id:case ad:y=Yf;break;case od:y=dm;break;case"scroll":y=Vf;break;case"wheel":y=fm;break;case"copy":case"cut":case"paste":y=Zf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Fl}var b=(t&4)!==0,k=!b&&e==="scroll",x=b?p!==null?p+"Capture":null:p;b=[];for(var g=u,f;g!==null;){f=g;var v=f.stateNode;if(f.tag===5&&v!==null&&(f=v,x!==null&&(v=In(g,x),v!=null&&b.push(Hn(g,v,f)))),k)break;g=g.return}0<b.length&&(p=new y(p,m,null,r,h),d.push({event:p,listeners:b}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",p&&r!==Ta&&(m=r.relatedTarget||r.fromElement)&&(or(m)||m[wt]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(m=r.relatedTarget||r.toElement,y=u,m=m?or(m):null,m!==null&&(k=yr(m),m!==k||m.tag!==5&&m.tag!==6)&&(m=null)):(y=null,m=u),y!==m)){if(b=Ul,v="onMouseLeave",x="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(b=Fl,v="onPointerLeave",x="onPointerEnter",g="pointer"),k=y==null?p:$r(y),f=m==null?p:$r(m),p=new b(v,g+"leave",y,r,h),p.target=k,p.relatedTarget=f,v=null,or(h)===u&&(b=new b(x,g+"enter",m,r,h),b.target=f,b.relatedTarget=k,v=b),k=v,y&&m)t:{for(b=y,x=m,g=0,f=b;f;f=_r(f))g++;for(f=0,v=x;v;v=_r(v))f++;for(;0<g-f;)b=_r(b),g--;for(;0<f-g;)x=_r(x),f--;for(;g--;){if(b===x||x!==null&&b===x.alternate)break t;b=_r(b),x=_r(x)}b=null}else b=null;y!==null&&Xl(d,p,y,b,!1),m!==null&&k!==null&&Xl(d,k,m,b,!0)}}e:{if(p=u?$r(u):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var w=wm;else if(Hl(p))if(Zu)w=Nm;else{w=bm;var _=_m}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=jm);if(w&&(w=w(e,u))){Xu(d,w,r,h);break e}_&&_(e,p,u),e==="focusout"&&(_=p._wrapperState)&&_.controlled&&p.type==="number"&&Na(p,"number",p.value)}switch(_=u?$r(u):window,e){case"focusin":(Hl(_)||_.contentEditable==="true")&&(Rr=_,Da=u,Sn=null);break;case"focusout":Sn=Da=Rr=null;break;case"mousedown":Ia=!0;break;case"contextmenu":case"mouseup":case"dragend":Ia=!1,Ql(d,r,h);break;case"selectionchange":if(Em)break;case"keydown":case"keyup":Ql(d,r,h)}var j;if(Fo)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Or?Ju(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(Qu&&r.locale!=="ko"&&(Or||T!=="onCompositionStart"?T==="onCompositionEnd"&&Or&&(j=Ku()):(At=h,Mo="value"in At?At.value:At.textContent,Or=!0)),_=Qs(u,T),0<_.length&&(T=new zl(T,e,null,r,h),d.push({event:T,listeners:_}),j?T.data=j:(j=Yu(r),j!==null&&(T.data=j)))),(j=pm?gm(e,r):xm(e,r))&&(u=Qs(u,"onBeforeInput"),0<u.length&&(h=new zl("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:u}),h.data=j))}cd(d,t)})}function Hn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Qs(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=In(e,r),i!=null&&n.unshift(Hn(e,i,s)),i=In(e,t),i!=null&&n.push(Hn(e,i,s))),e=e.return}return n}function _r(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xl(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=In(r,i),c!=null&&o.unshift(Hn(r,c,l))):s||(c=In(r,i),c!=null&&o.push(Hn(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Om=/\r\n?/g,Rm=/\u0000|\uFFFD/g;function Zl(e){return(typeof e=="string"?e:""+e).replace(Om,`
`).replace(Rm,"")}function vs(e,t,r){if(t=Zl(t),Zl(e)!==t&&r)throw Error(P(425))}function Js(){}var Ma=null,Ua=null;function za(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fa=typeof setTimeout=="function"?setTimeout:void 0,Am=typeof clearTimeout=="function"?clearTimeout:void 0,ec=typeof Promise=="function"?Promise:void 0,$m=typeof queueMicrotask=="function"?queueMicrotask:typeof ec<"u"?function(e){return ec.resolve(null).then(e).catch(Lm)}:Fa;function Lm(e){setTimeout(function(){throw e})}function Xi(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),zn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);zn(t)}function Mt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var nn=Math.random().toString(36).slice(2),it="__reactFiber$"+nn,Wn="__reactProps$"+nn,wt="__reactContainer$"+nn,Ba="__reactEvents$"+nn,Dm="__reactListeners$"+nn,Im="__reactHandles$"+nn;function or(e){var t=e[it];if(t)return t;for(var r=e.parentNode;r;){if(t=r[wt]||r[it]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=tc(e);e!==null;){if(r=e[it])return r;e=tc(e)}return t}e=r,r=e.parentNode}return null}function ns(e){return e=e[it]||e[wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function $r(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function wi(e){return e[Wn]||null}var qa=[],Lr=-1;function Kt(e){return{current:e}}function Q(e){0>Lr||(e.current=qa[Lr],qa[Lr]=null,Lr--)}function G(e,t){Lr++,qa[Lr]=e.current,e.current=t}var Ht={},xe=Kt(Ht),Ee=Kt(!1),hr=Ht;function Kr(e,t){var r=e.type.contextTypes;if(!r)return Ht;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ce(e){return e=e.childContextTypes,e!=null}function Ys(){Q(Ee),Q(xe)}function rc(e,t,r){if(xe.current!==Ht)throw Error(P(168));G(xe,t),G(Ee,r)}function dd(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(P(108,_f(e)||"Unknown",s));return Z({},r,n)}function Xs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ht,hr=xe.current,G(xe,e),G(Ee,Ee.current),!0}function nc(e,t,r){var n=e.stateNode;if(!n)throw Error(P(169));r?(e=dd(e,t,hr),n.__reactInternalMemoizedMergedChildContext=e,Q(Ee),Q(xe),G(xe,e)):Q(Ee),G(Ee,r)}var pt=null,_i=!1,Zi=!1;function hd(e){pt===null?pt=[e]:pt.push(e)}function Mm(e){_i=!0,hd(e)}function Qt(){if(!Zi&&pt!==null){Zi=!0;var e=0,t=W;try{var r=pt;for(W=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}pt=null,_i=!1}catch(s){throw pt!==null&&(pt=pt.slice(e+1)),Iu($o,Qt),s}finally{W=t,Zi=!1}}return null}var Dr=[],Ir=0,Zs=null,ei=0,Ie=[],Me=0,fr=null,gt=1,xt="";function nr(e,t){Dr[Ir++]=ei,Dr[Ir++]=Zs,Zs=e,ei=t}function fd(e,t,r){Ie[Me++]=gt,Ie[Me++]=xt,Ie[Me++]=fr,fr=e;var n=gt;e=xt;var s=32-Ye(n)-1;n&=~(1<<s),r+=1;var i=32-Ye(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,gt=1<<32-Ye(t)+s|r<<s|n,xt=i+e}else gt=1<<i|r<<s|n,xt=e}function qo(e){e.return!==null&&(nr(e,1),fd(e,1,0))}function Ho(e){for(;e===Zs;)Zs=Dr[--Ir],Dr[Ir]=null,ei=Dr[--Ir],Dr[Ir]=null;for(;e===fr;)fr=Ie[--Me],Ie[Me]=null,xt=Ie[--Me],Ie[Me]=null,gt=Ie[--Me],Ie[Me]=null}var Re=null,Oe=null,J=!1,Je=null;function md(e,t){var r=Ue(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function sc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Re=e,Oe=Mt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Re=e,Oe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=fr!==null?{id:gt,overflow:xt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ue(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Re=e,Oe=null,!0):!1;default:return!1}}function Ha(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wa(e){if(J){var t=Oe;if(t){var r=t;if(!sc(e,t)){if(Ha(e))throw Error(P(418));t=Mt(r.nextSibling);var n=Re;t&&sc(e,t)?md(n,r):(e.flags=e.flags&-4097|2,J=!1,Re=e)}}else{if(Ha(e))throw Error(P(418));e.flags=e.flags&-4097|2,J=!1,Re=e}}}function ic(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Re=e}function ys(e){if(e!==Re)return!1;if(!J)return ic(e),J=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!za(e.type,e.memoizedProps)),t&&(t=Oe)){if(Ha(e))throw pd(),Error(P(418));for(;t;)md(e,t),t=Mt(t.nextSibling)}if(ic(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Oe=Mt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Oe=null}}else Oe=Re?Mt(e.stateNode.nextSibling):null;return!0}function pd(){for(var e=Oe;e;)e=Mt(e.nextSibling)}function Qr(){Oe=Re=null,J=!1}function Wo(e){Je===null?Je=[e]:Je.push(e)}var Um=jt.ReactCurrentBatchConfig;function fn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,e))}return e}function ws(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ac(e){var t=e._init;return t(e._payload)}function gd(e){function t(x,g){if(e){var f=x.deletions;f===null?(x.deletions=[g],x.flags|=16):f.push(g)}}function r(x,g){if(!e)return null;for(;g!==null;)t(x,g),g=g.sibling;return null}function n(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function s(x,g){return x=Bt(x,g),x.index=0,x.sibling=null,x}function i(x,g,f){return x.index=f,e?(f=x.alternate,f!==null?(f=f.index,f<g?(x.flags|=2,g):f):(x.flags|=2,g)):(x.flags|=1048576,g)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,g,f,v){return g===null||g.tag!==6?(g=aa(f,x.mode,v),g.return=x,g):(g=s(g,f),g.return=x,g)}function c(x,g,f,v){var w=f.type;return w===Pr?h(x,g,f.props.children,v,f.key):g!==null&&(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ct&&ac(w)===g.type)?(v=s(g,f.props),v.ref=fn(x,g,f),v.return=x,v):(v=zs(f.type,f.key,f.props,null,x.mode,v),v.ref=fn(x,g,f),v.return=x,v)}function u(x,g,f,v){return g===null||g.tag!==4||g.stateNode.containerInfo!==f.containerInfo||g.stateNode.implementation!==f.implementation?(g=oa(f,x.mode,v),g.return=x,g):(g=s(g,f.children||[]),g.return=x,g)}function h(x,g,f,v,w){return g===null||g.tag!==7?(g=dr(f,x.mode,v,w),g.return=x,g):(g=s(g,f),g.return=x,g)}function d(x,g,f){if(typeof g=="string"&&g!==""||typeof g=="number")return g=aa(""+g,x.mode,f),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case cs:return f=zs(g.type,g.key,g.props,null,x.mode,f),f.ref=fn(x,null,g),f.return=x,f;case Tr:return g=oa(g,x.mode,f),g.return=x,g;case Ct:var v=g._init;return d(x,v(g._payload),f)}if(vn(g)||ln(g))return g=dr(g,x.mode,f,null),g.return=x,g;ws(x,g)}return null}function p(x,g,f,v){var w=g!==null?g.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return w!==null?null:l(x,g,""+f,v);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case cs:return f.key===w?c(x,g,f,v):null;case Tr:return f.key===w?u(x,g,f,v):null;case Ct:return w=f._init,p(x,g,w(f._payload),v)}if(vn(f)||ln(f))return w!==null?null:h(x,g,f,v,null);ws(x,f)}return null}function y(x,g,f,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return x=x.get(f)||null,l(g,x,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case cs:return x=x.get(v.key===null?f:v.key)||null,c(g,x,v,w);case Tr:return x=x.get(v.key===null?f:v.key)||null,u(g,x,v,w);case Ct:var _=v._init;return y(x,g,f,_(v._payload),w)}if(vn(v)||ln(v))return x=x.get(f)||null,h(g,x,v,w,null);ws(g,v)}return null}function m(x,g,f,v){for(var w=null,_=null,j=g,T=g=0,S=null;j!==null&&T<f.length;T++){j.index>T?(S=j,j=null):S=j.sibling;var A=p(x,j,f[T],v);if(A===null){j===null&&(j=S);break}e&&j&&A.alternate===null&&t(x,j),g=i(A,g,T),_===null?w=A:_.sibling=A,_=A,j=S}if(T===f.length)return r(x,j),J&&nr(x,T),w;if(j===null){for(;T<f.length;T++)j=d(x,f[T],v),j!==null&&(g=i(j,g,T),_===null?w=j:_.sibling=j,_=j);return J&&nr(x,T),w}for(j=n(x,j);T<f.length;T++)S=y(j,x,T,f[T],v),S!==null&&(e&&S.alternate!==null&&j.delete(S.key===null?T:S.key),g=i(S,g,T),_===null?w=S:_.sibling=S,_=S);return e&&j.forEach(function(I){return t(x,I)}),J&&nr(x,T),w}function b(x,g,f,v){var w=ln(f);if(typeof w!="function")throw Error(P(150));if(f=w.call(f),f==null)throw Error(P(151));for(var _=w=null,j=g,T=g=0,S=null,A=f.next();j!==null&&!A.done;T++,A=f.next()){j.index>T?(S=j,j=null):S=j.sibling;var I=p(x,j,A.value,v);if(I===null){j===null&&(j=S);break}e&&j&&I.alternate===null&&t(x,j),g=i(I,g,T),_===null?w=I:_.sibling=I,_=I,j=S}if(A.done)return r(x,j),J&&nr(x,T),w;if(j===null){for(;!A.done;T++,A=f.next())A=d(x,A.value,v),A!==null&&(g=i(A,g,T),_===null?w=A:_.sibling=A,_=A);return J&&nr(x,T),w}for(j=n(x,j);!A.done;T++,A=f.next())A=y(j,x,T,A.value,v),A!==null&&(e&&A.alternate!==null&&j.delete(A.key===null?T:A.key),g=i(A,g,T),_===null?w=A:_.sibling=A,_=A);return e&&j.forEach(function(te){return t(x,te)}),J&&nr(x,T),w}function k(x,g,f,v){if(typeof f=="object"&&f!==null&&f.type===Pr&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case cs:e:{for(var w=f.key,_=g;_!==null;){if(_.key===w){if(w=f.type,w===Pr){if(_.tag===7){r(x,_.sibling),g=s(_,f.props.children),g.return=x,x=g;break e}}else if(_.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ct&&ac(w)===_.type){r(x,_.sibling),g=s(_,f.props),g.ref=fn(x,_,f),g.return=x,x=g;break e}r(x,_);break}else t(x,_);_=_.sibling}f.type===Pr?(g=dr(f.props.children,x.mode,v,f.key),g.return=x,x=g):(v=zs(f.type,f.key,f.props,null,x.mode,v),v.ref=fn(x,g,f),v.return=x,x=v)}return o(x);case Tr:e:{for(_=f.key;g!==null;){if(g.key===_)if(g.tag===4&&g.stateNode.containerInfo===f.containerInfo&&g.stateNode.implementation===f.implementation){r(x,g.sibling),g=s(g,f.children||[]),g.return=x,x=g;break e}else{r(x,g);break}else t(x,g);g=g.sibling}g=oa(f,x.mode,v),g.return=x,x=g}return o(x);case Ct:return _=f._init,k(x,g,_(f._payload),v)}if(vn(f))return m(x,g,f,v);if(ln(f))return b(x,g,f,v);ws(x,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,g!==null&&g.tag===6?(r(x,g.sibling),g=s(g,f),g.return=x,x=g):(r(x,g),g=aa(f,x.mode,v),g.return=x,x=g),o(x)):r(x,g)}return k}var Jr=gd(!0),xd=gd(!1),ti=Kt(null),ri=null,Mr=null,Vo=null;function Go(){Vo=Mr=ri=null}function Ko(e){var t=ti.current;Q(ti),e._currentValue=t}function Va(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Wr(e,t){ri=e,Vo=Mr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Se=!0),e.firstContext=null)}function Be(e){var t=e._currentValue;if(Vo!==e)if(e={context:e,memoizedValue:t,next:null},Mr===null){if(ri===null)throw Error(P(308));Mr=e,ri.dependencies={lanes:0,firstContext:e}}else Mr=Mr.next=e;return t}var lr=null;function Qo(e){lr===null?lr=[e]:lr.push(e)}function vd(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Qo(t)):(r.next=s.next,s.next=r),t.interleaved=r,_t(e,n)}function _t(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Tt=!1;function Jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ut(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,H&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,_t(e,r)}return s=n.interleaved,s===null?(t.next=t,Qo(n)):(t.next=s.next,s.next=t),n.interleaved=t,_t(e,r)}function $s(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Lo(e,r)}}function oc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ni(e,t,r,n){var s=e.updateQueue;Tt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,l=i;do{var p=l.lane,y=l.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,b=l;switch(p=t,y=r,b.tag){case 1:if(m=b.payload,typeof m=="function"){d=m.call(y,d,p);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=b.payload,p=typeof m=="function"?m.call(y,d,p):m,p==null)break e;d=Z({},d,p);break e;case 2:Tt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else y={eventTime:y,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,c=d):h=h.next=y,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);pr|=o,e.lanes=o,e.memoizedState=d}}function lc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(P(191,s));s.call(n)}}}var ss={},lt=Kt(ss),Vn=Kt(ss),Gn=Kt(ss);function cr(e){if(e===ss)throw Error(P(174));return e}function Yo(e,t){switch(G(Gn,t),G(Vn,e),G(lt,ss),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Sa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Sa(t,e)}Q(lt),G(lt,t)}function Yr(){Q(lt),Q(Vn),Q(Gn)}function wd(e){cr(Gn.current);var t=cr(lt.current),r=Sa(t,e.type);t!==r&&(G(Vn,e),G(lt,r))}function Xo(e){Vn.current===e&&(Q(lt),Q(Vn))}var Y=Kt(0);function si(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ea=[];function Zo(){for(var e=0;e<ea.length;e++)ea[e]._workInProgressVersionPrimary=null;ea.length=0}var Ls=jt.ReactCurrentDispatcher,ta=jt.ReactCurrentBatchConfig,mr=0,X=null,ae=null,le=null,ii=!1,En=!1,Kn=0,zm=0;function me(){throw Error(P(321))}function el(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ze(e[r],t[r]))return!1;return!0}function tl(e,t,r,n,s,i){if(mr=i,X=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ls.current=e===null||e.memoizedState===null?Hm:Wm,e=r(n,s),En){i=0;do{if(En=!1,Kn=0,25<=i)throw Error(P(301));i+=1,le=ae=null,t.updateQueue=null,Ls.current=Vm,e=r(n,s)}while(En)}if(Ls.current=ai,t=ae!==null&&ae.next!==null,mr=0,le=ae=X=null,ii=!1,t)throw Error(P(300));return e}function rl(){var e=Kn!==0;return Kn=0,e}function nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return le===null?X.memoizedState=le=e:le=le.next=e,le}function qe(){if(ae===null){var e=X.alternate;e=e!==null?e.memoizedState:null}else e=ae.next;var t=le===null?X.memoizedState:le.next;if(t!==null)le=t,ae=e;else{if(e===null)throw Error(P(310));ae=e,e={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},le===null?X.memoizedState=le=e:le=le.next=e}return le}function Qn(e,t){return typeof t=="function"?t(e):t}function ra(e){var t=qe(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=ae,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((mr&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=n):c=c.next=d,X.lanes|=h,pr|=h}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Ze(n,t.memoizedState)||(Se=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,X.lanes|=i,pr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function na(e){var t=qe(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ze(i,t.memoizedState)||(Se=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function _d(){}function bd(e,t){var r=X,n=qe(),s=t(),i=!Ze(n.memoizedState,s);if(i&&(n.memoizedState=s,Se=!0),n=n.queue,nl(kd.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||le!==null&&le.memoizedState.tag&1){if(r.flags|=2048,Jn(9,Nd.bind(null,r,n,s,t),void 0,null),ce===null)throw Error(P(349));mr&30||jd(r,t,s)}return s}function jd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=X.updateQueue,t===null?(t={lastEffect:null,stores:null},X.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Nd(e,t,r,n){t.value=r,t.getSnapshot=n,Sd(t)&&Ed(e)}function kd(e,t,r){return r(function(){Sd(t)&&Ed(e)})}function Sd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ze(e,r)}catch{return!0}}function Ed(e){var t=_t(e,1);t!==null&&Xe(t,e,1,-1)}function cc(e){var t=nt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:e},t.queue=e,e=e.dispatch=qm.bind(null,X,e),[t.memoizedState,e]}function Jn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=X.updateQueue,t===null?(t={lastEffect:null,stores:null},X.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Cd(){return qe().memoizedState}function Ds(e,t,r,n){var s=nt();X.flags|=e,s.memoizedState=Jn(1|t,r,void 0,n===void 0?null:n)}function bi(e,t,r,n){var s=qe();n=n===void 0?null:n;var i=void 0;if(ae!==null){var o=ae.memoizedState;if(i=o.destroy,n!==null&&el(n,o.deps)){s.memoizedState=Jn(t,r,i,n);return}}X.flags|=e,s.memoizedState=Jn(1|t,r,i,n)}function uc(e,t){return Ds(8390656,8,e,t)}function nl(e,t){return bi(2048,8,e,t)}function Td(e,t){return bi(4,2,e,t)}function Pd(e,t){return bi(4,4,e,t)}function Od(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rd(e,t,r){return r=r!=null?r.concat([e]):null,bi(4,4,Od.bind(null,t,e),r)}function sl(){}function Ad(e,t){var r=qe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&el(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $d(e,t){var r=qe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&el(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ld(e,t,r){return mr&21?(Ze(r,t)||(r=zu(),X.lanes|=r,pr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Se=!0),e.memoizedState=r)}function Fm(e,t){var r=W;W=r!==0&&4>r?r:4,e(!0);var n=ta.transition;ta.transition={};try{e(!1),t()}finally{W=r,ta.transition=n}}function Dd(){return qe().memoizedState}function Bm(e,t,r){var n=Ft(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Id(e))Md(t,r);else if(r=vd(e,t,r,n),r!==null){var s=we();Xe(r,e,n,s),Ud(r,t,n)}}function qm(e,t,r){var n=Ft(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Id(e))Md(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Ze(l,o)){var c=t.interleaved;c===null?(s.next=s,Qo(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=vd(e,t,s,n),r!==null&&(s=we(),Xe(r,e,n,s),Ud(r,t,n))}}function Id(e){var t=e.alternate;return e===X||t!==null&&t===X}function Md(e,t){En=ii=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ud(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Lo(e,r)}}var ai={readContext:Be,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useInsertionEffect:me,useLayoutEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useMutableSource:me,useSyncExternalStore:me,useId:me,unstable_isNewReconciler:!1},Hm={readContext:Be,useCallback:function(e,t){return nt().memoizedState=[e,t===void 0?null:t],e},useContext:Be,useEffect:uc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ds(4194308,4,Od.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ds(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ds(4,2,e,t)},useMemo:function(e,t){var r=nt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=nt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Bm.bind(null,X,e),[n.memoizedState,e]},useRef:function(e){var t=nt();return e={current:e},t.memoizedState=e},useState:cc,useDebugValue:sl,useDeferredValue:function(e){return nt().memoizedState=e},useTransition:function(){var e=cc(!1),t=e[0];return e=Fm.bind(null,e[1]),nt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=X,s=nt();if(J){if(r===void 0)throw Error(P(407));r=r()}else{if(r=t(),ce===null)throw Error(P(349));mr&30||jd(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,uc(kd.bind(null,n,i,e),[e]),n.flags|=2048,Jn(9,Nd.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=nt(),t=ce.identifierPrefix;if(J){var r=xt,n=gt;r=(n&~(1<<32-Ye(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Kn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=zm++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wm={readContext:Be,useCallback:Ad,useContext:Be,useEffect:nl,useImperativeHandle:Rd,useInsertionEffect:Td,useLayoutEffect:Pd,useMemo:$d,useReducer:ra,useRef:Cd,useState:function(){return ra(Qn)},useDebugValue:sl,useDeferredValue:function(e){var t=qe();return Ld(t,ae.memoizedState,e)},useTransition:function(){var e=ra(Qn)[0],t=qe().memoizedState;return[e,t]},useMutableSource:_d,useSyncExternalStore:bd,useId:Dd,unstable_isNewReconciler:!1},Vm={readContext:Be,useCallback:Ad,useContext:Be,useEffect:nl,useImperativeHandle:Rd,useInsertionEffect:Td,useLayoutEffect:Pd,useMemo:$d,useReducer:na,useRef:Cd,useState:function(){return na(Qn)},useDebugValue:sl,useDeferredValue:function(e){var t=qe();return ae===null?t.memoizedState=e:Ld(t,ae.memoizedState,e)},useTransition:function(){var e=na(Qn)[0],t=qe().memoizedState;return[e,t]},useMutableSource:_d,useSyncExternalStore:bd,useId:Dd,unstable_isNewReconciler:!1};function Ge(e,t){if(e&&e.defaultProps){t=Z({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ga(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Z({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ji={isMounted:function(e){return(e=e._reactInternals)?yr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=we(),s=Ft(e),i=vt(n,s);i.payload=t,r!=null&&(i.callback=r),t=Ut(e,i,s),t!==null&&(Xe(t,e,s,n),$s(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=we(),s=Ft(e),i=vt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ut(e,i,s),t!==null&&(Xe(t,e,s,n),$s(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=we(),n=Ft(e),s=vt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Ut(e,s,n),t!==null&&(Xe(t,e,n,r),$s(t,e,n))}};function dc(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Bn(r,n)||!Bn(s,i):!0}function zd(e,t,r){var n=!1,s=Ht,i=t.contextType;return typeof i=="object"&&i!==null?i=Be(i):(s=Ce(t)?hr:xe.current,n=t.contextTypes,i=(n=n!=null)?Kr(e,s):Ht),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ji,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function hc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ji.enqueueReplaceState(t,t.state,null)}function Ka(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Jo(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Be(i):(i=Ce(t)?hr:xe.current,s.context=Kr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ga(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ji.enqueueReplaceState(s,s.state,null),ni(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Xr(e,t){try{var r="",n=t;do r+=wf(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function sa(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Qa(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Gm=typeof WeakMap=="function"?WeakMap:Map;function Fd(e,t,r){r=vt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){li||(li=!0,io=n),Qa(e,t)},r}function Bd(e,t,r){r=vt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Qa(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Qa(e,t),typeof n!="function"&&(zt===null?zt=new Set([this]):zt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function fc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Gm;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=op.bind(null,e,t,r),t.then(e,e))}function mc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pc(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=vt(-1,1),t.tag=2,Ut(r,t,1))),r.lanes|=1),e)}var Km=jt.ReactCurrentOwner,Se=!1;function ye(e,t,r,n){t.child=e===null?xd(t,null,r,n):Jr(t,e.child,r,n)}function gc(e,t,r,n,s){r=r.render;var i=t.ref;return Wr(t,s),n=tl(e,t,r,n,i,s),r=rl(),e!==null&&!Se?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,bt(e,t,s)):(J&&r&&qo(t),t.flags|=1,ye(e,t,n,s),t.child)}function xc(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!hl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,qd(e,t,i,n,s)):(e=zs(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Bn,r(o,n)&&e.ref===t.ref)return bt(e,t,s)}return t.flags|=1,e=Bt(i,n),e.ref=t.ref,e.return=t,t.child=e}function qd(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Bn(i,n)&&e.ref===t.ref)if(Se=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Se=!0);else return t.lanes=e.lanes,bt(e,t,s)}return Ja(e,t,r,n,s)}function Hd(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(zr,Pe),Pe|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,G(zr,Pe),Pe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,G(zr,Pe),Pe|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,G(zr,Pe),Pe|=n;return ye(e,t,s,r),t.child}function Wd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ja(e,t,r,n,s){var i=Ce(r)?hr:xe.current;return i=Kr(t,i),Wr(t,s),r=tl(e,t,r,n,i,s),n=rl(),e!==null&&!Se?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,bt(e,t,s)):(J&&n&&qo(t),t.flags|=1,ye(e,t,r,s),t.child)}function vc(e,t,r,n,s){if(Ce(r)){var i=!0;Xs(t)}else i=!1;if(Wr(t,s),t.stateNode===null)Is(e,t),zd(t,r,n),Ka(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Be(u):(u=Ce(r)?hr:xe.current,u=Kr(t,u));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&hc(t,o,n,u),Tt=!1;var p=t.memoizedState;o.state=p,ni(t,n,o,s),c=t.memoizedState,l!==n||p!==c||Ee.current||Tt?(typeof h=="function"&&(Ga(t,r,h,n),c=t.memoizedState),(l=Tt||dc(t,r,l,n,p,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,yd(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ge(t.type,l),o.props=u,d=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Be(c):(c=Ce(r)?hr:xe.current,c=Kr(t,c));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||p!==c)&&hc(t,o,n,c),Tt=!1,p=t.memoizedState,o.state=p,ni(t,n,o,s);var m=t.memoizedState;l!==d||p!==m||Ee.current||Tt?(typeof y=="function"&&(Ga(t,r,y,n),m=t.memoizedState),(u=Tt||dc(t,r,u,n,p,m,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Ya(e,t,r,n,i,s)}function Ya(e,t,r,n,s,i){Wd(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&nc(t,r,!1),bt(e,t,i);n=t.stateNode,Km.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Jr(t,e.child,null,i),t.child=Jr(t,null,l,i)):ye(e,t,l,i),t.memoizedState=n.state,s&&nc(t,r,!0),t.child}function Vd(e){var t=e.stateNode;t.pendingContext?rc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rc(e,t.context,!1),Yo(e,t.containerInfo)}function yc(e,t,r,n,s){return Qr(),Wo(s),t.flags|=256,ye(e,t,r,n),t.child}var Xa={dehydrated:null,treeContext:null,retryLane:0};function Za(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gd(e,t,r){var n=t.pendingProps,s=Y.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),G(Y,s&1),e===null)return Wa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Si(o,n,0,null),e=dr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Za(r),t.memoizedState=Xa,e):il(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Qm(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Bt(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Bt(l,i):(i=dr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Za(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Xa,n}return i=e.child,e=i.sibling,n=Bt(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function il(e,t){return t=Si({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _s(e,t,r,n){return n!==null&&Wo(n),Jr(t,e.child,null,r),e=il(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qm(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=sa(Error(P(422))),_s(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Si({mode:"visible",children:n.children},s,0,null),i=dr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Jr(t,e.child,null,o),t.child.memoizedState=Za(o),t.memoizedState=Xa,i);if(!(t.mode&1))return _s(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(P(419)),n=sa(i,n,void 0),_s(e,t,o,n)}if(l=(o&e.childLanes)!==0,Se||l){if(n=ce,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_t(e,s),Xe(n,e,s,-1))}return dl(),n=sa(Error(P(421))),_s(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=lp.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Oe=Mt(s.nextSibling),Re=t,J=!0,Je=null,e!==null&&(Ie[Me++]=gt,Ie[Me++]=xt,Ie[Me++]=fr,gt=e.id,xt=e.overflow,fr=t),t=il(t,n.children),t.flags|=4096,t)}function wc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Va(e.return,t,r)}function ia(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Kd(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(ye(e,t,n.children,r),n=Y.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wc(e,r,t);else if(e.tag===19)wc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(G(Y,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&si(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),ia(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&si(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}ia(t,!0,r,null,i);break;case"together":ia(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Is(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),pr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,r=Bt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Bt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Jm(e,t,r){switch(t.tag){case 3:Vd(t),Qr();break;case 5:wd(t);break;case 1:Ce(t.type)&&Xs(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;G(ti,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(G(Y,Y.current&1),t.flags|=128,null):r&t.child.childLanes?Gd(e,t,r):(G(Y,Y.current&1),e=bt(e,t,r),e!==null?e.sibling:null);G(Y,Y.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Kd(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),G(Y,Y.current),n)break;return null;case 22:case 23:return t.lanes=0,Hd(e,t,r)}return bt(e,t,r)}var Qd,eo,Jd,Yd;Qd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};eo=function(){};Jd=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,cr(lt.current);var i=null;switch(r){case"input":s=ba(e,s),n=ba(e,n),i=[];break;case"select":s=Z({},s,{value:void 0}),n=Z({},n,{value:void 0}),i=[];break;case"textarea":s=ka(e,s),n=ka(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Js)}Ea(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ln.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ln.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&K("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Yd=function(e,t,r,n){r!==n&&(t.flags|=4)};function mn(e,t){if(!J)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function pe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ym(e,t,r){var n=t.pendingProps;switch(Ho(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pe(t),null;case 1:return Ce(t.type)&&Ys(),pe(t),null;case 3:return n=t.stateNode,Yr(),Q(Ee),Q(xe),Zo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ys(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Je!==null&&(lo(Je),Je=null))),eo(e,t),pe(t),null;case 5:Xo(t);var s=cr(Gn.current);if(r=t.type,e!==null&&t.stateNode!=null)Jd(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(P(166));return pe(t),null}if(e=cr(lt.current),ys(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[it]=t,n[Wn]=i,e=(t.mode&1)!==0,r){case"dialog":K("cancel",n),K("close",n);break;case"iframe":case"object":case"embed":K("load",n);break;case"video":case"audio":for(s=0;s<wn.length;s++)K(wn[s],n);break;case"source":K("error",n);break;case"img":case"image":case"link":K("error",n),K("load",n);break;case"details":K("toggle",n);break;case"input":Tl(n,i),K("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},K("invalid",n);break;case"textarea":Ol(n,i),K("invalid",n)}Ea(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&vs(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&vs(n.textContent,l,e),s=["children",""+l]):Ln.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&K("scroll",n)}switch(r){case"input":us(n),Pl(n,i,!0);break;case"textarea":us(n),Rl(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Js)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ku(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[it]=t,e[Wn]=n,Qd(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ca(r,n),r){case"dialog":K("cancel",e),K("close",e),s=n;break;case"iframe":case"object":case"embed":K("load",e),s=n;break;case"video":case"audio":for(s=0;s<wn.length;s++)K(wn[s],e);s=n;break;case"source":K("error",e),s=n;break;case"img":case"image":case"link":K("error",e),K("load",e),s=n;break;case"details":K("toggle",e),s=n;break;case"input":Tl(e,n),s=ba(e,n),K("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Z({},n,{value:void 0}),K("invalid",e);break;case"textarea":Ol(e,n),s=ka(e,n),K("invalid",e);break;default:s=n}Ea(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Cu(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Su(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Dn(e,c):typeof c=="number"&&Dn(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ln.hasOwnProperty(i)?c!=null&&i==="onScroll"&&K("scroll",e):c!=null&&To(e,i,c,o))}switch(r){case"input":us(e),Pl(e,n,!1);break;case"textarea":us(e),Rl(e);break;case"option":n.value!=null&&e.setAttribute("value",""+qt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Fr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Fr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Js)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pe(t),null;case 6:if(e&&t.stateNode!=null)Yd(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(P(166));if(r=cr(Gn.current),cr(lt.current),ys(t)){if(n=t.stateNode,r=t.memoizedProps,n[it]=t,(i=n.nodeValue!==r)&&(e=Re,e!==null))switch(e.tag){case 3:vs(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vs(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[it]=t,t.stateNode=n}return pe(t),null;case 13:if(Q(Y),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(J&&Oe!==null&&t.mode&1&&!(t.flags&128))pd(),Qr(),t.flags|=98560,i=!1;else if(i=ys(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(P(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[it]=t}else Qr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pe(t),i=!1}else Je!==null&&(lo(Je),Je=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Y.current&1?oe===0&&(oe=3):dl())),t.updateQueue!==null&&(t.flags|=4),pe(t),null);case 4:return Yr(),eo(e,t),e===null&&qn(t.stateNode.containerInfo),pe(t),null;case 10:return Ko(t.type._context),pe(t),null;case 17:return Ce(t.type)&&Ys(),pe(t),null;case 19:if(Q(Y),i=t.memoizedState,i===null)return pe(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)mn(i,!1);else{if(oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=si(e),o!==null){for(t.flags|=128,mn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return G(Y,Y.current&1|2),t.child}e=e.sibling}i.tail!==null&&re()>Zr&&(t.flags|=128,n=!0,mn(i,!1),t.lanes=4194304)}else{if(!n)if(e=si(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),mn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!J)return pe(t),null}else 2*re()-i.renderingStartTime>Zr&&r!==1073741824&&(t.flags|=128,n=!0,mn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=re(),t.sibling=null,r=Y.current,G(Y,n?r&1|2:r&1),t):(pe(t),null);case 22:case 23:return ul(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Pe&1073741824&&(pe(t),t.subtreeFlags&6&&(t.flags|=8192)):pe(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function Xm(e,t){switch(Ho(t),t.tag){case 1:return Ce(t.type)&&Ys(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yr(),Q(Ee),Q(xe),Zo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xo(t),null;case 13:if(Q(Y),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));Qr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Q(Y),null;case 4:return Yr(),null;case 10:return Ko(t.type._context),null;case 22:case 23:return ul(),null;case 24:return null;default:return null}}var bs=!1,ge=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,L=null;function Ur(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ee(e,t,n)}else r.current=null}function to(e,t,r){try{r()}catch(n){ee(e,t,n)}}var _c=!1;function ep(e,t){if(Ma=Gs,e=rd(),Bo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var y;d!==r||s!==0&&d.nodeType!==3||(l=o+s),d!==i||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)p=d,d=y;for(;;){if(d===e)break t;if(p===r&&++u===s&&(l=o),p===i&&++h===n&&(c=o),(y=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ua={focusedElem:e,selectionRange:r},Gs=!1,L=t;L!==null;)if(t=L,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,L=e;else for(;L!==null;){t=L;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var b=m.memoizedProps,k=m.memoizedState,x=t.stateNode,g=x.getSnapshotBeforeUpdate(t.elementType===t.type?b:Ge(t.type,b),k);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(v){ee(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,L=e;break}L=t.return}return m=_c,_c=!1,m}function Cn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&to(t,r,i)}s=s.next}while(s!==n)}}function Ni(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ro(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Xd(e){var t=e.alternate;t!==null&&(e.alternate=null,Xd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[it],delete t[Wn],delete t[Ba],delete t[Dm],delete t[Im])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zd(e){return e.tag===5||e.tag===3||e.tag===4}function bc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function no(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Js));else if(n!==4&&(e=e.child,e!==null))for(no(e,t,r),e=e.sibling;e!==null;)no(e,t,r),e=e.sibling}function so(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(so(e,t,r),e=e.sibling;e!==null;)so(e,t,r),e=e.sibling}var ue=null,Ke=!1;function kt(e,t,r){for(r=r.child;r!==null;)eh(e,t,r),r=r.sibling}function eh(e,t,r){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(gi,r)}catch{}switch(r.tag){case 5:ge||Ur(r,t);case 6:var n=ue,s=Ke;ue=null,kt(e,t,r),ue=n,Ke=s,ue!==null&&(Ke?(e=ue,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ue.removeChild(r.stateNode));break;case 18:ue!==null&&(Ke?(e=ue,r=r.stateNode,e.nodeType===8?Xi(e.parentNode,r):e.nodeType===1&&Xi(e,r),zn(e)):Xi(ue,r.stateNode));break;case 4:n=ue,s=Ke,ue=r.stateNode.containerInfo,Ke=!0,kt(e,t,r),ue=n,Ke=s;break;case 0:case 11:case 14:case 15:if(!ge&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&to(r,t,o),s=s.next}while(s!==n)}kt(e,t,r);break;case 1:if(!ge&&(Ur(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ee(r,t,l)}kt(e,t,r);break;case 21:kt(e,t,r);break;case 22:r.mode&1?(ge=(n=ge)||r.memoizedState!==null,kt(e,t,r),ge=n):kt(e,t,r);break;default:kt(e,t,r)}}function jc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Zm),t.forEach(function(n){var s=cp.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function We(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ue=l.stateNode,Ke=!1;break e;case 3:ue=l.stateNode.containerInfo,Ke=!0;break e;case 4:ue=l.stateNode.containerInfo,Ke=!0;break e}l=l.return}if(ue===null)throw Error(P(160));eh(i,o,s),ue=null,Ke=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ee(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)th(t,e),t=t.sibling}function th(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(We(t,e),rt(e),n&4){try{Cn(3,e,e.return),Ni(3,e)}catch(b){ee(e,e.return,b)}try{Cn(5,e,e.return)}catch(b){ee(e,e.return,b)}}break;case 1:We(t,e),rt(e),n&512&&r!==null&&Ur(r,r.return);break;case 5:if(We(t,e),rt(e),n&512&&r!==null&&Ur(r,r.return),e.flags&32){var s=e.stateNode;try{Dn(s,"")}catch(b){ee(e,e.return,b)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ju(s,i),Ca(l,o);var u=Ca(l,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Cu(s,d):h==="dangerouslySetInnerHTML"?Su(s,d):h==="children"?Dn(s,d):To(s,h,d,u)}switch(l){case"input":ja(s,i);break;case"textarea":Nu(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Fr(s,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?Fr(s,!!i.multiple,i.defaultValue,!0):Fr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Wn]=i}catch(b){ee(e,e.return,b)}}break;case 6:if(We(t,e),rt(e),n&4){if(e.stateNode===null)throw Error(P(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){ee(e,e.return,b)}}break;case 3:if(We(t,e),rt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{zn(t.containerInfo)}catch(b){ee(e,e.return,b)}break;case 4:We(t,e),rt(e);break;case 13:We(t,e),rt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ll=re())),n&4&&jc(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(ge=(u=ge)||h,We(t,e),ge=u):We(t,e),rt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(L=e,h=e.child;h!==null;){for(d=L=h;L!==null;){switch(p=L,y=p.child,p.tag){case 0:case 11:case 14:case 15:Cn(4,p,p.return);break;case 1:Ur(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(b){ee(n,r,b)}}break;case 5:Ur(p,p.return);break;case 22:if(p.memoizedState!==null){kc(d);continue}}y!==null?(y.return=p,L=y):kc(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Eu("display",o))}catch(b){ee(e,e.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){ee(e,e.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:We(t,e),rt(e),n&4&&jc(e);break;case 21:break;default:We(t,e),rt(e)}}function rt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Zd(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Dn(s,""),n.flags&=-33);var i=bc(e);so(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=bc(e);no(e,l,o);break;default:throw Error(P(161))}}catch(c){ee(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tp(e,t,r){L=e,rh(e)}function rh(e,t,r){for(var n=(e.mode&1)!==0;L!==null;){var s=L,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||bs;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ge;l=bs;var u=ge;if(bs=o,(ge=c)&&!u)for(L=s;L!==null;)o=L,c=o.child,o.tag===22&&o.memoizedState!==null?Sc(s):c!==null?(c.return=o,L=c):Sc(s);for(;i!==null;)L=i,rh(i),i=i.sibling;L=s,bs=l,ge=u}Nc(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,L=i):Nc(e)}}function Nc(e){for(;L!==null;){var t=L;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ge||Ni(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ge)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Ge(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&lc(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}lc(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&zn(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}ge||t.flags&512&&ro(t)}catch(p){ee(t,t.return,p)}}if(t===e){L=null;break}if(r=t.sibling,r!==null){r.return=t.return,L=r;break}L=t.return}}function kc(e){for(;L!==null;){var t=L;if(t===e){L=null;break}var r=t.sibling;if(r!==null){r.return=t.return,L=r;break}L=t.return}}function Sc(e){for(;L!==null;){var t=L;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ni(4,t)}catch(c){ee(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ee(t,s,c)}}var i=t.return;try{ro(t)}catch(c){ee(t,i,c)}break;case 5:var o=t.return;try{ro(t)}catch(c){ee(t,o,c)}}}catch(c){ee(t,t.return,c)}if(t===e){L=null;break}var l=t.sibling;if(l!==null){l.return=t.return,L=l;break}L=t.return}}var rp=Math.ceil,oi=jt.ReactCurrentDispatcher,al=jt.ReactCurrentOwner,ze=jt.ReactCurrentBatchConfig,H=0,ce=null,ne=null,de=0,Pe=0,zr=Kt(0),oe=0,Yn=null,pr=0,ki=0,ol=0,Tn=null,Ne=null,ll=0,Zr=1/0,ft=null,li=!1,io=null,zt=null,js=!1,$t=null,ci=0,Pn=0,ao=null,Ms=-1,Us=0;function we(){return H&6?re():Ms!==-1?Ms:Ms=re()}function Ft(e){return e.mode&1?H&2&&de!==0?de&-de:Um.transition!==null?(Us===0&&(Us=zu()),Us):(e=W,e!==0||(e=window.event,e=e===void 0?16:Gu(e.type)),e):1}function Xe(e,t,r,n){if(50<Pn)throw Pn=0,ao=null,Error(P(185));ts(e,r,n),(!(H&2)||e!==ce)&&(e===ce&&(!(H&2)&&(ki|=r),oe===4&&Ot(e,de)),Te(e,n),r===1&&H===0&&!(t.mode&1)&&(Zr=re()+500,_i&&Qt()))}function Te(e,t){var r=e.callbackNode;Uf(e,t);var n=Vs(e,e===ce?de:0);if(n===0)r!==null&&Ll(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ll(r),t===1)e.tag===0?Mm(Ec.bind(null,e)):hd(Ec.bind(null,e)),$m(function(){!(H&6)&&Qt()}),r=null;else{switch(Fu(n)){case 1:r=$o;break;case 4:r=Mu;break;case 16:r=Ws;break;case 536870912:r=Uu;break;default:r=Ws}r=uh(r,nh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nh(e,t){if(Ms=-1,Us=0,H&6)throw Error(P(327));var r=e.callbackNode;if(Vr()&&e.callbackNode!==r)return null;var n=Vs(e,e===ce?de:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ui(e,n);else{t=n;var s=H;H|=2;var i=ih();(ce!==e||de!==t)&&(ft=null,Zr=re()+500,ur(e,t));do try{ip();break}catch(l){sh(e,l)}while(!0);Go(),oi.current=i,H=s,ne!==null?t=0:(ce=null,de=0,t=oe)}if(t!==0){if(t===2&&(s=Aa(e),s!==0&&(n=s,t=oo(e,s))),t===1)throw r=Yn,ur(e,0),Ot(e,n),Te(e,re()),r;if(t===6)Ot(e,n);else{if(s=e.current.alternate,!(n&30)&&!np(s)&&(t=ui(e,n),t===2&&(i=Aa(e),i!==0&&(n=i,t=oo(e,i))),t===1))throw r=Yn,ur(e,0),Ot(e,n),Te(e,re()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(P(345));case 2:sr(e,Ne,ft);break;case 3:if(Ot(e,n),(n&130023424)===n&&(t=ll+500-re(),10<t)){if(Vs(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){we(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Fa(sr.bind(null,e,Ne,ft),t);break}sr(e,Ne,ft);break;case 4:if(Ot(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Ye(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=re()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*rp(n/1960))-n,10<n){e.timeoutHandle=Fa(sr.bind(null,e,Ne,ft),n);break}sr(e,Ne,ft);break;case 5:sr(e,Ne,ft);break;default:throw Error(P(329))}}}return Te(e,re()),e.callbackNode===r?nh.bind(null,e):null}function oo(e,t){var r=Tn;return e.current.memoizedState.isDehydrated&&(ur(e,t).flags|=256),e=ui(e,t),e!==2&&(t=Ne,Ne=r,t!==null&&lo(t)),e}function lo(e){Ne===null?Ne=e:Ne.push.apply(Ne,e)}function np(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Ze(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ot(e,t){for(t&=~ol,t&=~ki,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ye(t),n=1<<r;e[r]=-1,t&=~n}}function Ec(e){if(H&6)throw Error(P(327));Vr();var t=Vs(e,0);if(!(t&1))return Te(e,re()),null;var r=ui(e,t);if(e.tag!==0&&r===2){var n=Aa(e);n!==0&&(t=n,r=oo(e,n))}if(r===1)throw r=Yn,ur(e,0),Ot(e,t),Te(e,re()),r;if(r===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sr(e,Ne,ft),Te(e,re()),null}function cl(e,t){var r=H;H|=1;try{return e(t)}finally{H=r,H===0&&(Zr=re()+500,_i&&Qt())}}function gr(e){$t!==null&&$t.tag===0&&!(H&6)&&Vr();var t=H;H|=1;var r=ze.transition,n=W;try{if(ze.transition=null,W=1,e)return e()}finally{W=n,ze.transition=r,H=t,!(H&6)&&Qt()}}function ul(){Pe=zr.current,Q(zr)}function ur(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Am(r)),ne!==null)for(r=ne.return;r!==null;){var n=r;switch(Ho(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ys();break;case 3:Yr(),Q(Ee),Q(xe),Zo();break;case 5:Xo(n);break;case 4:Yr();break;case 13:Q(Y);break;case 19:Q(Y);break;case 10:Ko(n.type._context);break;case 22:case 23:ul()}r=r.return}if(ce=e,ne=e=Bt(e.current,null),de=Pe=t,oe=0,Yn=null,ol=ki=pr=0,Ne=Tn=null,lr!==null){for(t=0;t<lr.length;t++)if(r=lr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}lr=null}return e}function sh(e,t){do{var r=ne;try{if(Go(),Ls.current=ai,ii){for(var n=X.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ii=!1}if(mr=0,le=ae=X=null,En=!1,Kn=0,al.current=null,r===null||r.return===null){oe=1,Yn=t,ne=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=de,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=mc(o);if(y!==null){y.flags&=-257,pc(y,o,l,i,t),y.mode&1&&fc(i,u,t),t=y,c=u;var m=t.updateQueue;if(m===null){var b=new Set;b.add(c),t.updateQueue=b}else m.add(c);break e}else{if(!(t&1)){fc(i,u,t),dl();break e}c=Error(P(426))}}else if(J&&l.mode&1){var k=mc(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),pc(k,o,l,i,t),Wo(Xr(c,l));break e}}i=c=Xr(c,l),oe!==4&&(oe=2),Tn===null?Tn=[i]:Tn.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=Fd(i,c,t);oc(i,x);break e;case 1:l=c;var g=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(zt===null||!zt.has(f)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=Bd(i,l,t);oc(i,v);break e}}i=i.return}while(i!==null)}oh(r)}catch(w){t=w,ne===r&&r!==null&&(ne=r=r.return);continue}break}while(!0)}function ih(){var e=oi.current;return oi.current=ai,e===null?ai:e}function dl(){(oe===0||oe===3||oe===2)&&(oe=4),ce===null||!(pr&268435455)&&!(ki&268435455)||Ot(ce,de)}function ui(e,t){var r=H;H|=2;var n=ih();(ce!==e||de!==t)&&(ft=null,ur(e,t));do try{sp();break}catch(s){sh(e,s)}while(!0);if(Go(),H=r,oi.current=n,ne!==null)throw Error(P(261));return ce=null,de=0,oe}function sp(){for(;ne!==null;)ah(ne)}function ip(){for(;ne!==null&&!Pf();)ah(ne)}function ah(e){var t=ch(e.alternate,e,Pe);e.memoizedProps=e.pendingProps,t===null?oh(e):ne=t,al.current=null}function oh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Xm(r,t),r!==null){r.flags&=32767,ne=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oe=6,ne=null;return}}else if(r=Ym(r,t,Pe),r!==null){ne=r;return}if(t=t.sibling,t!==null){ne=t;return}ne=t=e}while(t!==null);oe===0&&(oe=5)}function sr(e,t,r){var n=W,s=ze.transition;try{ze.transition=null,W=1,ap(e,t,r,n)}finally{ze.transition=s,W=n}return null}function ap(e,t,r,n){do Vr();while($t!==null);if(H&6)throw Error(P(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(zf(e,i),e===ce&&(ne=ce=null,de=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||js||(js=!0,uh(Ws,function(){return Vr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ze.transition,ze.transition=null;var o=W;W=1;var l=H;H|=4,al.current=null,ep(e,r),th(r,e),Sm(Ua),Gs=!!Ma,Ua=Ma=null,e.current=r,tp(r),Of(),H=l,W=o,ze.transition=i}else e.current=r;if(js&&(js=!1,$t=e,ci=s),i=e.pendingLanes,i===0&&(zt=null),$f(r.stateNode),Te(e,re()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(li)throw li=!1,e=io,io=null,e;return ci&1&&e.tag!==0&&Vr(),i=e.pendingLanes,i&1?e===ao?Pn++:(Pn=0,ao=e):Pn=0,Qt(),null}function Vr(){if($t!==null){var e=Fu(ci),t=ze.transition,r=W;try{if(ze.transition=null,W=16>e?16:e,$t===null)var n=!1;else{if(e=$t,$t=null,ci=0,H&6)throw Error(P(331));var s=H;for(H|=4,L=e.current;L!==null;){var i=L,o=i.child;if(L.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(L=u;L!==null;){var h=L;switch(h.tag){case 0:case 11:case 15:Cn(8,h,i)}var d=h.child;if(d!==null)d.return=h,L=d;else for(;L!==null;){h=L;var p=h.sibling,y=h.return;if(Xd(h),h===u){L=null;break}if(p!==null){p.return=y,L=p;break}L=y}}}var m=i.alternate;if(m!==null){var b=m.child;if(b!==null){m.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}L=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,L=o;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Cn(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,L=x;break e}L=i.return}}var g=e.current;for(L=g;L!==null;){o=L;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,L=f;else e:for(o=g;L!==null;){if(l=L,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ni(9,l)}}catch(w){ee(l,l.return,w)}if(l===o){L=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,L=v;break e}L=l.return}}if(H=s,Qt(),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(gi,e)}catch{}n=!0}return n}finally{W=r,ze.transition=t}}return!1}function Cc(e,t,r){t=Xr(r,t),t=Fd(e,t,1),e=Ut(e,t,1),t=we(),e!==null&&(ts(e,1,t),Te(e,t))}function ee(e,t,r){if(e.tag===3)Cc(e,e,r);else for(;t!==null;){if(t.tag===3){Cc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(zt===null||!zt.has(n))){e=Xr(r,e),e=Bd(t,e,1),t=Ut(t,e,1),e=we(),t!==null&&(ts(t,1,e),Te(t,e));break}}t=t.return}}function op(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=we(),e.pingedLanes|=e.suspendedLanes&r,ce===e&&(de&r)===r&&(oe===4||oe===3&&(de&130023424)===de&&500>re()-ll?ur(e,0):ol|=r),Te(e,t)}function lh(e,t){t===0&&(e.mode&1?(t=fs,fs<<=1,!(fs&130023424)&&(fs=4194304)):t=1);var r=we();e=_t(e,t),e!==null&&(ts(e,t,r),Te(e,r))}function lp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),lh(e,r)}function cp(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(t),lh(e,r)}var ch;ch=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ee.current)Se=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Se=!1,Jm(e,t,r);Se=!!(e.flags&131072)}else Se=!1,J&&t.flags&1048576&&fd(t,ei,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Is(e,t),e=t.pendingProps;var s=Kr(t,xe.current);Wr(t,r),s=tl(null,t,n,e,s,r);var i=rl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ce(n)?(i=!0,Xs(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jo(t),s.updater=ji,t.stateNode=s,s._reactInternals=t,Ka(t,n,e,r),t=Ya(null,t,n,!0,i,r)):(t.tag=0,J&&i&&qo(t),ye(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Is(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=dp(n),e=Ge(n,e),s){case 0:t=Ja(null,t,n,e,r);break e;case 1:t=vc(null,t,n,e,r);break e;case 11:t=gc(null,t,n,e,r);break e;case 14:t=xc(null,t,n,Ge(n.type,e),r);break e}throw Error(P(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ge(n,s),Ja(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ge(n,s),vc(e,t,n,s,r);case 3:e:{if(Vd(t),e===null)throw Error(P(387));n=t.pendingProps,i=t.memoizedState,s=i.element,yd(e,t),ni(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Xr(Error(P(423)),t),t=yc(e,t,n,r,s);break e}else if(n!==s){s=Xr(Error(P(424)),t),t=yc(e,t,n,r,s);break e}else for(Oe=Mt(t.stateNode.containerInfo.firstChild),Re=t,J=!0,Je=null,r=xd(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Qr(),n===s){t=bt(e,t,r);break e}ye(e,t,n,r)}t=t.child}return t;case 5:return wd(t),e===null&&Wa(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,za(n,s)?o=null:i!==null&&za(n,i)&&(t.flags|=32),Wd(e,t),ye(e,t,o,r),t.child;case 6:return e===null&&Wa(t),null;case 13:return Gd(e,t,r);case 4:return Yo(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Jr(t,null,n,r):ye(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ge(n,s),gc(e,t,n,s,r);case 7:return ye(e,t,t.pendingProps,r),t.child;case 8:return ye(e,t,t.pendingProps.children,r),t.child;case 12:return ye(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,G(ti,n._currentValue),n._currentValue=o,i!==null)if(Ze(i.value,o)){if(i.children===s.children&&!Ee.current){t=bt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=vt(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Va(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(P(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Va(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ye(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Wr(t,r),s=Be(s),n=n(s),t.flags|=1,ye(e,t,n,r),t.child;case 14:return n=t.type,s=Ge(n,t.pendingProps),s=Ge(n.type,s),xc(e,t,n,s,r);case 15:return qd(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ge(n,s),Is(e,t),t.tag=1,Ce(n)?(e=!0,Xs(t)):e=!1,Wr(t,r),zd(t,n,s),Ka(t,n,s,r),Ya(null,t,n,!0,e,r);case 19:return Kd(e,t,r);case 22:return Hd(e,t,r)}throw Error(P(156,t.tag))};function uh(e,t){return Iu(e,t)}function up(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ue(e,t,r,n){return new up(e,t,r,n)}function hl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dp(e){if(typeof e=="function")return hl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oo)return 11;if(e===Ro)return 14}return 2}function Bt(e,t){var r=e.alternate;return r===null?(r=Ue(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function zs(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")hl(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Pr:return dr(r.children,s,i,t);case Po:o=8,s|=8;break;case va:return e=Ue(12,r,t,s|2),e.elementType=va,e.lanes=i,e;case ya:return e=Ue(13,r,t,s),e.elementType=ya,e.lanes=i,e;case wa:return e=Ue(19,r,t,s),e.elementType=wa,e.lanes=i,e;case wu:return Si(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vu:o=10;break e;case yu:o=9;break e;case Oo:o=11;break e;case Ro:o=14;break e;case Ct:o=16,n=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=Ue(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function dr(e,t,r,n){return e=Ue(7,e,n,t),e.lanes=r,e}function Si(e,t,r,n){return e=Ue(22,e,n,t),e.elementType=wu,e.lanes=r,e.stateNode={isHidden:!1},e}function aa(e,t,r){return e=Ue(6,e,null,t),e.lanes=r,e}function oa(e,t,r){return t=Ue(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hp(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fi(0),this.expirationTimes=Fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function fl(e,t,r,n,s,i,o,l,c){return e=new hp(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ue(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jo(i),e}function fp(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function dh(e){if(!e)return Ht;e=e._reactInternals;e:{if(yr(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ce(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var r=e.type;if(Ce(r))return dd(e,r,t)}return t}function hh(e,t,r,n,s,i,o,l,c){return e=fl(r,n,!0,e,s,i,o,l,c),e.context=dh(null),r=e.current,n=we(),s=Ft(r),i=vt(n,s),i.callback=t??null,Ut(r,i,s),e.current.lanes=s,ts(e,s,n),Te(e,n),e}function Ei(e,t,r,n){var s=t.current,i=we(),o=Ft(s);return r=dh(r),t.context===null?t.context=r:t.pendingContext=r,t=vt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ut(s,t,o),e!==null&&(Xe(e,s,o,i),$s(e,s,o)),o}function di(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Tc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ml(e,t){Tc(e,t),(e=e.alternate)&&Tc(e,t)}function mp(){return null}var fh=typeof reportError=="function"?reportError:function(e){console.error(e)};function pl(e){this._internalRoot=e}Ci.prototype.render=pl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));Ei(e,t,null,null)};Ci.prototype.unmount=pl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gr(function(){Ei(null,e,null,null)}),t[wt]=null}};function Ci(e){this._internalRoot=e}Ci.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Pt.length&&t!==0&&t<Pt[r].priority;r++);Pt.splice(r,0,e),r===0&&Vu(e)}};function gl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ti(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pc(){}function pp(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=di(o);i.call(u)}}var o=hh(t,n,e,0,null,!1,!1,"",Pc);return e._reactRootContainer=o,e[wt]=o.current,qn(e.nodeType===8?e.parentNode:e),gr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=di(c);l.call(u)}}var c=fl(e,0,!1,null,null,!1,!1,"",Pc);return e._reactRootContainer=c,e[wt]=c.current,qn(e.nodeType===8?e.parentNode:e),gr(function(){Ei(t,c,r,n)}),c}function Pi(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=di(o);l.call(c)}}Ei(t,o,e,s)}else o=pp(r,t,e,s,n);return di(o)}Bu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=yn(t.pendingLanes);r!==0&&(Lo(t,r|1),Te(t,re()),!(H&6)&&(Zr=re()+500,Qt()))}break;case 13:gr(function(){var n=_t(e,1);if(n!==null){var s=we();Xe(n,e,1,s)}}),ml(e,1)}};Do=function(e){if(e.tag===13){var t=_t(e,134217728);if(t!==null){var r=we();Xe(t,e,134217728,r)}ml(e,134217728)}};qu=function(e){if(e.tag===13){var t=Ft(e),r=_t(e,t);if(r!==null){var n=we();Xe(r,e,t,n)}ml(e,t)}};Hu=function(){return W};Wu=function(e,t){var r=W;try{return W=e,t()}finally{W=r}};Pa=function(e,t,r){switch(t){case"input":if(ja(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=wi(n);if(!s)throw Error(P(90));bu(n),ja(n,s)}}}break;case"textarea":Nu(e,r);break;case"select":t=r.value,t!=null&&Fr(e,!!r.multiple,t,!1)}};Ou=cl;Ru=gr;var gp={usingClientEntryPoint:!1,Events:[ns,$r,wi,Tu,Pu,cl]},pn={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xp={bundleType:pn.bundleType,version:pn.version,rendererPackageName:pn.rendererPackageName,rendererConfig:pn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Lu(e),e===null?null:e.stateNode},findFiberByHostInstance:pn.findFiberByHostInstance||mp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ns=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ns.isDisabled&&Ns.supportsFiber)try{gi=Ns.inject(xp),ot=Ns}catch{}}$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gp;$e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gl(t))throw Error(P(200));return fp(e,t,null,r)};$e.createRoot=function(e,t){if(!gl(e))throw Error(P(299));var r=!1,n="",s=fh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=fl(e,1,!1,null,null,r,!1,n,s),e[wt]=t.current,qn(e.nodeType===8?e.parentNode:e),new pl(t)};$e.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=Lu(t),e=e===null?null:e.stateNode,e};$e.flushSync=function(e){return gr(e)};$e.hydrate=function(e,t,r){if(!Ti(t))throw Error(P(200));return Pi(null,e,t,!0,r)};$e.hydrateRoot=function(e,t,r){if(!gl(e))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=fh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=hh(t,null,e,1,r??null,s,!1,i,o),e[wt]=t.current,qn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Ci(t)};$e.render=function(e,t,r){if(!Ti(t))throw Error(P(200));return Pi(null,e,t,!1,r)};$e.unmountComponentAtNode=function(e){if(!Ti(e))throw Error(P(40));return e._reactRootContainer?(gr(function(){Pi(null,null,e,!1,function(){e._reactRootContainer=null,e[wt]=null})}),!0):!1};$e.unstable_batchedUpdates=cl;$e.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ti(r))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return Pi(e,t,r,!1,n)};$e.version="18.3.1-next-f1338f8080-20240426";function mh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mh)}catch(e){console.error(e)}}mh(),mu.exports=$e;var vp=mu.exports,ph,Oc=vp;ph=Oc.createRoot,Oc.hydrateRoot;const yp="modulepreload",wp=function(e){return"/"+e},Rc={},is=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=wp(c),c in Rc)return;Rc[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":yp,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((p,y)=>{d.addEventListener("load",p),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},_p=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>is(async()=>{const{default:n}=await Promise.resolve().then(()=>sn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class xl extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class bp extends xl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ac extends xl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class $c extends xl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var co;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(co||(co={}));var jp=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(d){o(d)}}function c(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Np{constructor(t,{headers:r={},customFetch:n,region:s=co.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=_p(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return jp(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let h;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(l["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(l["Content-Type"]="application/json",h=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:h}).catch(b=>{throw new bp(b)}),p=d.headers.get("x-relay-error");if(p&&p==="true")throw new Ac(d);if(!d.ok)throw new $c(d);let y=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return y==="application/json"?m=yield d.json():y==="application/octet-stream"?m=yield d.blob():y==="text/event-stream"?m=d:y==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof $c||s instanceof Ac?s.context:void 0}}})}}var ke={},vl={},Oi={},as={},Ri={},Ai={},kp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},en=kp();const Sp=en.fetch,gh=en.fetch.bind(en),xh=en.Headers,Ep=en.Request,Cp=en.Response,sn=Object.freeze(Object.defineProperty({__proto__:null,Headers:xh,Request:Ep,Response:Cp,default:gh,fetch:Sp},Symbol.toStringTag,{value:"Module"})),Tp=Wh(sn);var $i={};Object.defineProperty($i,"__esModule",{value:!0});let Pp=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};$i.default=Pp;var vh=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ai,"__esModule",{value:!0});const Op=vh(Tp),Rp=vh($i);let Ap=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Op.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let h=null,d=null,p=null,y=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?d=g:d=JSON.parse(g))}const k=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");k&&x&&x.length>1&&(p=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(h={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,p=null,y=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const k=await i.text();try{h=JSON.parse(k),Array.isArray(h)&&i.status===404&&(d=[],h=null,y=200,m="OK")}catch{i.status===404&&k===""?(y=204,m="No Content"):h={message:k}}if(h&&this.isMaybeSingle&&(!((u=h==null?void 0:h.details)===null||u===void 0)&&u.includes("0 rows"))&&(h=null,y=200,m="OK"),h&&this.shouldThrowOnError)throw new Rp.default(h)}return{error:h,data:d,count:p,status:y,statusText:m}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Ai.default=Ap;var $p=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ri,"__esModule",{value:!0});const Lp=$p(Ai);let Dp=class extends Lp.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Ri.default=Dp;var Ip=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(as,"__esModule",{value:!0});const Mp=Ip(Ri);let Up=class extends Mp.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};as.default=Up;var zp=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oi,"__esModule",{value:!0});const gn=zp(as);let Fp=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new gn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new gn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new gn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new gn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new gn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Oi.default=Fp;var yh=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vl,"__esModule",{value:!0});const Bp=yh(Oi),qp=yh(as);let Hp=class wh{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new Bp.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new wh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{c.searchParams.append(d,p)})):(l="POST",u=r);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new qp.default({method:l,url:c,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};vl.default=Hp;var an=Fe&&Fe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ke,"__esModule",{value:!0});ke.PostgrestError=ke.PostgrestBuilder=ke.PostgrestTransformBuilder=ke.PostgrestFilterBuilder=ke.PostgrestQueryBuilder=ke.PostgrestClient=void 0;const _h=an(vl);ke.PostgrestClient=_h.default;const bh=an(Oi);ke.PostgrestQueryBuilder=bh.default;const jh=an(as);ke.PostgrestFilterBuilder=jh.default;const Nh=an(Ri);ke.PostgrestTransformBuilder=Nh.default;const kh=an(Ai);ke.PostgrestBuilder=kh.default;const Sh=an($i);ke.PostgrestError=Sh.default;var Wp=ke.default={PostgrestClient:_h.default,PostgrestQueryBuilder:bh.default,PostgrestFilterBuilder:jh.default,PostgrestTransformBuilder:Nh.default,PostgrestBuilder:kh.default,PostgrestError:Sh.default};const{PostgrestClient:Vp,PostgrestQueryBuilder:Px,PostgrestFilterBuilder:Ox,PostgrestTransformBuilder:Rx,PostgrestBuilder:Ax,PostgrestError:$x}=Wp;class Gp{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Kp="2.15.5",Qp=`realtime-js/${Kp}`,Jp="1.0.0",uo=1e4,Yp=1e3,Xp=100;var On;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(On||(On={}));var se;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(se||(se={}));var Qe;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Qe||(Qe={}));var ho;(function(e){e.websocket="websocket"})(ho||(ho={}));var ar;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ar||(ar={}));class Zp{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Eh{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var V;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(V||(V={}));const Lc=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=e0(o,e,t,s),i),{})},e0=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?Ch(i,o):fo(o)},Ch=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return s0(t,r)}switch(e){case V.bool:return t0(t);case V.float4:case V.float8:case V.int2:case V.int4:case V.int8:case V.numeric:case V.oid:return r0(t);case V.json:case V.jsonb:return n0(t);case V.timestamp:return i0(t);case V.abstime:case V.date:case V.daterange:case V.int4range:case V.int8range:case V.money:case V.reltime:case V.text:case V.time:case V.timestamptz:case V.timetz:case V.tsrange:case V.tstzrange:return fo(t);default:return fo(t)}},fo=e=>e,t0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},r0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},n0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},s0=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Ch(t,l))}return e},i0=e=>typeof e=="string"?e.replace(" ","T"):e,Th=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class la{constructor(t,r,n={},s=uo){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Dc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Dc||(Dc={}));class Rn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Rn.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Rn.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const d=i[u];if(d){const p=h.map(k=>k.presence_ref),y=d.map(k=>k.presence_ref),m=h.filter(k=>y.indexOf(k.presence_ref)<0),b=d.filter(k=>p.indexOf(k.presence_ref)<0);m.length>0&&(l[u]=m),b.length>0&&(c[u]=b)}else l[u]=h}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const d=t[l].map(y=>y.presence_ref),p=h.filter(y=>d.indexOf(y.presence_ref)<0);t[l].unshift(...p)}n(l,h,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ic;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ic||(Ic={}));var An;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(An||(An={}));var mt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(mt||(mt={}));class yl{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new la(this,Qe.join,this.params,this.timeout),this.rejoinTimer=new Eh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=se.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qe.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Rn(this),this.broadcastEndpointURL=Th(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==se.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[An.PRESENCE]&&this.bindings[An.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(mt.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(mt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var m;if(this.socket.setAuth(),y===void 0){t==null||t(mt.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,k=(m=b==null?void 0:b.length)!==null&&m!==void 0?m:0,x=[];for(let g=0;g<k;g++){const f=b[g],{filter:{event:v,schema:w,table:_,filter:j}}=f,T=y&&y[g];if(T&&T.event===v&&T.schema===w&&T.table===_&&T.filter===j)x.push(Object.assign(Object.assign({},f),{id:T.id}));else{this.unsubscribe(),this.state=se.errored,t==null||t(mt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(mt.SUBSCRIBED);return}}).receive("error",y=>{this.state=se.errored,t==null||t(mt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(mt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===se.joined&&t===An.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=se.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qe.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new la(this,Qe.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=se.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new la(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Xp){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=Qe;if(n&&[l,c,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let p=this._onMessage(o,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var m,b,k;return((m=y.filter)===null||m===void 0?void 0:m.event)==="*"||((k=(b=y.filter)===null||b===void 0?void 0:b.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(y=>y.callback(p,n)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var m,b,k,x,g,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const v=y.id,w=(m=y.filter)===null||m===void 0?void 0:m.event;return v&&((b=r.ids)===null||b===void 0?void 0:b.includes(v))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const v=(g=(x=y==null?void 0:y.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return v==="*"||v===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof p=="object"&&"ids"in p){const m=p.data,{schema:b,table:k,commit_timestamp:x,type:g,errors:f}=m;p=Object.assign(Object.assign({},{schema:b,table:k,commit_timestamp:x,eventType:g,new:{},old:{},errors:f}),this._getPayloadRecords(m))}y.callback(p,n)})}_isClosed(){return this.state===se.closed}_isJoined(){return this.state===se.joined}_isJoining(){return this.state===se.joining}_isLeaving(){return this.state===se.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&yl.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Qe.close,{},t)}_onError(t){this._on(Qe.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Lc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Lc(t.columns,t.old_record)),r}}const ca=()=>{},ks={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},a0=[1e3,2e3,5e3,1e4],o0=1e4,l0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class c0{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=uo,this.transport=null,this.heartbeatIntervalMs=ks.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ca,this.ref=0,this.reconnectTimer=null,this.logger=ca,this.conn=null,this.sendBuffer=[],this.serializer=new Zp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>is(async()=>{const{default:l}=await Promise.resolve().then(()=>sn);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${ho.websocket}`,this.httpEndpoint=Th(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gp.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Jp}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case On.connecting:return ar.Connecting;case On.open:return ar.Open;case On.closing:return ar.Closing;default:return ar.Closed}}isConnected(){return this.connectionState()===ar.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new yl(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Yp,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ks.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Qe.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([l0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Qp};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Qe.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Eh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ks.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,h;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:uo,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:ks.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:ca,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:d=>a0[d-1]||o0,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(d,p)=>p(JSON.stringify(d)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class wl extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ie(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class u0 extends wl{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mo extends wl{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var d0=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(d){o(d)}}function c(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ph=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>is(async()=>{const{default:n}=await Promise.resolve().then(()=>sn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},h0=()=>d0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield is(()=>Promise.resolve().then(()=>sn),void 0)).Response:Response}),po=e=>{if(Array.isArray(e))return e.map(r=>po(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=po(n)}),t},f0=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var wr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(d){o(d)}}function c(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const ua=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),m0=(e,t,r)=>wr(void 0,void 0,void 0,function*(){const n=yield h0();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new u0(ua(s),i,o))}).catch(s=>{t(new mo(ua(s),s))}):t(new mo(ua(e),e))}),p0=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(f0(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function os(e,t,r,n,s,i){return wr(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,p0(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>m0(c,l,n))})})}function hi(e,t,r,n){return wr(this,void 0,void 0,function*(){return os(e,"GET",t,r,n)})}function st(e,t,r,n,s){return wr(this,void 0,void 0,function*(){return os(e,"POST",t,n,s,r)})}function go(e,t,r,n,s){return wr(this,void 0,void 0,function*(){return os(e,"PUT",t,n,s,r)})}function g0(e,t,r,n){return wr(this,void 0,void 0,function*(){return os(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Oh(e,t,r,n,s){return wr(this,void 0,void 0,function*(){return os(e,"DELETE",t,n,s,r)})}var ve=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(d){o(d)}}function c(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const x0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class v0{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Ph(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return ve(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Mc),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),d=yield(t=="PUT"?go:st)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ie(i))return{data:null,error:i};throw i}})}upload(t,r,n){return ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ve(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Mc.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const d=yield go(this.fetch,l.toString(),c,{headers:h});return{data:{path:i,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ie(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ve(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield st(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new wl("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}update(t,r,n){return ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ve(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ve(this,void 0,void 0,function*(){try{return{data:{path:(yield st(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ve(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield st(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ve(this,void 0,void 0,function*(){try{const s=yield st(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}download(t,r){return ve(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield hi(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ie(l))return{data:null,error:l};throw l}})}info(t){return ve(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield hi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:po(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}exists(t){return ve(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield g0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n)&&n instanceof mo){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return ve(this,void 0,void 0,function*(){try{return{data:yield Oh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}list(t,r,n){return ve(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},x0),r),{prefix:t||""});return{data:yield st(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ie(s))return{data:null,error:s};throw s}})}listV2(t,r){return ve(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield st(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const y0="2.12.1",w0={"X-Client-Info":`storage-js/${y0}`};var br=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(d){o(d)}}function c(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class _0{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},w0),r),this.fetch=Ph(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return br(this,void 0,void 0,function*(){try{return{data:yield hi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ie(t))return{data:null,error:t};throw t}})}getBucket(t){return br(this,void 0,void 0,function*(){try{return{data:yield hi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return br(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return br(this,void 0,void 0,function*(){try{return{data:yield go(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ie(n))return{data:null,error:n};throw n}})}emptyBucket(t){return br(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}deleteBucket(t){return br(this,void 0,void 0,function*(){try{return{data:yield Oh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ie(r))return{data:null,error:r};throw r}})}}class b0 extends _0{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new v0(this.url,this.headers,t,this.fetch)}}const j0="2.57.4";let _n="";typeof Deno<"u"?_n="deno":typeof document<"u"?_n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_n="react-native":_n="node";const N0={"X-Client-Info":`supabase-js-${_n}/${j0}`},k0={headers:N0},S0={schema:"public"},E0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},C0={};var T0=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(d){o(d)}}function c(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const P0=e=>{let t;return e?t=e:typeof fetch>"u"?t=gh:t=fetch,(...r)=>t(...r)},O0=()=>typeof Headers>"u"?xh:Headers,R0=(e,t,r)=>{const n=P0(r),s=O0();return(i,o)=>T0(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var A0=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(d){o(d)}}function c(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function $0(e){return e.endsWith("/")?e:e+"/"}function L0(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:h,global:d}=t,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>A0(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function D0(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($0(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Rh="2.71.1",Er=30*1e3,xo=3,da=xo*Er,I0="http://localhost:9999",M0="supabase.auth.token",U0={"X-Client-Info":`gotrue-js/${Rh}`},vo="X-Supabase-Api-Version",Ah={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},z0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,F0=10*60*1e3;class _l extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function M(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class B0 extends _l{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function q0(e){return M(e)&&e.name==="AuthApiError"}class $h extends _l{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Jt extends _l{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Et extends Jt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function H0(e){return M(e)&&e.name==="AuthSessionMissingError"}class Ss extends Jt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Es extends Jt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Cs extends Jt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function W0(e){return M(e)&&e.name==="AuthImplicitGrantRedirectError"}class Uc extends Jt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yo extends Jt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ha(e){return M(e)&&e.name==="AuthRetryableFetchError"}class zc extends Jt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class wo extends Jt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const fi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fc=` 	
\r=`.split(""),V0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Fc.length;t+=1)e[Fc[t].charCodeAt(0)]=-2;for(let t=0;t<fi.length;t+=1)e[fi[t].charCodeAt(0)]=t;return e})();function Bc(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(fi[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(fi[n]),t.queuedBits-=6}}function Lh(e,t,r){const n=V0[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qc(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Q0(o,n,r)};for(let o=0;o<e.length;o+=1)Lh(e.charCodeAt(o),s,i);return t.join("")}function G0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function K0(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}G0(n,t)}}function Q0(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function J0(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Lh(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Y0(e){const t=[];return K0(e,r=>t.push(r)),new Uint8Array(t)}function X0(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Bc(s,r,n)),Bc(null,r,n),t.join("")}function Z0(e){return Math.round(Date.now()/1e3)+e}function eg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ve=()=>typeof window<"u"&&typeof document<"u",tr={tested:!1,writable:!1},Dh=()=>{if(!Ve())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tr.tested)return tr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tr.tested=!0,tr.writable=!0}catch{tr.tested=!0,tr.writable=!1}return tr.writable};function tg(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Ih=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>is(async()=>{const{default:n}=await Promise.resolve().then(()=>sn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},rg=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Cr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},rr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},St=async(e,t)=>{await e.removeItem(t)};class Li{constructor(){this.promise=new Li.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Li.promiseConstructor=Promise;function fa(e){const t=e.split(".");if(t.length!==3)throw new wo("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!z0.test(t[n]))throw new wo("JWT not in base64url format");return{header:JSON.parse(qc(t[0])),payload:JSON.parse(qc(t[1])),signature:J0(t[2]),raw:{header:t[0],payload:t[1]}}}async function ng(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function sg(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function ig(e){return("0"+e.toString(16)).substr(-2)}function ag(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,ig).join("")}async function og(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function lg(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await og(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jr(e,t,r=!1){const n=ag();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Cr(e,`${t}-code-verifier`,s);const i=await lg(n);return[i,n===i?"plain":"s256"]}const cg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ug(e){const t=e.headers.get(vo);if(!t||!t.match(cg))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function dg(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function hg(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nr(e){if(!fg.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ma(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Hc(e){return JSON.parse(JSON.stringify(e))}var mg=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const ir=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pg=[502,503,504];async function Wc(e){var t;if(!rg(e))throw new yo(ir(e),0);if(pg.includes(e.status))throw new yo(ir(e),e.status);let r;try{r=await e.json()}catch(i){throw new $h(ir(i),i)}let n;const s=ug(e);if(s&&s.getTime()>=Ah["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new zc(ir(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Et}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new zc(ir(r),e.status,r.weak_password.reasons);throw new B0(ir(r),e.status||500,n)}const gg=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function z(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[vo]||(i[vo]=Ah["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await xg(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function xg(e,t,r,n,s,i){const o=gg(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new yo(ir(c),0)}if(l.ok||await Wc(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Wc(c)}}function ht(e){var t;let r=null;_g(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Z0(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Vc(e){const t=ht(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Rt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function vg(e){return{data:e,error:null}}function yg(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=mg(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function wg(e){return e}function _g(e){return e.access_token&&e.refresh_token&&e.expires_in}const pa=["global","local","others"];var bg=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class jg{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Ih(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=pa[0]){if(pa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pa.join(", ")}`);try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Rt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=bg(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:yg,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(M(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Rt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:wg});if(h.error)throw h.error;const d=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(m=>{const b=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(m.split(";")[1].split("=")[1]);u[`${k}Page`]=b}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(M(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Nr(t);try{return await z(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Rt})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Nr(t);try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Rt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Nr(t);try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Rt})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Nr(t.userId);try{const{data:r,error:n}=await z(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(M(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Nr(t.userId),Nr(t.id);try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}}function Gc(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Ng(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const kr={debug:!!(globalThis&&Dh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Mh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class kg extends Mh{}async function Sg(e,t,r){kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),kr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new kg(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(kr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Ng();const Eg={url:I0,storageKey:M0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:U0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Kc(e,t,r){return await r()}const Sr={};class Xn{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Xn.nextInstanceID,Xn.nextInstanceID+=1,this.instanceID>0&&Ve()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Eg),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new jg({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ih(s.fetch),this.lock=s.lock||Kc,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ve()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Sg:this.lock=Kc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Dh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gc(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Gc(this.memoryStorage)),Ve()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Sr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Sr[this.storageKey]=Object.assign(Object.assign({},Sr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Sr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Sr[this.storageKey]=Object.assign(Object.assign({},Sr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Rh}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=tg(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ve()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),W0(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return M(r)?{error:r}:{error:new $h("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:ht}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(M(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:h,password:d,options:p}=t;let y=null,m=null;this.flowType==="pkce"&&([y,m]=await jr(this.storage,this.storageKey)),i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:d,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:y,code_challenge_method:m},xform:ht})}else if("phone"in t){const{phone:h,password:d,options:p}=t;i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:ht})}else throw new Es("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(M(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Vc})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Vc})}else throw new Es("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ss}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(M(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,l,c,u,h,d,p,y;let m,b;if("message"in t)m=t.message,b=t.signature;else{const{chain:k,wallet:x,statement:g,options:f}=t;let v;if(Ve())if(typeof x=="object")v=x;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))v=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=x}const w=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in v&&v.signIn){const _=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),g?{statement:g}:null));let j;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")j=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)j=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)m=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),b=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${w.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(s=(n=f==null?void 0:f.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((u=f==null?void 0:f.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((d=(h=f==null?void 0:f.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...f.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const _=await v.signMessage(new TextEncoder().encode(m),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=_}}try{const{data:k,error:x}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:X0(b)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:ht});if(x)throw x;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new Ss}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:x})}catch(k){if(M(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(t){const r=await rr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ht});if(await St(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ss}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(M(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ht}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ss}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(M(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await jr(this.storage,this.storageKey));const{error:d}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new Es("You must provide either an email or phone number.")}catch(l){if(M(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ht});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(M(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await jr(this.storage,this.storageKey)),await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:vg})}catch(i){if(M(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Et;const{error:s}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await z(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await z(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Es("You must provide either an email or phone number and a type")}catch(r){if(M(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await rr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<da:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await rr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=ma()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,h)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,h))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Rt}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Et}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Rt})})}catch(r){if(M(r))return H0(r)&&(await this._removeSession(),await St(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Et;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await jr(this.storage,this.storageKey));const{data:u,error:h}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Rt});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(M(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Et;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=fa(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(M(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Et;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(M(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ve())throw new Cs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Cs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Uc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Uc("No code detected.");const{data:g,error:f}=await this._exchangeCodeForSession(t.code);if(f)throw f;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Cs("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(l);let p=h+d;c&&(p=parseInt(c));const y=p-h;y*1e3<=Er&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${d}s`);const m=p-d;h-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,p,h):h-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,p,h);const{data:b,error:k}=await this._getUser(i);if(k)throw k;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:p,refresh_token:o,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(M(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await rr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(q0(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await St(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=eg(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await jr(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(M(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,h;const{data:d,error:p}=i;if(p)throw p;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return Ve()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(M(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await sg(async s=>(s>0&&await ng(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ht})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ha(i)&&Date.now()+o-n<Er})}catch(n){if(this._debug(r,"error",n),M(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ve()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await rr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await rr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Cr(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:ma()}else if(s&&!s.user&&!s.user){const o=await rr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await St(this.storage,this.storageKey+"-user"),await Cr(this.storage,this.storageKey,s)):s.user=ma()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<da;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${da}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ha(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Li;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Et;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),M(i)){const o={session:null,error:i};return ha(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Cr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Hc(s);await Cr(this.storage,this.storageKey,i)}else{const s=Hc(r);await Cr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await St(this.storage,this.storageKey),await St(this.storage,this.storageKey+"-code-verifier"),await St(this.storage,this.storageKey+"-user"),this.userStorage&&await St(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ve()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Er);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Er);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Er}ms, refresh threshold is ${xo} ticks`),s<=xo&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Mh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ve()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await jr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await z(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await z(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(M(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(M(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=fa(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+F0>s)return n;const{data:i,error:o}=await z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:y,error:m}=await this.getSession();if(m||!y.session)return{data:null,error:m};n=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=fa(n);r!=null&&r.allowExpired||dg(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const h=hg(s.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,Y0(`${l}.${c}`)))throw new wo("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(M(n))return{data:null,error:n};throw n}}}Xn.nextInstanceID=0;const Cg=Xn;class Tg extends Cg{constructor(t){super(t)}}var Pg=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(d){o(d)}}function c(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Og{constructor(t,r,n){var s,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=D0(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:S0,realtime:C0,auth:Object.assign(Object.assign({},E0),{storageKey:c}),global:k0},h=L0(n??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=R0(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Vp(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new b0(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Np(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Pg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},h,d){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Tg({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new c0(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Rg=(e,t,r)=>new Og(e,t,r);function Ag(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Ag()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $g="https://azmuaqjbrbsmgdynrhvs.supabase.co",Lg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6bXVhcWpicmJzbWdkeW5yaHZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3MjUxODMsImV4cCI6MjA4MDMwMTE4M30.sbelsXChw3sA1teNsVLl_Cezzn36hrM3psPIo33bh48",R=Rg($g,Lg);function Yt(){const[e,t]=N.useState(null),[r,n]=N.useState(!0);return N.useEffect(()=>{R.auth.getSession().then(({data:{session:c}})=>{t((c==null?void 0:c.user)??null),n(!1)});const{data:{subscription:l}}=R.auth.onAuthStateChange((c,u)=>{(async()=>t((u==null?void 0:u.user)??null))()});return()=>l.unsubscribe()},[]),{user:e,loading:r,signIn:async(l,c)=>{const{data:u,error:h}=await R.auth.signInWithPassword({email:l,password:c});return{data:u,error:h}},signUp:async(l,c)=>{const{data:u,error:h}=await R.auth.signUp({email:l,password:c});return{data:u,error:h}},signOut:async()=>{const{error:l}=await R.auth.signOut();return{error:l}}}}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),q=(e,t)=>{const r=N.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>N.createElement("svg",{ref:h,...Dg,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Ig(e)}`,l].join(" "),...u},[...t.map(([d,p])=>N.createElement(d,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=q("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=q("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=q("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=q("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=q("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=q("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=q("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=q("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=q("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=q("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=q("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=q("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=q("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=q("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=q("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=q("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Qg(){const[e,t]=N.useState(""),[r,n]=N.useState(""),[s,i]=N.useState(!1),[o,l]=N.useState(""),[c,u]=N.useState(!1),{signIn:h,signUp:d}=Yt(),p=async y=>{y.preventDefault(),l(""),u(!0);try{const{error:m}=s?await d(e,r):await h(e,r);if(m)throw m}catch(m){l(m instanceof Error?m.message:"Erro ao autenticar")}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-slate-600 rounded-full mb-4",children:a.jsx(Yc,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Sistema de Gesto de Igreja"}),a.jsx("p",{className:"text-slate-600 mt-2",children:s?"Criar nova conta":"Entre com suas credenciais"})]}),a.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"E-mail"}),a.jsx("input",{id:"email",type:"email",value:e,onChange:y=>t(y.target.value),required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent transition",placeholder:"seu@email.com"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-2",children:"Senha"}),a.jsx("input",{id:"password",type:"password",value:r,onChange:y=>n(y.target.value),required:!0,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent transition",placeholder:""})]}),o&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:o}),a.jsx("button",{type:"submit",disabled:c,className:"w-full bg-slate-700 hover:bg-slate-800 text-white font-medium py-3 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:c?"Processando...":s?a.jsxs(a.Fragment,{children:[a.jsx(Fh,{className:"w-5 h-5"}),"Criar conta"]}):a.jsxs(a.Fragment,{children:[a.jsx(Yc,{className:"w-5 h-5"}),"Entrar"]})}),a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:()=>{i(!s),l("")},className:"text-sm text-slate-600 hover:text-slate-900 transition",children:s?"J tem uma conta? Entrar":"No tem conta? Criar nova conta"})})]})]})})}function Jg({children:e,onNavigateHome:t}){const{user:r,signOut:n}=Yt(),[s,i]=N.useState(!1),o=async()=>{await n()};return a.jsxs("div",{className:"min-h-screen bg-slate-50",children:[a.jsxs("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-50",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between h-16",children:[a.jsxs("button",{onClick:t,className:"flex items-center hover:opacity-80 transition",children:[a.jsx(at,{className:"w-8 h-8 text-slate-700"}),a.jsx("span",{className:"ml-3 text-xl font-bold text-slate-900",children:"Gesto de Igreja"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:t,className:"hidden sm:flex items-center gap-2 px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition",children:[a.jsx(Jc,{className:"w-4 h-4"}),"Incio"]}),a.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-sm text-slate-600",children:[a.jsx("span",{children:"Usurio:"}),a.jsx("span",{className:"font-medium text-slate-900",children:r==null?void 0:r.email})]}),a.jsxs("button",{onClick:o,className:"hidden sm:flex items-center gap-2 px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition",children:[a.jsx(Xc,{className:"w-4 h-4"}),"Sair"]}),a.jsx("button",{onClick:()=>i(!s),className:"sm:hidden p-2 text-slate-700 hover:bg-slate-100 rounded-lg transition",children:s?a.jsx(dt,{className:"w-6 h-6"}):a.jsx(qg,{className:"w-6 h-6"})})]})]})}),s&&a.jsx("div",{className:"sm:hidden border-t border-slate-200 bg-white",children:a.jsxs("div",{className:"px-4 py-3 space-y-3",children:[a.jsxs("button",{onClick:()=>{t(),i(!1)},className:"w-full flex items-center gap-2 px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition",children:[a.jsx(Jc,{className:"w-4 h-4"}),"Incio"]}),a.jsxs("div",{className:"text-sm text-slate-600",children:[a.jsx("span",{children:"Usurio: "}),a.jsx("span",{className:"font-medium text-slate-900",children:r==null?void 0:r.email})]}),a.jsxs("button",{onClick:o,className:"w-full flex items-center gap-2 px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition",children:[a.jsx(Xc,{className:"w-4 h-4"}),"Sair"]})]})})]}),a.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]})}function tu({onNavigate:e}){const t=[{id:"pessoas",title:"Pessoas",description:"Cadastro e gesto de membros",icon:at,color:"from-blue-500 to-blue-600"},{id:"ministerios",title:"Ministrios",description:"Gerenciar ministrios da igreja",icon:_o,color:"from-green-500 to-green-600"},{id:"grupos",title:"Grupos Familiares",description:"Gerenciar clulas e grupos",icon:mi,color:"from-orange-500 to-orange-600"},{id:"agenda",title:"Agenda",description:"Eventos e reservas de espaos",icon:Vt,color:"from-purple-500 to-purple-600"},{id:"cargos",title:"Cargos",description:"Gerenciar cargos da igreja",icon:bo,color:"from-slate-500 to-slate-600"}];return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Sistema de Gesto de Igreja"}),a.jsx("p",{className:"text-slate-600",children:"Selecione um mdulo para comear"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:t.map(r=>{const n=r.icon;return a.jsxs("button",{onClick:()=>e(r.id),className:"group relative bg-white rounded-2xl shadow-sm border-2 border-slate-200 hover:border-transparent hover:shadow-xl transition-all duration-300 p-8 text-left overflow-hidden",children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${r.color} opacity-0 group-hover:opacity-100 transition-opacity duration-300`}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-xl bg-slate-100 group-hover:bg-white/20 transition-colors mb-4",children:a.jsx(n,{className:"w-8 h-8 text-slate-700 group-hover:text-white transition-colors"})}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 group-hover:text-white transition-colors mb-2",children:r.title}),a.jsx("p",{className:"text-sm text-slate-600 group-hover:text-white/90 transition-colors",children:r.description})]}),a.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 opacity-5 group-hover:opacity-10 transition-opacity",children:a.jsx(n,{className:"w-full h-full text-slate-900 group-hover:text-white"})})]},r.id)})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 pt-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-900 mb-1",children:"0"}),a.jsx("div",{className:"text-sm text-blue-700",children:"Membros Cadastrados"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border border-green-200",children:[a.jsx("div",{className:"text-3xl font-bold text-green-900 mb-1",children:"0"}),a.jsx("div",{className:"text-sm text-green-700",children:"Ministrios Ativos"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-6 border border-orange-200",children:[a.jsx("div",{className:"text-3xl font-bold text-orange-900 mb-1",children:"0"}),a.jsx("div",{className:"text-sm text-orange-700",children:"Grupos Familiares"})]})]})]})}function Yg({onEdit:e,onView:t,onNew:r,refreshTrigger:n}){const[s,i]=N.useState([]),[o,l]=N.useState(!0),[c,u]=N.useState(!1),[h,d]=N.useState([]),[p,y]=N.useState([]),[m,b]=N.useState([]),[k,x]=N.useState({nome:"",cargo_id:"",ministerio_id:"",grupo_familiar_id:"",e_membro:"",estado_civil:""});N.useEffect(()=>{f(),g()},[n]),N.useEffect(()=>{f()},[k]);const g=async()=>{const[_,j,T]=await Promise.all([R.from("cargos").select("*").order("nome"),R.from("ministerios").select("*").order("nome"),R.from("grupos_familiares").select("*").order("nome")]);_.data&&d(_.data),j.data&&y(j.data),T.data&&b(T.data)},f=async()=>{l(!0);let _=R.from("pessoas").select(`
        *,
        cargo:cargo_id(*),
        ministerio:ministerio_id(*),
        grupo_familiar:grupo_familiar_id(*)
      `).order("nome_completo");k.nome&&(_=_.ilike("nome_completo",`%${k.nome}%`)),k.cargo_id&&(_=_.eq("cargo_id",k.cargo_id)),k.ministerio_id&&(_=_.eq("ministerio_id",k.ministerio_id)),k.grupo_familiar_id&&(_=_.eq("grupo_familiar_id",k.grupo_familiar_id)),k.e_membro!==""&&(_=_.eq("e_membro",k.e_membro==="true")),k.estado_civil&&(_=_.eq("estado_civil",k.estado_civil));const{data:j,error:T}=await _;if(j&&!T){const S=j.map(A=>({...A,cargo:Array.isArray(A.cargo)?A.cargo[0]:A.cargo,ministerio:Array.isArray(A.ministerio)?A.ministerio[0]:A.ministerio,grupo_familiar:Array.isArray(A.grupo_familiar)?A.grupo_familiar[0]:A.grupo_familiar}));i(S)}l(!1)},v=async _=>{if(!confirm("Deseja realmente excluir esta pessoa? Esta ao no pode ser desfeita."))return;const{error:j}=await R.from("pessoas").delete().eq("id",_);j?alert("Erro ao excluir pessoa"):f()},w=()=>{x({nome:"",cargo_id:"",ministerio_id:"",grupo_familiar_id:"",e_membro:"",estado_civil:""})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Pessoas"}),a.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[a.jsxs("button",{onClick:()=>u(!c),className:"flex-1 sm:flex-none px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition flex items-center justify-center gap-2",children:[a.jsx(Fg,{className:"w-4 h-4"}),"Filtros"]}),a.jsxs("button",{onClick:r,className:"flex-1 sm:flex-none px-4 py-2 bg-slate-700 hover:bg-slate-800 text-white rounded-lg transition flex items-center justify-center gap-2",children:[a.jsx(et,{className:"w-4 h-4"}),"Nova Pessoa"]})]})]}),c&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome"}),a.jsxs("div",{className:"relative",children:[a.jsx(zh,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por nome...",value:k.nome,onChange:_=>x({...k,nome:_.target.value}),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Cargo"}),a.jsxs("select",{value:k.cargo_id,onChange:_=>x({...k,cargo_id:_.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos"}),h.map(_=>a.jsx("option",{value:_.id,children:_.nome},_.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ministrio"}),a.jsxs("select",{value:k.ministerio_id,onChange:_=>x({...k,ministerio_id:_.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos"}),p.map(_=>a.jsx("option",{value:_.id,children:_.nome},_.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Grupo Familiar"}),a.jsxs("select",{value:k.grupo_familiar_id,onChange:_=>x({...k,grupo_familiar_id:_.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos"}),m.map(_=>a.jsx("option",{value:_.id,children:_.nome},_.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Membro"}),a.jsxs("select",{value:k.e_membro,onChange:_=>x({...k,e_membro:_.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos"}),a.jsx("option",{value:"true",children:"Sim"}),a.jsx("option",{value:"false",children:"No"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Estado Civil"}),a.jsxs("select",{value:k.estado_civil,onChange:_=>x({...k,estado_civil:_.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Todos"}),a.jsx("option",{value:"solteiro",children:"Solteiro"}),a.jsx("option",{value:"casado",children:"Casado"}),a.jsx("option",{value:"vivo",children:"Vivo"}),a.jsx("option",{value:"divorciado",children:"Divorciado"})]})]})]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx("button",{onClick:w,className:"px-4 py-2 text-slate-600 hover:text-slate-900 text-sm transition",children:"Limpar filtros"})})]}),o?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-slate-600",children:"Carregando..."})}):s.length===0?a.jsx("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:a.jsx("p",{className:"text-slate-600",children:"Nenhuma pessoa encontrada"})}):a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-700 uppercase tracking-wider",children:"Nome"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-700 uppercase tracking-wider",children:"Telefone"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-700 uppercase tracking-wider",children:"Membro"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-700 uppercase tracking-wider",children:"Cargo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-700 uppercase tracking-wider",children:"Ministrio"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-700 uppercase tracking-wider",children:"Grupo Familiar"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-700 uppercase tracking-wider",children:"Aes"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200",children:s.map(_=>{var j,T,S;return a.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-slate-900",children:_.nome_completo})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-slate-700",children:_.telefone})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${_.e_membro?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"}`,children:_.e_membro?"Sim":"No"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-slate-700",children:((j=_.cargo)==null?void 0:j.nome)||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-slate-700",children:((T=_.ministerio)==null?void 0:T.nome)||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-slate-700",children:((S=_.grupo_familiar)==null?void 0:S.nome)||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>t(_),className:"text-slate-600 hover:text-slate-900 p-2 hover:bg-slate-100 rounded-lg transition",title:"Visualizar",children:a.jsx(bl,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>e(_),className:"text-slate-600 hover:text-slate-900 p-2 hover:bg-slate-100 rounded-lg transition",title:"Editar",children:a.jsx(Xt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>v(_.id),className:"text-red-600 hover:text-red-700 p-2 hover:bg-red-50 rounded-lg transition",title:"Excluir",children:a.jsx(ut,{className:"w-4 h-4"})})]})})]},_.id)})})]})})}),a.jsxs("div",{className:"text-sm text-slate-600",children:["Total: ",s.length," pessoa(s)"]})]})}function Xg({pessoa:e,onSave:t,onCancel:r}){const{user:n}=Yt(),[s,i]=N.useState(!1),[o,l]=N.useState(""),[c,u]=N.useState([]),[h,d]=N.useState([]),[p,y]=N.useState([]),[m,b]=N.useState({nome_completo:"",data_nascimento:"",estado_civil:"solteiro",telefone:"",whatsapp:"",email:"",profissao:"",e_membro:!1,data_membro:"",nome_conjuge:"",observacoes:"",cargo_id:"",ministerio_id:"",grupo_familiar_id:"",papel_grupo:"",endereco_completo:"",cep:"",cidade:"",estado:"",latitude:null,longitude:null});N.useEffect(()=>{k(),e&&b({nome_completo:e.nome_completo,data_nascimento:e.data_nascimento,estado_civil:e.estado_civil,telefone:e.telefone,whatsapp:e.whatsapp||"",email:e.email||"",profissao:e.profissao||"",e_membro:e.e_membro,data_membro:e.data_membro||"",nome_conjuge:e.nome_conjuge||"",observacoes:e.observacoes||"",cargo_id:e.cargo_id||"",ministerio_id:e.ministerio_id||"",grupo_familiar_id:e.grupo_familiar_id||"",papel_grupo:e.papel_grupo||"",endereco_completo:e.endereco_completo||"",cep:e.cep||"",cidade:e.cidade||"",estado:e.estado||"",latitude:e.latitude,longitude:e.longitude})},[e]);const k=async()=>{const[w,_,j]=await Promise.all([R.from("cargos").select("*").order("nome"),R.from("ministerios").select("*").order("nome"),R.from("grupos_familiares").select("*").order("nome")]);w.data&&u(w.data),_.data&&d(_.data),j.data&&y(j.data)},x=async()=>{if(!m.grupo_familiar_id||!m.papel_grupo||m.papel_grupo==="membro")return!0;const w=p.find(_=>_.id===m.grupo_familiar_id);return w?m.papel_grupo==="lder"&&w.lider_id&&w.lider_id!==(e==null?void 0:e.id)?(l("Este grupo familiar j possui um lder"),!1):m.papel_grupo==="co-lder"&&w.co_lider_id&&w.co_lider_id!==(e==null?void 0:e.id)?(l("Este grupo familiar j possui um co-lder"),!1):!0:!0},g=async()=>{if(!m.endereco_completo||!m.cidade||!m.estado){l("Preencha o endereo, cidade e estado para buscar a localizao");return}try{const w=`${m.endereco_completo}, ${m.cidade}, ${m.estado}`,j=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(w)}`)).json();j&&j.length>0?(b({...m,latitude:parseFloat(j[0].lat),longitude:parseFloat(j[0].lon)}),l("")):l("No foi possvel encontrar a localizao")}catch{l("Erro ao buscar localizao")}},f=async(w,_,j)=>{await R.from("historico_pessoas").insert({pessoa_id:w,acao:_,detalhes:j,created_by:n==null?void 0:n.id})},v=async w=>{if(w.preventDefault(),l(""),!!await x()){i(!0);try{const _={...m,cargo_id:m.cargo_id||null,ministerio_id:m.ministerio_id||null,grupo_familiar_id:m.grupo_familiar_id||null,papel_grupo:m.papel_grupo||null,data_membro:m.e_membro&&m.data_membro?m.data_membro:null,created_by:n==null?void 0:n.id};if(e){const{error:j}=await R.from("pessoas").update(_).eq("id",e.id);if(j)throw j;await f(e.id,"Dados atualizados",{campos_alterados:Object.keys(m)})}else{const{data:j,error:T}=await R.from("pessoas").insert(_).select().single();if(T)throw T;j&&await f(j.id,"Pessoa cadastrada")}if(m.grupo_familiar_id&&m.papel_grupo&&(m.papel_grupo==="lder"||m.papel_grupo==="co-lder")){const j=m.papel_grupo==="lder"?{lider_id:(e==null?void 0:e.id)||null}:{co_lider_id:(e==null?void 0:e.id)||null};await R.from("grupos_familiares").update(j).eq("id",m.grupo_familiar_id)}t()}catch(_){l(_ instanceof Error?_.message:"Erro ao salvar pessoa")}finally{i(!1)}}};return a.jsxs("form",{onSubmit:v,className:"space-y-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Dados Pessoais"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome Completo *"}),a.jsx("input",{type:"text",required:!0,value:m.nome_completo,onChange:w=>b({...m,nome_completo:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Data de Nascimento *"}),a.jsx("input",{type:"date",required:!0,value:m.data_nascimento,onChange:w=>b({...m,data_nascimento:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Estado Civil *"}),a.jsxs("select",{required:!0,value:m.estado_civil,onChange:w=>b({...m,estado_civil:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[a.jsx("option",{value:"solteiro",children:"Solteiro"}),a.jsx("option",{value:"casado",children:"Casado"}),a.jsx("option",{value:"vivo",children:"Vivo"}),a.jsx("option",{value:"divorciado",children:"Divorciado"})]})]}),m.estado_civil==="casado"&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Cnjuge"}),a.jsx("input",{type:"text",value:m.nome_conjuge,onChange:w=>b({...m,nome_conjuge:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telefone *"}),a.jsx("input",{type:"tel",required:!0,value:m.telefone,onChange:w=>b({...m,telefone:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"WhatsApp"}),a.jsx("input",{type:"tel",value:m.whatsapp,onChange:w=>b({...m,whatsapp:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"E-mail"}),a.jsx("input",{type:"email",value:m.email,onChange:w=>b({...m,email:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Profisso"}),a.jsx("input",{type:"text",value:m.profissao,onChange:w=>b({...m,profissao:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:m.e_membro,onChange:w=>b({...m,e_membro:w.target.checked}),className:"w-4 h-4 text-slate-600 rounded focus:ring-slate-500"}),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:" membro da igreja?"})]})}),m.e_membro&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Data que se tornou membro"}),a.jsx("input",{type:"date",value:m.data_membro,onChange:w=>b({...m,data_membro:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Observaes"}),a.jsx("textarea",{value:m.observacoes,onChange:w=>b({...m,observacoes:w.target.value}),rows:4,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Classificao"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Cargo"}),a.jsxs("select",{value:m.cargo_id,onChange:w=>b({...m,cargo_id:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione..."}),c.map(w=>a.jsx("option",{value:w.id,children:w.nome},w.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ministrio"}),a.jsxs("select",{value:m.ministerio_id,onChange:w=>b({...m,ministerio_id:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione..."}),h.map(w=>a.jsx("option",{value:w.id,children:w.nome},w.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Grupo Familiar"}),a.jsxs("select",{value:m.grupo_familiar_id,onChange:w=>b({...m,grupo_familiar_id:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione..."}),p.map(w=>a.jsx("option",{value:w.id,children:w.nome},w.id))]})]}),m.grupo_familiar_id&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Papel no Grupo"}),a.jsxs("select",{value:m.papel_grupo,onChange:w=>b({...m,papel_grupo:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione..."}),a.jsx("option",{value:"membro",children:"Membro"}),a.jsx("option",{value:"lder",children:"Lder"}),a.jsx("option",{value:"co-lder",children:"Co-lder"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Endereo"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Endereo Completo"}),a.jsx("input",{type:"text",value:m.endereco_completo,onChange:w=>b({...m,endereco_completo:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CEP"}),a.jsx("input",{type:"text",value:m.cep,onChange:w=>b({...m,cep:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Cidade"}),a.jsx("input",{type:"text",value:m.cidade,onChange:w=>b({...m,cidade:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Estado"}),a.jsx("input",{type:"text",value:m.estado,onChange:w=>b({...m,estado:w.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsx("div",{children:a.jsxs("button",{type:"button",onClick:g,className:"w-full px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg transition flex items-center justify-center gap-2",children:[a.jsx(ct,{className:"w-4 h-4"}),"Buscar localizao no mapa"]})}),m.latitude&&m.longitude&&a.jsxs("div",{className:"md:col-span-2 p-4 bg-green-50 border border-green-200 rounded-lg text-sm text-green-700",children:["Coordenadas: ",m.latitude.toFixed(6),", ",m.longitude.toFixed(6)]})]})]}),o&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsxs("button",{type:"button",onClick:r,className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition flex items-center gap-2",children:[a.jsx(dt,{className:"w-4 h-4"}),"Cancelar"]}),a.jsxs("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-slate-700 hover:bg-slate-800 text-white rounded-lg transition disabled:opacity-50 flex items-center gap-2",children:[a.jsx(xr,{className:"w-4 h-4"}),s?"Salvando...":"Salvar"]})]})]})}function Zg({pessoaId:e}){const{user:t}=Yt(),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState(!1),[c,u]=N.useState(!1),[h,d]=N.useState({tipo_ocorrencia_id:"",data_ocorrencia:new Date().toISOString().split("T")[0],descricao:""});N.useEffect(()=>{p(),y()},[e]);const p=async()=>{const{data:x,error:g}=await R.from("ocorrencias").select("*, tipos_ocorrencias:tipo_ocorrencia_id(*)").eq("pessoa_id",e).order("data_ocorrencia",{ascending:!1});if(x&&!g){const f=x.map(v=>({...v,tipo_ocorrencia:Array.isArray(v.tipos_ocorrencias)?v.tipos_ocorrencias[0]:v.tipos_ocorrencias}));n(f)}},y=async()=>{const{data:x}=await R.from("tipos_ocorrencias").select("*").order("nome");x&&i(x)},m=async x=>{await R.from("historico_pessoas").insert({pessoa_id:e,acao:x,created_by:t==null?void 0:t.id})},b=async x=>{x.preventDefault(),u(!0);try{const{error:g}=await R.from("ocorrencias").insert({pessoa_id:e,...h,created_by:t==null?void 0:t.id});if(g)throw g;await m("Ocorrncia registrada"),d({tipo_ocorrencia_id:"",data_ocorrencia:new Date().toISOString().split("T")[0],descricao:""}),l(!1),p()}catch{alert("Erro ao salvar ocorrncia")}finally{u(!1)}},k=async x=>{if(!confirm("Deseja realmente excluir esta ocorrncia?"))return;const{error:g}=await R.from("ocorrencias").delete().eq("id",x);g||(await m("Ocorrncia excluda"),p())};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Ocorrncias"}),a.jsxs("button",{onClick:()=>l(!o),className:"px-4 py-2 bg-slate-700 hover:bg-slate-800 text-white rounded-lg transition flex items-center gap-2",children:[a.jsx(et,{className:"w-4 h-4"}),"Nova Ocorrncia"]})]}),o&&a.jsxs("form",{onSubmit:b,className:"bg-slate-50 rounded-lg p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Ocorrncia *"}),a.jsxs("select",{required:!0,value:h.tipo_ocorrencia_id,onChange:x=>d({...h,tipo_ocorrencia_id:x.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione..."}),s.map(x=>a.jsx("option",{value:x.id,children:x.nome},x.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Data da Ocorrncia *"}),a.jsx("input",{type:"date",required:!0,value:h.data_ocorrencia,onChange:x=>d({...h,data_ocorrencia:x.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrio *"}),a.jsx("textarea",{required:!0,value:h.descricao,onChange:x=>d({...h,descricao:x.target.value}),rows:4,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-slate-700 hover:bg-slate-800 text-white rounded-lg transition disabled:opacity-50",children:c?"Salvando...":"Salvar"})]})]}),a.jsx("div",{className:"space-y-4",children:r.length===0?a.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-lg",children:[a.jsx(Vt,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-600",children:"Nenhuma ocorrncia registrada"})]}):r.map(x=>{var g;return a.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"inline-block px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-sm font-medium",children:((g=x.tipo_ocorrencia)==null?void 0:g.nome)||"N/A"}),a.jsx("p",{className:"text-sm text-slate-600 mt-2",children:new Date(x.data_ocorrencia).toLocaleDateString("pt-BR")})]}),a.jsx("button",{onClick:()=>k(x.id),className:"text-red-600 hover:text-red-700 p-2 hover:bg-red-50 rounded-lg transition",children:a.jsx(ut,{className:"w-4 h-4"})})]}),a.jsx("p",{className:"text-slate-700",children:x.descricao})]},x.id)})})]})}function ex({pessoaId:e}){const[t,r]=N.useState([]),[n,s]=N.useState(!0);N.useEffect(()=>{i()},[e]);const i=async()=>{s(!0);const{data:l,error:c}=await R.from("historico_pessoas").select("*").eq("pessoa_id",e).order("created_at",{ascending:!1});l&&!c&&r(l),s(!1)},o=l=>new Date(l).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-slate-600",children:"Carregando histrico..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Histrico de Alteraes"}),a.jsx("div",{className:"space-y-4",children:t.length===0?a.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-lg",children:[a.jsx(Zn,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-600",children:"Nenhum histrico registrado"})]}):a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-slate-200"}),t.map((l,c)=>a.jsxs("div",{className:"relative pl-12 pb-8",children:[a.jsx("div",{className:"absolute left-2 w-4 h-4 bg-slate-600 rounded-full border-4 border-white"}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-medium text-slate-900",children:l.acao}),a.jsx("span",{className:"text-xs text-slate-500",children:o(l.created_at)})]}),l.detalhes&&Object.keys(l.detalhes).length>0&&a.jsx("div",{className:"mt-3 p-3 bg-slate-50 rounded text-sm",children:a.jsx("pre",{className:"text-slate-700 whitespace-pre-wrap",children:JSON.stringify(l.detalhes,null,2)})})]})]},l.id))]})})]})}function Bh({pessoaId:e,onClose:t}){const[r,n]=N.useState(null),[s,i]=N.useState("dados"),[o,l]=N.useState(!0);N.useEffect(()=>{c()},[e]);const c=async()=>{l(!0);const{data:u,error:h}=await R.from("pessoas").select(`
        *,
        cargo:cargo_id(*),
        ministerio:ministerio_id(*),
        grupo_familiar:grupo_familiar_id(*)
      `).eq("id",e).single();u&&!h&&n({...u,cargo:Array.isArray(u.cargo)?u.cargo[0]:u.cargo,ministerio:Array.isArray(u.ministerio)?u.ministerio[0]:u.ministerio,grupo_familiar:Array.isArray(u.grupo_familiar)?u.grupo_familiar[0]:u.grupo_familiar}),l(!1)};return o?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-xl p-8",children:a.jsx("p",{className:"text-slate-600",children:"Carregando..."})})}):r?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full my-8",children:[a.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:r.nome_completo}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 p-2 hover:bg-slate-100 rounded-lg transition",children:a.jsx(dt,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"border-b border-slate-200",children:a.jsxs("div",{className:"flex gap-2 px-6",children:[a.jsx("button",{onClick:()=>i("dados"),className:`px-4 py-3 font-medium transition border-b-2 ${s==="dados"?"border-slate-700 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Dados Pessoais"}),a.jsx("button",{onClick:()=>i("ocorrencias"),className:`px-4 py-3 font-medium transition border-b-2 ${s==="ocorrencias"?"border-slate-700 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Ocorrncias"}),a.jsx("button",{onClick:()=>i("historico"),className:`px-4 py-3 font-medium transition border-b-2 ${s==="historico"?"border-slate-700 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Histrico"})]})}),a.jsxs("div",{className:"p-6 max-h-[calc(100vh-250px)] overflow-y-auto",children:[s==="dados"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Fs,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Data de Nascimento"}),a.jsx("p",{className:"text-slate-900 font-medium",children:new Date(r.data_nascimento).toLocaleDateString("pt-BR")})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Fs,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Estado Civil"}),a.jsx("p",{className:"text-slate-900 font-medium capitalize",children:r.estado_civil})]})]}),r.nome_conjuge&&a.jsxs("div",{className:"flex items-start gap-3 md:col-span-2",children:[a.jsx(at,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Cnjuge"}),a.jsx("p",{className:"text-slate-900 font-medium",children:r.nome_conjuge})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Zc,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Telefone"}),a.jsx("p",{className:"text-slate-900 font-medium",children:r.telefone})]})]}),r.whatsapp&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Zc,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"WhatsApp"}),a.jsx("p",{className:"text-slate-900 font-medium",children:r.whatsapp})]})]}),r.email&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Bg,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"E-mail"}),a.jsx("p",{className:"text-slate-900 font-medium",children:r.email})]})]}),r.profissao&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Qc,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Profisso"}),a.jsx("p",{className:"text-slate-900 font-medium",children:r.profissao})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(at,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Membro da Igreja"}),a.jsx("span",{className:`inline-flex mt-1 px-3 py-1 text-sm font-medium rounded-full ${r.e_membro?"bg-green-100 text-green-800":"bg-slate-100 text-slate-800"}`,children:r.e_membro?"Sim":"No"})]})]}),r.e_membro&&r.data_membro&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Fs,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Data de Membresia"}),a.jsx("p",{className:"text-slate-900 font-medium",children:new Date(r.data_membro).toLocaleDateString("pt-BR")})]})]})]}),a.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Classificao"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.cargo&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Qc,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Cargo"}),a.jsx("p",{className:"text-slate-900 font-medium",children:r.cargo.nome})]})]}),r.ministerio&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(at,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Ministrio"}),a.jsx("p",{className:"text-slate-900 font-medium",children:r.ministerio.nome})]})]}),r.grupo_familiar&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(at,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Grupo Familiar"}),a.jsx("p",{className:"text-slate-900 font-medium",children:r.grupo_familiar.nome}),r.papel_grupo&&a.jsxs("p",{className:"text-sm text-slate-600 capitalize mt-1",children:["(",r.papel_grupo,")"]})]})]})]})]}),r.endereco_completo&&a.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Endereo"}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ct,{className:"w-5 h-5 text-slate-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-900 font-medium",children:r.endereco_completo}),r.cidade&&r.estado&&a.jsxs("p",{className:"text-slate-600 mt-1",children:[r.cidade," - ",r.estado,r.cep&&` | CEP: ${r.cep}`]}),r.latitude&&r.longitude&&a.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["Coordenadas: ",r.latitude.toFixed(6),", ",r.longitude.toFixed(6)]})]})]})]}),r.observacoes&&a.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Observaes"}),a.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:r.observacoes})]})]}),s==="ocorrencias"&&a.jsx(Zg,{pessoaId:e}),s==="historico"&&a.jsx(ex,{pessoaId:e})]})]})}):null}function tx({onBack:e}){const[t,r]=N.useState("list"),[n,s]=N.useState(null),[i,o]=N.useState(0),l=()=>{s(null),r("form")},c=y=>{s(y),r("form")},u=y=>{s(y),r("details")},h=()=>{r("list"),s(null),o(y=>y+1)},d=()=>{r("list"),s(null)},p=()=>{r("list"),s(null)};return a.jsxs("div",{children:[t==="list"&&a.jsxs("div",{className:"space-y-6",children:[e&&a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition",children:a.jsx(Wt,{className:"w-5 h-5 text-slate-700"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Pessoas"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Cadastro e gesto de membros"})]})]}),a.jsx(Yg,{onNew:l,onEdit:c,onView:u,refreshTrigger:i})]}),t==="form"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:d,className:"p-2 hover:bg-slate-100 rounded-lg transition",children:a.jsx(Wt,{className:"w-5 h-5 text-slate-700"})}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:n?"Editar Pessoa":"Nova Pessoa"})]}),a.jsx(Xg,{pessoa:n,onSave:h,onCancel:d})]}),t==="details"&&n&&a.jsx(Bh,{pessoaId:n.id,onClose:p})]})}function rx({onBack:e}){Yt();const[t,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(!1),[l,c]=N.useState(null),[u,h]=N.useState(""),[d,p]=N.useState({nome:"",descricao:""});N.useEffect(()=>{y()},[]);const y=async()=>{s(!0);const{data:f,error:v}=await R.from("ministerios").select("*").order("nome");f&&!v&&r(f),s(!1)},m=()=>{c(null),p({nome:"",descricao:""}),o(!0),h("")},b=f=>{c(f),p({nome:f.nome,descricao:f.descricao||""}),o(!0),h("")},k=async f=>{f.preventDefault(),h(""),s(!0);try{if(l){const{error:v}=await R.from("ministerios").update(d).eq("id",l.id);if(v)throw v}else{const{error:v}=await R.from("ministerios").insert(d);if(v)throw v}o(!1),p({nome:"",descricao:""}),y()}catch(v){h(v.message||"Erro ao salvar ministrio")}finally{s(!1)}},x=async f=>{if(!confirm("Deseja realmente excluir este ministrio?"))return;const{error:v}=await R.from("ministerios").delete().eq("id",f);v?alert("Erro ao excluir ministrio"):y()},g=()=>{o(!1),c(null),p({nome:"",descricao:""}),h("")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition",children:a.jsx(Wt,{className:"w-5 h-5 text-slate-700"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Ministrios"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Gerenciar ministrios da igreja"})]}),!i&&a.jsxs("button",{onClick:m,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition flex items-center gap-2",children:[a.jsx(et,{className:"w-4 h-4"}),"Novo Ministrio"]})]}),i&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-6",children:l?"Editar Ministrio":"Novo Ministrio"}),a.jsxs("form",{onSubmit:k,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Ministrio *"}),a.jsx("input",{type:"text",required:!0,value:d.nome,onChange:f=>p({...d,nome:f.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Ex: Louvor, Infantil, Intercesso..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrio"}),a.jsx("textarea",{value:d.descricao,onChange:f=>p({...d,descricao:f.target.value}),rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Descrio do ministrio..."})]}),u&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:u}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsxs("button",{type:"button",onClick:g,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition flex items-center gap-2",children:[a.jsx(dt,{className:"w-4 h-4"}),"Cancelar"]}),a.jsxs("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition disabled:opacity-50 flex items-center gap-2",children:[a.jsx(xr,{className:"w-4 h-4"}),n?"Salvando...":"Salvar"]})]})]})]}),n&&!i?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-slate-600",children:"Carregando..."})}):t.length===0&&!i?a.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[a.jsx(_o,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600 mb-4",children:"Nenhum ministrio cadastrado"}),a.jsxs("button",{onClick:m,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition inline-flex items-center gap-2",children:[a.jsx(et,{className:"w-4 h-4"}),"Cadastrar Primeiro Ministrio"]})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(f=>a.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-6 hover:shadow-lg hover:border-green-300 transition-all",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(_o,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-slate-900",children:f.nome}),a.jsx("p",{className:"text-xs text-slate-500",children:new Date(f.created_at).toLocaleDateString("pt-BR")})]})]})}),f.descricao&&a.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:f.descricao}),a.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-100",children:[a.jsxs("button",{onClick:()=>b(f),className:"flex-1 px-3 py-2 text-sm text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50 transition flex items-center justify-center gap-2",children:[a.jsx(Xt,{className:"w-4 h-4"}),"Editar"]}),a.jsxs("button",{onClick:()=>x(f.id),className:"flex-1 px-3 py-2 text-sm text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition flex items-center justify-center gap-2",children:[a.jsx(ut,{className:"w-4 h-4"}),"Excluir"]})]})]},f.id))}),a.jsxs("div",{className:"text-sm text-slate-600",children:["Total: ",t.length," ministrio(s)"]})]})}function nx(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState(""),c=N.useCallback(async()=>{const{data:f,error:v}=await R.from("grupos_familiares").select("*").order("nome");if(v){console.error(v),l("Erro ao carregar grupos");return}const w=f||[],_=await Promise.all(w.map(async j=>{const{count:T}=await R.from("pessoas").select("*",{head:!0,count:"exact"}).eq("grupo_familiar_id",j.id);return{...j,membros_count:T||0}}));t(_)},[]),u=N.useCallback(async()=>{const{data:f,error:v}=await R.from("pessoas").select("*").order("nome_completo");if(v){console.error(v),l("Erro ao carregar pessoas");return}n(f||[])},[]),h=N.useCallback(async()=>{i(!0);try{await Promise.all([c(),u()])}finally{i(!1)}},[c,u]),d=N.useCallback(async f=>{i(!0),l("");try{const{data:v,error:w}=await R.from("grupos_familiares").insert({nome:f.nome,descricao:f.descricao||null,lider_1_id:f.lider_1_id||null,lider_2_id:f.lider_2_id||null,co_lider_1_id:f.co_lider_1_id||null,co_lider_2_id:f.co_lider_2_id||null}).select().single();if(w)throw w;return await y(v.id,[],f),await c(),await u(),v.id}catch(v){throw console.error(v),l(v.message||"Erro ao criar grupo"),v}finally{i(!1)}},[c,u]),p=N.useCallback(async(f,v)=>{i(!0),l("");try{const{error:w}=await R.from("grupos_familiares").update({nome:v.nome,descricao:v.descricao||null,lider_1_id:v.lider_1_id||null,lider_2_id:v.lider_2_id||null,co_lider_1_id:v.co_lider_1_id||null,co_lider_2_id:v.co_lider_2_id||null}).eq("id",f);if(w)throw w;const{data:_}=await R.from("pessoas").select("id").eq("grupo_familiar_id",f),j=(_||[]).map(T=>T.id);await y(f,j,v),await c(),await u()}catch(w){throw console.error(w),l(w.message||"Erro ao atualizar grupo"),w}finally{i(!1)}},[c,u]),y=async(f,v,w)=>{const _=w.membros_ids,j=_.filter(I=>!v.includes(I)),T=v.filter(I=>!_.includes(I)),S=new Date().toISOString(),A=[w.lider_1_id,w.lider_2_id,w.co_lider_1_id,w.co_lider_2_id].filter(Boolean);for(const I of j){const te=m(I,w);await R.from("pessoas").update({grupo_familiar_id:f,papel_grupo:te}).eq("id",I),await R.from("grupo_membros_historico").insert({grupo_id:f,pessoa_id:I,acao:"adicionado",papel:te,data:S,nota:v.length>0?"Adicionado na edio":"Adicionado ao criar grupo"})}for(const I of T)await R.from("pessoas").update({grupo_familiar_id:null,papel_grupo:null}).eq("id",I),await R.from("grupo_membros_historico").insert({grupo_id:f,pessoa_id:I,acao:"removido",papel:null,data:S,nota:"Removido na edio"});for(const I of A){const te=m(I,w);await R.from("pessoas").update({grupo_familiar_id:f,papel_grupo:te}).eq("id",I),await R.from("grupo_membros_historico").insert({grupo_id:f,pessoa_id:I,acao:"Promovido",papel:te,data:S,nota:"Definido como liderana"})}},m=(f,v)=>f===v.lider_1_id||f===v.lider_2_id?"lder":f===v.co_lider_1_id||f===v.co_lider_2_id?"co-lder":"membro",b=N.useCallback(async f=>{i(!0);try{await R.from("pessoas").update({grupo_familiar_id:null,papel_grupo:null}).eq("grupo_familiar_id",f),await R.from("ocorrencias").delete().eq("grupo_id",f),await R.from("grupo_membros_historico").delete().eq("grupo_id",f);const{error:v}=await R.from("grupos_familiares").delete().eq("id",f);if(v)throw v;await c(),await u()}catch(v){throw console.error(v),v}finally{i(!1)}},[c,u]),k=N.useCallback(async(f,v,w="membro")=>{i(!0);try{await R.from("pessoas").update({grupo_familiar_id:f,papel_grupo:w}).eq("id",v.id);const _=new Date().toISOString(),j=`Membro ${v.nome_completo} Adicionado`;await R.from("grupo_membros_historico").insert({grupo_id:f,pessoa_id:v.id,acao:"Adicionado",papel:w,data:_,nota:j}),await u()}catch(_){throw console.error(_),_}finally{i(!1)}},[u]),x=N.useCallback(async(f,v)=>{i(!0);try{await R.from("pessoas").update({grupo_familiar_id:null,papel_grupo:null}).eq("id",v.id);const w=new Date().toISOString();await R.from("grupo_membros_historico").insert({grupo_id:f,pessoa_id:v.id,acao:"removido",papel:null,data:w,nota:"Removido via modal"}),await u()}catch(w){throw console.error(w),w}finally{i(!1)}},[u]),g=N.useCallback(async(f,v,w,_,j,T)=>{i(!0);try{const{error:S}=await R.from("grupos_familiares").update({[v]:w||null}).eq("id",f);if(S)throw S;if(w){const te=v.startsWith("co_")?"co-lder":"lder";await R.from("pessoas").update({grupo_familiar_id:f,papel_grupo:te}).eq("id",w)}if(_&&_!==w){const{data:te}=await R.from("pessoas").select("id").eq("id",_).eq("grupo_familiar_id",f).single(),je=te?"membro":null;await R.from("pessoas").update({papel_grupo:je}).eq("id",_)}const A=v.replace("_id","").replace("_"," "),I=T||`Alterao de ${A}`;await R.from("grupo_membros_historico").insert({grupo_id:f,pessoa_id:w||null,acao:v.startsWith("co_")?"co_lider_alterado":"lider_alterado",papel:v.startsWith("co_")?"co-lder":"lder",data:j,nota:I}),await u()}catch(S){throw console.error(S),S}finally{i(!1)}},[u]);return{grupos:e,pessoas:r,loading:s,error:o,setError:l,loadAll:h,loadGrupos:c,loadPessoas:u,createGrupo:d,updateGrupo:p,deleteGrupo:b,addMemberToGroup:k,removeMemberFromGroup:x,changeLeadership:g}}function sx({grupos:e,onEdit:t,onDelete:r,onView:n,loading:s}){return s?a.jsx("div",{className:"text-center py-12",children:a.jsx("div",{className:"text-slate-600",children:"Carregando grupos..."})}):e.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border",children:[a.jsx(mi,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Nenhum grupo cadastrado"}),a.jsx("p",{className:"text-slate-600 text-sm",children:'Clique em "Novo Grupo" para comear'})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(i=>a.jsxs("div",{className:"bg-white border rounded-xl p-6 hover:shadow-lg transition cursor-pointer",onClick:()=>n(i),children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:i.nome}),a.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[a.jsx(mi,{className:"w-3 h-3"}),i.membros_count||0," membro(s)"]})]}),a.jsxs("div",{className:"flex items-center gap-1",onClick:o=>o.stopPropagation(),children:[a.jsx("button",{onClick:()=>t(i),className:"p-2 rounded hover:bg-slate-50 transition",title:"Editar grupo",children:a.jsx(Xt,{className:"w-4 h-4 text-slate-600"})}),a.jsx("button",{onClick:()=>{confirm(`Deseja realmente excluir o grupo "${i.nome}"?`)&&r(i.id)},className:"p-2 rounded hover:bg-red-50 transition",title:"Excluir grupo",children:a.jsx(ut,{className:"w-4 h-4 text-red-600"})})]})]}),i.descricao&&a.jsx("div",{className:"text-sm text-slate-600 line-clamp-2",children:i.descricao})]},i.id))})}function ix({editing:e,form:t,setForm:r,pessoas:n,loading:s,error:i,onSubmit:o,onCancel:l,onRemoveMembro:c,onOpenPessoaFicha:u}){const h=d=>{d.preventDefault(),o(d)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-6",children:e?"Editar Grupo Familiar":"Novo Grupo Familiar"}),a.jsxs("form",{onSubmit:h,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Grupo *"}),a.jsx("input",{type:"text",value:t.nome,onChange:d=>r(p=>({...p,nome:d.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Ex: Grupo Alpha",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrio"}),a.jsx("textarea",{value:t.descricao,onChange:d=>r(p=>({...p,descricao:d.target.value})),rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Informaes sobre o grupo..."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Liderana"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-2",children:"Lder 1"}),a.jsxs("select",{value:t.lider_1_id,onChange:d=>r(p=>({...p,lider_1_id:d.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione..."}),n.map(d=>a.jsx("option",{value:d.id,children:d.nome_completo},d.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-2",children:"Lder 2"}),a.jsxs("select",{value:t.lider_2_id,onChange:d=>r(p=>({...p,lider_2_id:d.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione..."}),n.map(d=>a.jsx("option",{value:d.id,children:d.nome_completo},d.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-2",children:"Co-lder 1"}),a.jsxs("select",{value:t.co_lider_1_id,onChange:d=>r(p=>({...p,co_lider_1_id:d.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione..."}),n.map(d=>a.jsx("option",{value:d.id,children:d.nome_completo},d.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-2",children:"Co-lder 2"}),a.jsxs("select",{value:t.co_lider_2_id,onChange:d=>r(p=>({...p,co_lider_2_id:d.target.value})),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione..."}),n.map(d=>a.jsx("option",{value:d.id,children:d.nome_completo},d.id))]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["Membros (",t.membros_ids.length,")"]})}),a.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto border border-slate-200 rounded-lg p-3",children:[t.membros_ids.map(d=>{const p=n.find(y=>y.id===d);return p?a.jsxs("div",{className:"flex items-center justify-between border border-slate-200 p-3 rounded-lg hover:bg-slate-50 transition",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(mi,{className:"w-5 h-5 text-orange-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-slate-900",children:p.nome_completo}),p.telefone&&a.jsx("div",{className:"text-xs text-slate-500",children:p.telefone})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>u(p),className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[a.jsx(bl,{className:"w-3 h-3"}),"Ficha"]}),a.jsx("button",{type:"button",onClick:()=>c(d),className:"text-sm text-red-600 hover:text-red-700",children:"Remover"})]})]},d):null}),t.membros_ids.length===0&&a.jsx("div",{className:"text-sm text-slate-500 italic text-center py-4",children:"Nenhum membro adicionado. Use o modal de visualizao para adicionar membros."})]})]}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:i}),a.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[a.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Salvando...":"Salvar Grupo"})]})]})]})}function ax({grupo:e,membros:t,onChangeLeadership:r,pessoaNomeById:n}){const[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,u]=N.useState(""),[h,d]=N.useState(new Date().toISOString().split("T")[0]),[p,y]=N.useState(""),[m,b]=N.useState(!1),[k,x]=N.useState(!1),g=[{label:"Lder 1",field:"lider_1_id"},{label:"Lder 2",field:"lider_2_id"},{label:"Co-lder 1",field:"co_lider_1_id"},{label:"Co-lder 2",field:"co_lider_2_id"}],f=(_,j)=>{const T=e[_]||null;l({field:_,label:j,currentId:T}),u(T||""),d(new Date().toISOString().split("T")[0]),y(""),i(!0)},v=()=>{i(!1),l(null),u(""),y("")},w=async()=>{if(o){if(!h){alert("Data da alterao  obrigatria");return}b(!0);try{await r(o.field,c,h,p),x(!0),setTimeout(()=>x(!1),3e3),v()}catch(_){console.error(_)}finally{b(!1)}}};return a.jsxs("div",{className:"space-y-6",children:[k&&a.jsx("div",{className:"fixed top-4 right-4 z-[70] animate-in slide-in-from-top",children:a.jsxs("div",{className:"bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg flex items-center gap-3",children:[a.jsx("div",{className:"p-1 bg-white/20 rounded-full",children:a.jsx(xr,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold",children:"Liderana alterada com sucesso!"}),a.jsx("div",{className:"text-sm text-green-100",children:"Registro adicionado ao histrico"})]})]})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-2",children:"Descrio"}),a.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:a.jsx("p",{className:"text-slate-700",children:e.descricao||a.jsx("span",{className:"text-slate-400 italic",children:"Nenhuma descrio cadastrada"})})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Liderana"}),a.jsx("div",{className:"space-y-3",children:g.map(({label:_,field:j})=>{const T=e[j],S=n(T);return a.jsx("div",{className:"bg-white rounded-lg p-4 border border-slate-200 hover:border-slate-300 transition",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-xs text-slate-500 mb-1",children:_}),a.jsx("div",{className:"font-medium text-slate-900",children:S})]}),a.jsxs("button",{onClick:()=>f(j,_),className:"px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2 text-sm",children:[a.jsx(Xt,{className:"w-4 h-4"}),"Alterar"]})]})},j)})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Estatsticas"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[a.jsx("div",{className:"text-xs text-orange-700 mb-1",children:"Total de Membros"}),a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:e.membros_count||0})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[a.jsx("div",{className:"text-xs text-blue-700 mb-1",children:"Lderes"}),a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:[e.lider_1_id,e.lider_2_id].filter(Boolean).length})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[a.jsx("div",{className:"text-xs text-purple-700 mb-1",children:"Co-lderes"}),a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:[e.co_lider_1_id,e.co_lider_2_id].filter(Boolean).length})]})]})]}),s&&o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[a.jsx("div",{className:"p-6 border-b border-slate-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Alterar ",o.label]}),a.jsx("button",{onClick:v,className:"p-2 hover:bg-slate-100 rounded-lg transition",children:a.jsx(dt,{className:"w-5 h-5 text-slate-600"})})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Atual"}),a.jsx("div",{className:"font-medium text-slate-900",children:n(o.currentId)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nova Liderana *"}),a.jsxs("select",{value:c,onChange:_=>u(_.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"-- Remover liderana --"}),t.map(_=>a.jsx("option",{value:_.id,children:_.nome_completo},_.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Data da Alterao *"}),a.jsx("input",{type:"date",value:h,onChange:_=>d(_.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Observao"}),a.jsx("textarea",{value:p,onChange:_=>y(_.target.value),rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Motivo da alterao, contexto, etc..."})]}),c!==o.currentId&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-blue-700 font-medium mb-1",children:"Resumo da Alterao:"}),a.jsx("div",{className:"text-sm text-blue-900",children:o.currentId?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"font-medium",children:n(o.currentId)}),"  ",a.jsx("span",{className:"font-medium",children:c?n(c):"Sem liderana"})]}):a.jsxs(a.Fragment,{children:["Definir ",a.jsx("span",{className:"font-medium",children:n(c)})," como ",o.label]})})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex gap-3 justify-end",children:[a.jsx("button",{onClick:v,disabled:m,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition",children:"Cancelar"}),a.jsxs("button",{onClick:w,disabled:m||!h,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx(xr,{className:"w-4 h-4"}),m?"Salvando...":"Confirmar Alterao"]})]})]})})]})}function ox({membros:e,todasPessoas:t,grupoId:r,onAddMember:n,onRemoveMember:s,onViewPessoa:i,formatDate:o}){const[l,c]=N.useState(!1),[u,h]=N.useState(""),[d,p]=N.useState([]);N.useEffect(()=>{if(!u){p(t.filter(b=>b.grupo_familiar_id!==r));return}const m=u.toLowerCase();p(t.filter(b=>b.grupo_familiar_id!==r&&(b.nome_completo||"").toLowerCase().includes(m)))},[u,t,r]);const y=(m,b)=>{n(m,b),c(!1),h("")};return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"font-semibold text-slate-900",children:["Membros Atuais (",e.length,")"]}),a.jsxs("button",{onClick:()=>c(!l),className:"px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center gap-2 text-sm",children:[a.jsx(et,{className:"w-4 h-4"}),"Adicionar"]})]}),a.jsx("div",{className:"max-h-96 overflow-auto border border-slate-200 rounded-lg",children:e.length===0?a.jsx("div",{className:"p-8 text-center text-slate-500 text-sm",children:a.jsx("p",{className:"italic",children:"Nenhum membro neste grupo"})}):a.jsx("div",{className:"divide-y divide-slate-200",children:e.map(m=>a.jsx("div",{className:"p-4 hover:bg-slate-50 transition",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"font-medium text-slate-900",children:[m.nome_completo,a.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-orange-100 text-orange-700 rounded-full",children:m.papel_grupo||"membro"})]}),m.telefone&&a.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:m.telefone}),a.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Entrada: ",o(m.data_entrada)]})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>i(m),title:"Ver ficha",className:"p-2 text-slate-600 hover:bg-slate-100 rounded transition",children:a.jsx(bl,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{confirm(`Remover ${m.nome_completo} do grupo?`)&&s(m)},title:"Remover do grupo",className:"p-2 text-red-600 hover:bg-red-50 rounded transition",children:a.jsx(ut,{className:"w-4 h-4"})})]})]})},m.id))})})]}),a.jsx("div",{children:l?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-semibold text-slate-900",children:"Adicionar Membro"}),a.jsx("button",{onClick:()=>{c(!1),h("")},className:"p-2 hover:bg-slate-100 rounded transition",children:a.jsx(dt,{className:"w-5 h-5 text-slate-600"})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(zh,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),a.jsx("input",{type:"text",value:u,onChange:m=>h(m.target.value),placeholder:"Buscar por nome...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),a.jsx("div",{className:"max-h-80 overflow-auto border border-slate-200 rounded-lg",children:d.length===0?a.jsx("div",{className:"p-8 text-center text-slate-500 text-sm",children:a.jsx("p",{className:"italic",children:"Nenhuma pessoa disponvel"})}):a.jsx("div",{className:"divide-y divide-slate-200",children:d.map(m=>a.jsx("div",{className:"p-4 hover:bg-slate-50 transition",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-slate-900",children:m.nome_completo}),m.telefone&&a.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:m.telefone})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>y(m,"membro"),className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm",children:"Membro"}),a.jsx("button",{onClick:()=>y(m,"lder"),className:"px-3 py-1.5 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition text-sm",children:"Lder"})]})]})},m.id))})})]}):a.jsx("div",{className:"flex items-center justify-center h-full border-2 border-dashed border-slate-200 rounded-lg p-8",children:a.jsxs("div",{className:"text-center text-slate-500",children:[a.jsx(et,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),a.jsxs("p",{className:"text-sm italic",children:['Clique em "Adicionar" para',a.jsx("br",{}),"buscar e adicionar membros"]})]})})})]})}function lx({ocorrencias:e=[],membros:t=[],pessoas:r=[],onAdd:n,onDelete:s}){const[i,o]=N.useState({tipo:"",pessoa_id:"",data:"",descricao:""}),l=h=>{if(h.preventDefault(),!i.tipo||!i.data){alert("Tipo e data so obrigatrios");return}n(i),o({tipo:"",pessoa_id:"",data:"",descricao:""})},c=h=>{var d;return h&&((d=r.find(p=>p.id===h))==null?void 0:d.nome_completo)||""},u=["Visita","Culto","Reunio","Aniversrio","Batismo","Casamento","bito","Mudana","Afastamento","Retorno","Evangelismo","Estudo Bblico","Orao","Jejum","Outros"];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsx("h4",{className:"font-semibold text-slate-900 mb-4",children:"Nova Ocorrncia do Grupo"}),a.jsxs("form",{onSubmit:l,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Tipo *"}),a.jsx("input",{type:"text",value:i.tipo,onChange:h=>o(d=>({...d,tipo:h.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm",placeholder:"Ex: Visita, Culto...",list:"tipos-sugestoes",required:!0}),a.jsx("datalist",{id:"tipos-sugestoes",children:u.map(h=>a.jsx("option",{value:h},h))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Data *"}),a.jsx("input",{type:"date",value:i.data,onChange:h=>o(d=>({...d,data:h.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Membro (opcional)"}),a.jsxs("select",{value:i.pessoa_id,onChange:h=>o(d=>({...d,pessoa_id:h.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"",children:"Nenhum"}),t.map(h=>a.jsx("option",{value:h.id,children:h.nome_completo},h.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Descrio"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:i.descricao,onChange:h=>o(d=>({...d,descricao:h.target.value})),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm",placeholder:"Detalhes..."}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition text-sm whitespace-nowrap font-medium",children:"Adicionar"})]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-slate-900 mb-4",children:["Histrico de Ocorrncias (",e.length,")"]}),e.length===0?a.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsx(Vt,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 italic",children:"Nenhuma ocorrncia registrada"}),a.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Registre cultos, reunies, visitas e outros eventos do grupo"})]}):a.jsx("div",{className:"space-y-3",children:e.map(h=>a.jsx("div",{className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:h.tipo}),a.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[a.jsx(Vt,{className:"w-3 h-3"}),new Date(h.data_ocorrencia).toLocaleDateString("pt-BR")]})]}),h.pessoa_id&&a.jsxs("div",{className:"text-sm text-slate-600 flex items-center gap-1 mb-1",children:[a.jsx(Fs,{className:"w-3 h-3"}),a.jsx("span",{className:"font-medium",children:"Membro:"}),c(h.pessoa_id)]}),h.descricao&&a.jsx("div",{className:"text-sm text-slate-700 mt-2 pl-4 border-l-2 border-orange-200",children:h.descricao})]}),a.jsx("button",{onClick:()=>{confirm("Remover esta ocorrncia?")&&s(h.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded transition",title:"Remover ocorrncia",children:a.jsx(ut,{className:"w-4 h-4"})})]})},h.id))})]})]})}function cx({eventos:e,membros:t,grupoId:r,onAdd:n,onUpdate:s,onDelete:i}){const[o,l]=N.useState(!1),[c,u]=N.useState(null),[h,d]=N.useState({titulo:"",tipo:"reuniao",descricao:"",data_inicio:"",hora_inicio:"19:00",local:"",endereco:"",eh_recorrente:!1,recorrencia_tipo:"semanal",recorrencia_dia_semana:2,recorrencia_fim:"",max_participantes:"",requer_confirmacao:!1,responsavel_id:"",cor:"#3b82f6"}),p=[{value:"reuniao",label:"Reunio",icon:"",color:"#3b82f6"},{value:"confraternizacao",label:"Confraternizao",icon:"",color:"#10b981"},{value:"culto",label:"Culto",icon:"",color:"#8b5cf6"},{value:"estudo",label:"Estudo Bblico",icon:"",color:"#f59e0b"},{value:"evangelismo",label:"Evangelismo",icon:"",color:"#ec4899"},{value:"outro",label:"Outro",icon:"",color:"#64748b"}],y=[{value:0,label:"Domingo"},{value:1,label:"Segunda"},{value:2,label:"Tera"},{value:3,label:"Quarta"},{value:4,label:"Quinta"},{value:5,label:"Sexta"},{value:6,label:"Sbado"}],m=f=>{var v;if(f){const w=new Date(f.data_inicio);u(f.id||null),d({titulo:f.titulo,tipo:f.tipo,descricao:f.descricao||"",data_inicio:w.toISOString().split("T")[0],hora_inicio:w.toTimeString().slice(0,5),local:f.local||"",endereco:f.endereco||"",eh_recorrente:f.eh_recorrente,recorrencia_tipo:f.recorrencia_tipo||"semanal",recorrencia_dia_semana:f.recorrencia_dia_semana||2,recorrencia_fim:f.recorrencia_fim||"",max_participantes:((v=f.max_participantes)==null?void 0:v.toString())||"",requer_confirmacao:f.requer_confirmacao,responsavel_id:f.responsavel_id||"",cor:f.cor||"#3b82f6"})}else u(null),d({titulo:"",tipo:"reuniao",descricao:"",data_inicio:"",hora_inicio:"19:00",local:"",endereco:"",eh_recorrente:!1,recorrencia_tipo:"semanal",recorrencia_dia_semana:2,recorrencia_fim:"",max_participantes:"",requer_confirmacao:!1,responsavel_id:"",cor:"#3b82f6"});l(!0)},b=f=>{if(f.preventDefault(),!h.titulo){alert("Ttulo  obrigatrio");return}if(!h.eh_recorrente&&!h.data_inicio){alert("Data  obrigatria para eventos no recorrentes");return}c?s(c,h):n(h),l(!1)},k=f=>new Date(f).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),x=f=>{var _;if(!f.eh_recorrente)return null;const v=f.recorrencia_tipo,w=(_=y.find(j=>j.value===f.recorrencia_dia_semana))==null?void 0:_.label;return v==="semanal"&&w?`Toda ${w}`:v==="quinzenal"&&w?`A cada 2 ${w}s`:v==="mensal"?"Mensal":v==="anual"?"Anual":"Recorrente"},g=f=>p.find(v=>v.value===f)||p[0];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-slate-900",children:"Eventos e Reunies"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Gerencie reunies semanais e eventos especiais"})]}),!o&&a.jsxs("button",{onClick:()=>m(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2 font-medium",children:[a.jsx(et,{className:"w-4 h-4"}),"Novo Evento"]})]}),o&&a.jsxs("div",{className:"bg-white border-2 border-indigo-300 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h5",{className:"font-semibold text-slate-900",children:c?"Editar Evento":"Novo Evento"}),a.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-slate-100 rounded",children:a.jsx(dt,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border",children:[a.jsxs("label",{className:"flex items-center gap-2 mb-3",children:[a.jsx("input",{type:"checkbox",checked:h.eh_recorrente,onChange:f=>d(v=>({...v,eh_recorrente:f.target.checked})),className:"w-4 h-4 text-indigo-600 rounded"}),a.jsx(eu,{className:"w-4 h-4 text-slate-600"}),a.jsx("span",{className:"font-medium text-slate-700",children:"Evento Recorrente"})]}),h.eh_recorrente&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Repetir"}),a.jsxs("select",{value:h.recorrencia_tipo,onChange:f=>d(v=>({...v,recorrencia_tipo:f.target.value})),className:"w-full px-2 py-1.5 border rounded text-sm",children:[a.jsx("option",{value:"semanal",children:"Semanalmente"}),a.jsx("option",{value:"quinzenal",children:"Quinzenalmente"}),a.jsx("option",{value:"mensal",children:"Mensalmente"}),a.jsx("option",{value:"anual",children:"Anualmente"})]})]}),(h.recorrencia_tipo==="semanal"||h.recorrencia_tipo==="quinzenal")&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Dia da semana"}),a.jsx("select",{value:h.recorrencia_dia_semana,onChange:f=>d(v=>({...v,recorrencia_dia_semana:parseInt(f.target.value)})),className:"w-full px-2 py-1.5 border rounded text-sm",children:y.map(f=>a.jsx("option",{value:f.value,children:f.label},f.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Termina em (opcional)"}),a.jsx("input",{type:"date",value:h.recorrencia_fim,onChange:f=>d(v=>({...v,recorrencia_fim:f.target.value})),className:"w-full px-2 py-1.5 border rounded text-sm"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ttulo *"}),a.jsx("input",{type:"text",value:h.titulo,onChange:f=>d(v=>({...v,titulo:f.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ex: Reunio Semanal",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo *"}),a.jsx("select",{value:h.tipo,onChange:f=>{const v=p.find(w=>w.value===f.target.value);d(w=>({...w,tipo:f.target.value,cor:(v==null?void 0:v.color)||w.cor}))},className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:p.map(f=>a.jsxs("option",{value:f.value,children:[f.icon," ",f.label]},f.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Responsvel"}),a.jsxs("select",{value:h.responsavel_id,onChange:f=>d(v=>({...v,responsavel_id:f.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"Nenhum"}),t.map(f=>a.jsx("option",{value:f.id,children:f.nome_completo},f.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Data ",!h.eh_recorrente&&"*",h.eh_recorrente&&a.jsx("span",{className:"text-xs text-slate-500 ml-2",children:"(opcional para eventos recorrentes)"})]}),a.jsx("input",{type:"date",value:h.data_inicio,onChange:f=>d(v=>({...v,data_inicio:f.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",required:!h.eh_recorrente})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Hora"}),a.jsx("input",{type:"time",value:h.hora_inicio,onChange:f=>d(v=>({...v,hora_inicio:f.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Local"}),a.jsx("input",{type:"text",value:h.local,onChange:f=>d(v=>({...v,local:f.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ex: Casa do lder"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mx. Participantes"}),a.jsx("input",{type:"number",value:h.max_participantes,onChange:f=>d(v=>({...v,max_participantes:f.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ilimitado"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrio"}),a.jsx("textarea",{value:h.descricao,onChange:f=>d(v=>({...v,descricao:f.target.value})),rows:2,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Detalhes sobre o evento..."})]})]}),a.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 border rounded-lg hover:bg-slate-50",children:"Cancelar"}),a.jsxs("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[a.jsx(xr,{className:"w-4 h-4"}),c?"Salvar":"Criar Evento"]})]})]})]}),a.jsx("div",{className:"space-y-3",children:e.length===0?a.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-lg border-2 border-dashed border-slate-200",children:[a.jsx(Vt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"Nenhum evento cadastrado"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Crie reunies semanais ou eventos especiais"})]}):e.map(f=>{const v=g(f.tipo),w=x(f);return a.jsx("div",{className:"bg-white border-2 border-slate-200 rounded-lg p-4 hover:shadow-md transition",style:{borderLeftColor:f.cor,borderLeftWidth:"4px"},children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"text-2xl",children:v.icon}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-slate-900",children:f.titulo}),a.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:`${f.cor}20`,color:f.cor},children:v.label})]})]}),a.jsxs("div",{className:"space-y-1.5 text-sm text-slate-600",children:[f.data_inicio&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{children:k(f.data_inicio)})]}),f.local&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ct,{className:"w-4 h-4"}),a.jsx("span",{children:f.local})]}),f.max_participantes&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(at,{className:"w-4 h-4"}),a.jsxs("span",{children:["At ",f.max_participantes," pessoas"]})]}),w&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(eu,{className:"w-4 h-4 text-indigo-600"}),a.jsx("span",{className:"text-indigo-600 font-medium",children:w})]})]}),f.descricao&&a.jsx("p",{className:"text-sm text-slate-600 mt-3 pl-6 border-l-2 border-slate-200",children:f.descricao})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>m(f),className:"p-2 text-slate-600 hover:bg-slate-100 rounded",title:"Editar",children:a.jsx(Xt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{confirm(`Excluir evento "${f.titulo}"?`)&&i(f.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Excluir",children:a.jsx(ut,{className:"w-4 h-4"})})]})]})},f.id)})})]})}function ux({historico:e,formatDate:t}){const r=i=>{switch(i){case"adicionado":return a.jsx(Fh,{className:"w-5 h-5 text-green-600"});case"removido":return a.jsx(Gg,{className:"w-5 h-5 text-red-600"});case"Promovido":return a.jsx(Vg,{className:"w-5 h-5 text-blue-600"});case"Rebaixado":return a.jsx(Wg,{className:"w-5 h-5 text-orange-600"});case"Lider alterado":case"Co lider alterado":return a.jsx(Hg,{className:"w-5 h-5 text-purple-600"});default:return a.jsx($n,{className:"w-5 h-5 text-slate-400"})}},n=i=>{switch(i){case"adicionado":return"bg-green-100 text-green-700 border-green-200";case"removido":return"bg-red-100 text-red-700 border-red-200";case"Promovido":return"bg-blue-100 text-blue-700 border-blue-200";case"Rebaixado":return"bg-orange-100 text-orange-700 border-orange-200";case"Lider alterado":case"Co lider alterado":return"bg-purple-100 text-purple-700 border-purple-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}},s=i=>["Adicionado","Promovido","Lider Alterado","Co lider alterado"].includes(i||"");return e.length===0?a.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsx($n,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 italic",children:"Nenhum registro no histrico"})]}):a.jsx("div",{className:"space-y-3",children:e.map(i=>{var o;return a.jsx("div",{className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:r(i.acao)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${n(i.acao)}`,children:(o=i.acao)==null?void 0:o.replace("_"," ")}),i.papel&&a.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 rounded-full text-xs",children:i.papel})]}),a.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:t(i.data)})]}),(i.nota||i.descricao)&&a.jsx("p",{className:"text-sm text-slate-700",children:i.nota||i.descricao})]}),a.jsx("div",{className:"flex-shrink-0",children:s(i.acao)?a.jsx("div",{className:"p-1.5 bg-green-100 rounded-full",children:a.jsx(Ug,{className:"w-4 h-4 text-green-600"})}):a.jsx("div",{className:"p-1.5 bg-slate-100 rounded-full",children:a.jsx($n,{className:"w-4 h-4 text-slate-400"})})})]})},i.id)})})}function dx({grupo:e,pessoas:t,onClose:r,onEdit:n,onReload:s,onViewPessoa:i}){const[o,l]=N.useState("dados"),[c,u]=N.useState([]),[h,d]=N.useState([]),[p,y]=N.useState([]),[m,b]=N.useState([]),[k,x]=N.useState(!1),[g,f]=N.useState(e);N.useEffect(()=>{e!=null&&e.id&&(f(e),v())},[e==null?void 0:e.id]);const v=async()=>{if(e!=null&&e.id){x(!0);try{const{data:C}=await R.from("grupos_familiares").select("*").eq("id",e.id).single();C&&f({...C,membros_count:e.membros_count});const{data:O}=await R.from("pessoas").select("*").eq("grupo_familiar_id",e.id).order("nome_completo"),{data:E}=await R.from("grupo_ocorrencias").select("*").eq("grupo_id",e.id).order("data_ocorrencia",{ascending:!1}),{data:$}=await R.from("grupo_membros_historico").select("*").eq("grupo_id",e.id).order("data",{ascending:!1}),{data:D}=await R.from("grupo_eventos").select("*").eq("grupo_id",e.id).order("data_inicio",{ascending:!0});u(O||[]),d(E||[]),y($||[]),b(D||[])}catch(C){console.error("Erro ao carregar dados do grupo:",C)}finally{x(!1)}}},w=async(C,O)=>{if(e!=null&&e.id){x(!0);try{await R.from("pessoas").update({grupo_familiar_id:e.id,papel_grupo:O}).eq("id",C.id);const E=new Date().toISOString();await R.from("grupo_membros_historico").insert({grupo_id:e.id,pessoa_id:C.id,acao:"adicionado",papel:O,data:E,nota:`Membro ${C.nome_completo} adicionado`}),await v(),s()}catch(E){console.error(E),alert("Erro ao adicionar membro")}finally{x(!1)}}},_=async C=>{if(e!=null&&e.id){x(!0);try{await R.from("pessoas").update({grupo_familiar_id:null,papel_grupo:null}).eq("id",C.id);const O=new Date().toISOString();await R.from("grupo_membros_historico").insert({grupo_id:e.id,pessoa_id:C.id,acao:"removido",papel:null,data:O,nota:"Removido via modal"}),await v(),s()}catch(O){console.error(O),alert("Erro ao remover membro")}finally{x(!1)}}},j=async(C,O,E,$)=>{var D,B;if(e!=null&&e.id){x(!0);try{const U=e[C],De=((D=t.find(er=>er.id===U))==null?void 0:D.nome_completo)||"Ningum",fe=O?((B=t.find(er=>er.id===O))==null?void 0:B.nome_completo)||"Desconhecido":"Ningum",{data:Nt,error:He}=await R.from("grupos_familiares").update({[C]:O||null}).eq("id",e.id).select().single();if(He)throw He;if(O){const er=C.startsWith("co_")?"co-lder":"lder";await R.from("pessoas").update({grupo_familiar_id:e.id,papel_grupo:er}).eq("id",O)}if(U&&U!==O){const{data:er}=await R.from("pessoas").select("id").eq("id",U).eq("grupo_familiar_id",e.id).single(),Hh=er?"membro":null;await R.from("pessoas").update({papel_grupo:Hh}).eq("id",U)}const qh=`Alterao de ${C.replace("_id","").replace("_"," ")}: ${De}  ${fe}${$?`. ${$}`:""}`;await R.from("grupo_membros_historico").insert({grupo_id:e.id,pessoa_id:O||U||null,acao:C.startsWith("co_")?"co_lider_alterado":"lider_alterado",papel:C.startsWith("co_")?"co-lder":"lder",data:E,nota:qh}),await v(),s()}catch(U){throw console.error(U),alert("Erro ao alterar liderana"),U}finally{x(!1)}}},T=async C=>{if(e!=null&&e.id){x(!0);try{const{data:O,error:E}=await R.from("grupo_ocorrencias").insert({grupo_id:e.id,tipo:C.tipo,data_ocorrencia:C.data,pessoa_id:C.pessoa_id||null,descricao:C.descricao||null}).select().single();if(E)throw E;d($=>[O,...$])}catch(O){console.error(O),alert((O==null?void 0:O.message)||"Erro ao adicionar ocorrncia")}finally{x(!1)}}},S=async C=>{if(e!=null&&e.id){x(!0);try{const{error:O}=await R.from("grupo_ocorrencias").delete().eq("id",C);if(O)throw O;d(E=>E.filter($=>$.id!==C))}catch(O){console.error(O),alert("Erro ao remover ocorrncia")}finally{x(!1)}}},A=async C=>{if(e!=null&&e.id){x(!0);try{let O;if(C.eh_recorrente&&!C.data_inicio){const D=new Date,B=C.recorrencia_dia_semana,U=D.getDay();let De=B-U;De<=0&&(De+=7);const fe=new Date(D);fe.setDate(D.getDate()+De),O=`${fe.toISOString().split("T")[0]}T${C.hora_inicio}:00`}else O=`${C.data_inicio}T${C.hora_inicio}:00`;const{data:E,error:$}=await R.from("grupo_eventos").insert({grupo_id:e.id,titulo:C.titulo,tipo:C.tipo,descricao:C.descricao||null,data_inicio:O,local:C.local||null,endereco:C.endereco||null,eh_recorrente:C.eh_recorrente,recorrencia_tipo:C.eh_recorrente?C.recorrencia_tipo:null,recorrencia_dia_semana:C.eh_recorrente?C.recorrencia_dia_semana:null,recorrencia_fim:C.eh_recorrente&&C.recorrencia_fim?C.recorrencia_fim:null,max_participantes:C.max_participantes?parseInt(C.max_participantes):null,requer_confirmacao:C.requer_confirmacao,responsavel_id:C.responsavel_id||null,cor:C.cor}).select().single();if($)throw $;b(D=>[...D,E].sort((B,U)=>new Date(B.data_inicio).getTime()-new Date(U.data_inicio).getTime()))}catch(O){console.error(O),alert((O==null?void 0:O.message)||"Erro ao adicionar evento")}finally{x(!1)}}},I=async(C,O)=>{if(e!=null&&e.id){x(!0);try{let E;if(O.eh_recorrente&&!O.data_inicio){const B=new Date,U=O.recorrencia_dia_semana,De=B.getDay();let fe=U-De;fe<=0&&(fe+=7);const Nt=new Date(B);Nt.setDate(B.getDate()+fe),E=`${Nt.toISOString().split("T")[0]}T${O.hora_inicio}:00`}else E=`${O.data_inicio}T${O.hora_inicio}:00`;const{data:$,error:D}=await R.from("grupo_eventos").update({titulo:O.titulo,tipo:O.tipo,descricao:O.descricao||null,data_inicio:E,local:O.local||null,endereco:O.endereco||null,eh_recorrente:O.eh_recorrente,recorrencia_tipo:O.eh_recorrente?O.recorrencia_tipo:null,recorrencia_dia_semana:O.eh_recorrente?O.recorrencia_dia_semana:null,recorrencia_fim:O.eh_recorrente&&O.recorrencia_fim?O.recorrencia_fim:null,max_participantes:O.max_participantes?parseInt(O.max_participantes):null,requer_confirmacao:O.requer_confirmacao,responsavel_id:O.responsavel_id||null,cor:O.cor}).eq("id",C).select().single();if(D)throw D;b(B=>B.map(U=>U.id===C?$:U))}catch(E){console.error(E),alert((E==null?void 0:E.message)||"Erro ao atualizar evento")}finally{x(!1)}}},te=async C=>{x(!0);try{const{error:O}=await R.from("grupo_eventos").delete().eq("id",C);if(O)throw O;b(E=>E.filter($=>$.id!==C))}catch(O){console.error(O),alert("Erro ao remover evento")}finally{x(!1)}},je=C=>{if(!C)return"";try{return new Date(C).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return C}},tt=C=>{var O;return C&&((O=t.find(E=>E.id===C))==null?void 0:O.nome_completo)||""};if(!e)return null;const Zt=[{id:"dados",label:"Dados"},{id:"membros",label:"Membros"},{id:"eventos",label:"Eventos"},{id:"ocorrencias",label:"Ocorrncias"},{id:"historico",label:"Histrico"}];return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl overflow-hidden max-h-[90vh] flex flex-col",children:[a.jsx("div",{className:"p-6 border-b border-slate-200",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:(g==null?void 0:g.nome)||(e==null?void 0:e.nome)}),a.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[(g==null?void 0:g.membros_count)||(e==null?void 0:e.membros_count)||0," membro(s)"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[a.jsx(Xt,{className:"w-4 h-4"}),"Editar"]}),a.jsx("button",{onClick:r,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition",children:"Fechar"})]})]})}),a.jsx("div",{className:"border-b border-slate-200 px-6",children:a.jsx("nav",{className:"flex gap-1 -mb-px",children:Zt.map(C=>a.jsx("button",{onClick:()=>l(C.id),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${o===C.id?"border-orange-600 text-orange-600":"border-transparent text-slate-600 hover:text-slate-900 hover:border-slate-300"}`,children:C.label},C.id))})}),a.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[o==="dados"&&g&&a.jsx(ax,{grupo:g,membros:c,onChangeLeadership:j,pessoaNomeById:tt}),o==="membros"&&a.jsx(ox,{membros:c,todasPessoas:t,grupoId:e.id,onAddMember:w,onRemoveMember:_,onViewPessoa:i,formatDate:je}),o==="eventos"&&a.jsx(cx,{eventos:m,membros:c,grupoId:e.id,onAdd:A,onUpdate:I,onDelete:te}),o==="ocorrencias"&&a.jsx(lx,{ocorrencias:h,membros:c,pessoas:t,onAdd:T,onDelete:S}),o==="historico"&&a.jsx(ux,{historico:p,formatDate:je})]})]})})}function hx({onBack:e}){const{grupos:t,pessoas:r,loading:n,error:s,setError:i,loadAll:o,createGrupo:l,updateGrupo:c,deleteGrupo:u}=nx(),[h,d]=N.useState(!1),[p,y]=N.useState(null),[m,b]=N.useState({nome:"",descricao:"",lider_1_id:"",lider_2_id:"",co_lider_1_id:"",co_lider_2_id:"",membros_ids:[]}),[k,x]=N.useState(!1),[g,f]=N.useState(null),[v,w]=N.useState(null),[_,j]=N.useState(!1);N.useEffect(()=>{o()},[o]);const T=()=>{y(null),b({nome:"",descricao:"",lider_1_id:"",lider_2_id:"",co_lider_1_id:"",co_lider_2_id:"",membros_ids:[]}),d(!0),i("")},S=async E=>{y(E);const{data:$}=await R.from("pessoas").select("id").eq("grupo_familiar_id",E.id).order("nome_completo"),D=($||[]).map(B=>B.id);b({nome:E.nome||"",descricao:E.descricao||"",lider_1_id:E.lider_1_id||"",lider_2_id:E.lider_2_id||"",co_lider_1_id:E.co_lider_1_id||"",co_lider_2_id:E.co_lider_2_id||"",membros_ids:D}),d(!0)},A=async E=>{if(E&&E.preventDefault(),i(""),!m.nome.trim()){i("Nome do grupo  obrigatrio");return}const $=[m.lider_1_id,m.lider_2_id,m.co_lider_1_id,m.co_lider_2_id].filter(Boolean);if(new Set($).size!==$.length){i("Uma mesma pessoa no pode ocupar mais de um papel de liderana");return}try{p?await c(p.id,m):await l(m),d(!1),y(null)}catch{}},I=()=>{d(!1),y(null),i("")},te=async E=>{try{await u(E)}catch{alert("Erro ao excluir grupo")}},je=E=>{f(E),x(!0)},tt=()=>{x(!1),f(null)},Zt=()=>{g&&(tt(),S(g))},C=E=>{w(E.id),j(!0)},O=()=>{w(null),j(!1)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition",children:a.jsx(Wt,{className:"w-5 h-5 text-slate-700"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Grupos Familiares"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Gerencie clulas, lderes, membros e ocorrncias"})]}),!h&&!_&&a.jsxs("button",{onClick:T,className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition flex items-center gap-2",children:[a.jsx(et,{className:"w-4 h-4"}),"Novo Grupo"]})]}),_&&v&&a.jsxs("div",{className:"p-4 bg-white rounded-xl border",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:O,className:"flex items-center gap-2 text-slate-600 hover:text-slate-800",children:[a.jsx(Wt,{className:"w-4 h-4"}),"Voltar"]})}),a.jsx(Bh,{pessoaId:v,onClose:O})]}),!_&&a.jsxs(a.Fragment,{children:[h&&a.jsx(ix,{editing:p,form:m,setForm:b,pessoas:r,loading:n,error:s,onSubmit:A,onCancel:I,onRemoveMembro:E=>{b($=>({...$,membros_ids:$.membros_ids.filter(D=>D!==E)}))},onOpenPessoaFicha:C}),!h&&a.jsx(sx,{grupos:t,onEdit:S,onDelete:te,onView:je,loading:n}),k&&g&&a.jsx(dx,{grupo:g,pessoas:r,onClose:tt,onEdit:Zt,onReload:o,onViewPessoa:C})]})]})}function fx({onBack:e}){Yt();const[t,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(!1),[l,c]=N.useState(null),[u,h]=N.useState(""),[d,p]=N.useState({nome:"",descricao:""});N.useEffect(()=>{y()},[]);const y=async()=>{s(!0);const{data:f,error:v}=await R.from("cargos").select("*").order("nome");f&&!v&&r(f),s(!1)},m=()=>{c(null),p({nome:"",descricao:""}),o(!0),h("")},b=f=>{c(f),p({nome:f.nome,descricao:f.descricao||""}),o(!0),h("")},k=async f=>{f.preventDefault(),h(""),s(!0);try{if(l){const{error:v}=await R.from("cargos").update(d).eq("id",l.id);if(v)throw v}else{const{error:v}=await R.from("cargos").insert(d);if(v)throw v}o(!1),p({nome:"",descricao:""}),y()}catch(v){h(v.message||"Erro ao salvar cargo")}finally{s(!1)}},x=async f=>{if(!confirm("Deseja realmente excluir este cargo?"))return;const{error:v}=await R.from("cargos").delete().eq("id",f);v?alert("Erro ao excluir cargo"):y()},g=()=>{o(!1),c(null),p({nome:"",descricao:""}),h("")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition",children:a.jsx(Wt,{className:"w-5 h-5 text-slate-700"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Cargos"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Gerenciar cargos da igreja"})]}),!i&&a.jsxs("button",{onClick:m,className:"px-4 py-2 bg-slate-700 hover:bg-slate-800 text-white rounded-lg transition flex items-center gap-2",children:[a.jsx(et,{className:"w-4 h-4"}),"Novo Cargo"]})]}),i&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-6",children:l?"Editar Cargo":"Novo Cargo"}),a.jsxs("form",{onSubmit:k,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Cargo *"}),a.jsx("input",{type:"text",required:!0,value:d.nome,onChange:f=>p({...d,nome:f.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"Ex: Pastor, Dicono, Presbtero..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrio"}),a.jsx("textarea",{value:d.descricao,onChange:f=>p({...d,descricao:f.target.value}),rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent",placeholder:"Descrio do cargo..."})]}),u&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:u}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsxs("button",{type:"button",onClick:g,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition flex items-center gap-2",children:[a.jsx(dt,{className:"w-4 h-4"}),"Cancelar"]}),a.jsxs("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-slate-700 hover:bg-slate-800 text-white rounded-lg transition disabled:opacity-50 flex items-center gap-2",children:[a.jsx(xr,{className:"w-4 h-4"}),n?"Salvando...":"Salvar"]})]})]})]}),n&&!i?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-slate-600",children:"Carregando..."})}):t.length===0&&!i?a.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[a.jsx(bo,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600 mb-4",children:"Nenhum cargo cadastrado"}),a.jsxs("button",{onClick:m,className:"px-4 py-2 bg-slate-700 hover:bg-slate-800 text-white rounded-lg transition inline-flex items-center gap-2",children:[a.jsx(et,{className:"w-4 h-4"}),"Cadastrar Primeiro Cargo"]})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(f=>a.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-6 hover:shadow-lg hover:border-slate-400 transition-all",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-lg flex items-center justify-center",children:a.jsx(bo,{className:"w-6 h-6 text-slate-700"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-slate-900",children:f.nome}),a.jsx("p",{className:"text-xs text-slate-500",children:new Date(f.created_at).toLocaleDateString("pt-BR")})]})]})}),f.descricao&&a.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:f.descricao}),a.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-100",children:[a.jsxs("button",{onClick:()=>b(f),className:"flex-1 px-3 py-2 text-sm text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50 transition flex items-center justify-center gap-2",children:[a.jsx(Xt,{className:"w-4 h-4"}),"Editar"]}),a.jsxs("button",{onClick:()=>x(f.id),className:"flex-1 px-3 py-2 text-sm text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition flex items-center justify-center gap-2",children:[a.jsx(ut,{className:"w-4 h-4"}),"Excluir"]})]})]},f.id))}),a.jsxs("div",{className:"text-sm text-slate-600",children:["Total: ",t.length," cargo(s)"]})]})}function mx(){const[e,t]=N.useState(!1),[r,n]=N.useState(null),s=N.useCallback(async(u,h,d,p,y)=>{try{n(null);const{data:m}=await R.from("eventos_agenda").select("id, nome, data_evento, hora_inicio, hora_fim").eq("espaco_id",u).eq("data_evento",h).eq("status","confirmado").neq("id",y||"null").then(g=>g.data?{data:g.data.filter(f=>!f.hora_inicio||!f.hora_fim?!1:!(f.hora_fim<=d||f.hora_inicio>=p))}:{data:[]}),{data:b}=await R.from("reservas_espacos").select("id, responsavel_nome, data_reserva, hora_inicio, hora_fim").eq("espaco_id",u).eq("data_reserva",h).eq("status","confirmada"),k=(b||[]).filter(g=>!(g.hora_fim<=d||g.hora_inicio>=p)),x=m&&m.length>0||k&&k.length>0;return{existe:x,tipo:x?"horario":"nenhum",mensagem:x?"Existe um conflito de horrio com outro evento ou reserva":"Sem conflitos",conflitos:[...(m==null?void 0:m.map(g=>({evento_id:g.id,nome:g.nome,data:g.data_evento,hora_inicio:g.hora_inicio,hora_fim:g.hora_fim})))||[],...(k==null?void 0:k.map(g=>({reserva_id:g.id,nome:g.responsavel_nome,data:g.data_reserva,hora_inicio:g.hora_inicio,hora_fim:g.hora_fim})))||[]]}}catch(m){return n(m.message),{existe:!1,tipo:"nenhum",mensagem:"Erro ao verificar conflitos",conflitos:[]}}},[]),i=N.useCallback(async(u,h)=>{try{t(!0),n(null);const{data:d,error:p}=await R.from("eventos_agenda").insert({...u,criado_por:h,status:"confirmado"}).select().single();if(p)throw p;if(u.participantes_ids&&u.participantes_ids.length>0){const y=u.participantes_ids.map(b=>({evento_id:d.id,pessoa_id:b,confirmacao_presenca:"pendente"})),{error:m}=await R.from("participantes_evento").insert(y);if(m)throw m}return d}catch(d){throw n(d.message),d}finally{t(!1)}},[]),o=N.useCallback(async(u,h)=>{try{t(!0),n(null);const{data:d,error:p}=await R.from("eventos_agenda").update(h).eq("id",u).select().single();if(p)throw p;if(h.participantes_ids!==void 0&&(await R.from("participantes_evento").delete().eq("evento_id",u),h.participantes_ids.length>0)){const y=h.participantes_ids.map(b=>({evento_id:u,pessoa_id:b,confirmacao_presenca:"pendente"})),{error:m}=await R.from("participantes_evento").insert(y);if(m)throw m}return d}catch(d){throw n(d.message),d}finally{t(!1)}},[]),l=N.useCallback(async u=>{try{t(!0),n(null);const{error:h}=await R.from("eventos_agenda").delete().eq("id",u);if(h)throw h}catch(h){throw n(h.message),h}finally{t(!1)}},[]),c=N.useCallback(async(u,h)=>{try{if(t(!0),n(null),(await s(u.espaco_id,u.data_reserva,u.hora_inicio,u.hora_fim)).existe)throw new Error("Existe um conflito de horrio. Verifique a disponibilidade.");const{data:p,error:y}=await R.from("reservas_espacos").insert({...u,criado_por:h,status:"confirmada"}).select().single();if(y)throw y;return p}catch(d){throw n(d.message),d}finally{t(!1)}},[s]);return{loading:e,error:r,setError:n,verificarConflitos:s,criarEvento:i,atualizarEvento:o,deletarEvento:l,criarReserva:c}}function px(e,t,r=[],n=[],s=[]){const i=new Date(t,e,1),o=new Date(t,e+1,0),l=i.getDay(),c=[];new Date().setHours(0,0,0,0);for(let d=l-1;d>=0;d--){const p=new Date(t,e,-d);c.push(ga(p,e,r,n,s))}for(let d=1;d<=o.getDate();d++){const p=new Date(t,e,d);c.push(ga(p,e,r,n,s))}const h=42-c.length;for(let d=1;d<=h;d++){const p=new Date(t,e+1,d);c.push(ga(p,e,r,n,s))}return{mes:e,ano:t,dias:c}}function ga(e,t,r=[],n=[],s=[]){const i=gx(e),o=e.getMonth()===t,l=r.find(p=>p.data===i),c=n.filter(p=>p.data_evento===i),u=s.filter(p=>p.data_reserva===i),h=new Date;h.setHours(0,0,0,0);const d=e.getTime()===h.getTime();return{data:i,dia:e.getDate(),mes:e.getMonth(),ano:e.getFullYear(),ehMes:o,ehHoje:d,ehFeriado:!!l,feriado:l,eventos:c,reservas:u}}function gx(e){const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${n}`}function xx(e){return["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][e]}function vx({dia:e,onSelectEvento:t,onEditarEvento:r}){const[n,s]=N.useState(!1),i=[...e.eventos].sort((d,p)=>d.dia_inteiro&&!p.dia_inteiro?-1:!d.dia_inteiro&&p.dia_inteiro?1:!d.hora_inicio||!p.hora_inicio?0:d.hora_inicio.localeCompare(p.hora_inicio)),o=e.eventos.length>2,l=i.slice(0,2),c=i.length-2,u=d=>({nacional:"bg-yellow-100 text-yellow-800 border-yellow-300",estadual:"bg-blue-100 text-blue-800 border-blue-300",municipal:"bg-green-100 text-green-800 border-green-300",religioso:"bg-purple-100 text-purple-800 border-purple-300"})[d]||"bg-gray-100 text-gray-800 border-gray-300",h=d=>({confirmado:"bg-green-100 text-green-800 border-green-300",pendente:"bg-yellow-100 text-yellow-800 border-yellow-300",cancelado:"bg-red-100 text-red-800 border-red-300"})[d]||"bg-blue-100 text-blue-800 border-blue-300";return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`min-h-32 border border-slate-200 p-2 transition-all hover:shadow-md ${e.ehMes?"bg-white":"bg-slate-50"} ${e.ehHoje?"bg-blue-50 border-blue-300 ring-2 ring-blue-200":""} relative cursor-pointer`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:`font-semibold text-sm ${e.ehMes?"text-slate-900":"text-slate-400"} ${e.ehHoje?"bg-blue-600 text-white rounded-full w-7 h-7 flex items-center justify-center":""}`,children:e.dia}),(e.eventos.length>0||e.reservas.length>0)&&a.jsx("span",{className:"text-xs bg-slate-700 text-white rounded-full px-2 py-0.5",children:e.eventos.length+e.reservas.length})]}),e.ehFeriado&&e.feriado&&a.jsx("div",{className:`text-xs px-2 py-1 rounded mb-1 font-medium truncate border ${u(e.feriado.tipo)}`,children:e.feriado.nome}),a.jsxs("div",{className:"space-y-1",children:[l.map(d=>{var p;return a.jsx("button",{onClick:()=>t(d),className:`w-full text-left text-xs px-2 py-1 rounded hover:opacity-80 transition truncate border ${h(d.status)}`,title:`${d.nome}${d.hora_inicio?` - ${d.hora_inicio.substring(0,5)}`:""}`,children:a.jsxs("div",{className:"flex items-center gap-1",children:[!d.dia_inteiro&&d.hora_inicio&&a.jsx(Zn,{className:"w-3 h-3 flex-shrink-0"}),a.jsxs("span",{className:"truncate",children:[d.dia_inteiro?"":`${(p=d.hora_inicio)==null?void 0:p.substring(0,5)} `,d.nome]})]})},d.id)}),e.reservas.slice(0,1).map(d=>a.jsx("div",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded truncate border border-orange-300",title:`Reservado: ${d.responsavel_nome}`,children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ct,{className:"w-3 h-3 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:d.responsavel_nome.split(" ")[0]})]})},d.id)),o&&a.jsxs("button",{onClick:()=>s(!0),className:"w-full text-xs text-blue-600 hover:text-blue-700 hover:bg-blue-50 px-2 py-1 rounded transition flex items-center justify-between font-medium",children:[a.jsxs("span",{children:["+",c," mais"]}),a.jsx(Uh,{className:"w-3 h-3"})]})]})]}),n&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-bold mb-1",children:["Eventos do Dia ",e.dia]}),a.jsxs("p",{className:"text-blue-100",children:[i.length," evento(s) programado(s)"]})]}),a.jsx("button",{onClick:()=>s(!1),className:"p-2 hover:bg-white/20 rounded-lg transition",children:a.jsx(dt,{className:"w-6 h-6"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"space-y-3",children:i.map((d,p)=>{var y;return a.jsxs("div",{className:"border-2 border-slate-200 rounded-xl p-4 hover:border-blue-300 hover:shadow-md transition-all cursor-pointer bg-white",onClick:()=>{s(!1),t(d)},children:[a.jsx("div",{className:"flex items-start justify-between mb-2",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsxs("span",{className:"text-xs bg-slate-700 text-white rounded px-2 py-0.5",children:["#",p+1]}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded font-medium ${h(d.status)}`,children:d.status}),d.dia_inteiro&&a.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 rounded px-2 py-0.5",children:"Dia Inteiro"})]}),a.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:d.nome})]})}),d.descricao&&a.jsx("p",{className:"text-sm text-slate-600 mb-3 line-clamp-2",children:d.descricao}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[!d.dia_inteiro&&d.hora_inicio&&a.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[a.jsx(Zn,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),a.jsxs("span",{children:[d.hora_inicio.substring(0,5)," - ",(y=d.hora_fim)==null?void 0:y.substring(0,5)]})]}),d.espaco&&a.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[a.jsx(ct,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:d.espaco.nome})]}),d.participantes&&d.participantes.length>0&&a.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[a.jsx(at,{className:"w-4 h-4 text-purple-600 flex-shrink-0"}),a.jsxs("span",{children:[d.participantes.length," participante(s)"]})]})]}),a.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200 flex gap-2",children:[a.jsx("button",{onClick:m=>{m.stopPropagation(),s(!1),t(d)},className:"flex-1 px-3 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition font-medium",children:"Ver Detalhes"}),a.jsx("button",{onClick:m=>{m.stopPropagation(),s(!1),r(d)},className:"flex-1 px-3 py-2 text-sm border-2 border-slate-300 text-slate-700 hover:bg-slate-50 rounded-lg transition font-medium",children:"Editar"})]})]},d.id)})})}),a.jsx("div",{className:"border-t border-slate-200 p-4 bg-slate-50",children:a.jsx("button",{onClick:()=>s(!1),className:"w-full px-4 py-2 bg-slate-700 hover:bg-slate-800 text-white rounded-lg transition font-medium",children:"Fechar"})})]})})]})}function yx({calendarMes:e,onSelectEvento:t,onEditarEvento:r,onNovoEvento:n}){const s=["Dom","Seg","Ter","Qua","Qui","Sex","Sab"];return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[a.jsx("div",{className:"grid grid-cols-7 bg-slate-50 border-b border-slate-200",children:s.map(i=>a.jsx("div",{className:"p-4 text-center font-semibold text-slate-700 text-sm",children:i},i))}),a.jsx("div",{className:"grid grid-cols-7",children:e.dias.map((i,o)=>a.jsx(vx,{dia:i,onSelectEvento:t,onEditarEvento:r},o))}),e.dias.some(i=>i.ehFeriado)&&a.jsxs("div",{className:"border-t border-slate-200 p-4 bg-slate-50",children:[a.jsx("h4",{className:"font-semibold text-slate-900 mb-3 text-sm",children:"Legenda de Feriados"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded bg-yellow-100 border border-yellow-300"}),a.jsx("span",{children:"Nacional"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded bg-blue-100 border border-blue-300"}),a.jsx("span",{children:"Estadual"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded bg-green-100 border border-green-300"}),a.jsx("span",{children:"Municipal"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded bg-purple-100 border border-purple-300"}),a.jsx("span",{children:"Religioso"})]})]})]})]})}const ru={from:e=>({select:t=>({eq:(r,n)=>({order:s=>({data:[{id:"1",nome:"Salo Principal",capacidade:200,localizacao:"Trreo"},{id:"2",nome:"Auditrio",capacidade:100,localizacao:"1 Andar"}],error:null})}),or:r=>({order:n=>({limit:s=>({data:[{id:"1",nome_completo:"Joo Silva",email:"joao@email.com",telefone:"(11) 99999-9999"},{id:"2",nome_completo:"Maria Santos",email:"maria@email.com",telefone:"(11) 98888-8888"}],error:null})})})}),insert:t=>({data:null,error:null}),update:t=>({eq:(r,n)=>({data:null,error:null})})})};function wx({evento:e,onSalvar:t,onCancelar:r,loading:n}){const[s,i]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(""),[h,d]=N.useState(!1),[p,y]=N.useState(""),[m,b]=N.useState({nome:(e==null?void 0:e.nome)||"",descricao:(e==null?void 0:e.descricao)||"",data_inicio:(e==null?void 0:e.data_evento)||new Date().toISOString().split("T")[0],data_fim:(e==null?void 0:e.data_fim)||new Date().toISOString().split("T")[0],hora_inicio:(e==null?void 0:e.hora_inicio)||"09:00",hora_fim:(e==null?void 0:e.hora_fim)||"10:00",dia_inteiro:(e==null?void 0:e.dia_inteiro)||!1,multiplos_dias:(e==null?void 0:e.multiplos_dias)||!1,endereco_completo:(e==null?void 0:e.endereco_completo)||"",espaco_id:(e==null?void 0:e.espaco_id)||"",status:(e==null?void 0:e.status)||"confirmado",observacoes:(e==null?void 0:e.observacoes)||"",participantes:(e==null?void 0:e.participantes)||[]});N.useEffect(()=>{k()},[]),N.useEffect(()=>{p.length>=2?x(p.trim()):l([])},[p]);const k=async()=>{try{const{data:S,error:A}=await ru.from("espacos_fisicos").select("*").eq("ativo",!0).order("nome");if(A)throw A;i(S||[])}catch(S){console.error("Erro ao carregar espaos:",S)}},x=async S=>{if(!S||S.length<2){l([]);return}try{const{data:A,error:I}=await ru.from("pessoas").select("id, nome_completo, email, telefone, whatsapp").or(`nome_completo.ilike.%${S}%,email.ilike.%${S}%`).order("nome_completo").limit(20);if(I)throw I;l(A||[])}catch(A){console.error("Erro ao buscar pessoas:",A),l([])}},g=S=>{if(m.participantes.find(A=>A.id===S.id)){u("Esta pessoa j foi adicionada"),setTimeout(()=>u(""),3e3);return}b(A=>({...A,participantes:[...A.participantes,{id:S.id,nome_completo:S.nome_completo,email:S.email||"",telefone:S.telefone||S.whatsapp||"",confirmacao:"pendente"}]})),y(""),l([])},f=S=>{b(A=>({...A,participantes:A.participantes.filter(I=>I.id!==S)}))},v=()=>{if(!m.endereco_completo){u("Digite o endereo completo para localizar no mapa"),setTimeout(()=>u(""),3e3);return}const A=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(m.endereco_completo)}`;window.open(A,"_blank")},w=()=>m.dia_inteiro?!0:m.hora_inicio>=m.hora_fim?(u("Horrio de incio deve ser anterior ao horrio de fim"),!1):!0,_=async()=>{if(u(""),!m.nome.trim()){u("Nome do evento  obrigatrio");return}if(m.multiplos_dias&&m.data_inicio>m.data_fim){u("Data de incio deve ser anterior  data de fim");return}if(w())try{d(!0);const S={nome:m.nome,descricao:m.descricao,data_evento:m.data_inicio,data_fim:m.multiplos_dias?m.data_fim:m.data_inicio,hora_inicio:m.dia_inteiro?null:m.hora_inicio,hora_fim:m.dia_inteiro?null:m.hora_fim,dia_inteiro:m.dia_inteiro,multiplos_dias:m.multiplos_dias,endereco_completo:m.endereco_completo,espaco_id:m.espaco_id||null,status:m.status,observacoes:m.observacoes,participantes_ids:m.participantes.map(A=>A.id)};await t(S),alert("Evento salvo com sucesso!"),r()}catch(S){console.error(S),u(S.message||"Erro ao salvar evento")}finally{d(!1)}},j=o.filter(S=>(S.nome_completo||"").toLowerCase().includes(p.toLowerCase())||(S.email||"").toLowerCase().includes(p.toLowerCase())),T=()=>{if(!m.multiplos_dias)return 1;const S=new Date(m.data_inicio),A=new Date(m.data_fim),I=Math.abs(A.getTime()-S.getTime());return Math.ceil(I/(1e3*60*60*24))+1};return a.jsx("div",{className:"max-w-5xl mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:e?"Editar Evento":"Novo Evento"}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg transition",children:a.jsx(dt,{className:"w-5 h-5 text-slate-700"})})]}),c&&a.jsxs("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-3",children:[a.jsx($n,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsx("div",{children:c})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-semibold text-slate-900 flex items-center gap-2 text-lg border-b pb-2",children:[a.jsx(Vt,{className:"w-5 h-5 text-blue-600"}),"Informaes Bsicas"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Evento *"}),a.jsx("input",{type:"text",required:!0,value:m.nome,onChange:S=>b({...m,nome:S.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Culto, Reunio, Confraternizao..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrio"}),a.jsx("textarea",{value:m.descricao,onChange:S=>b({...m,descricao:S.target.value}),rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Detalhes do evento..."})]})]}),a.jsxs("div",{className:"space-y-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsxs("h4",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[a.jsx(Zn,{className:"w-5 h-5 text-blue-600"}),"Datas e Horrios"]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:m.dia_inteiro,onChange:S=>b({...m,dia_inteiro:S.target.checked}),className:"w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Dia inteiro"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:m.multiplos_dias,onChange:S=>b({...m,multiplos_dias:S.target.checked}),className:"w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Mltiplos dias"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Data de ",m.multiplos_dias?"Incio":"Evento"," *"]}),a.jsx("input",{type:"date",required:!0,value:m.data_inicio,onChange:S=>b({...m,data_inicio:S.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),m.multiplos_dias&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Data de Trmino *"}),a.jsx("input",{type:"date",required:!0,value:m.data_fim,onChange:S=>b({...m,data_fim:S.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),m.multiplos_dias&&a.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-blue-800 text-sm font-medium",children:[a.jsx("strong",{children:"Durao:"})," ",T()," dias"]}),!m.dia_inteiro&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Horrio de Incio *"}),a.jsx("input",{type:"time",required:!0,value:m.hora_inicio,onChange:S=>b({...m,hora_inicio:S.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Horrio de Fim *"}),a.jsx("input",{type:"time",required:!0,value:m.hora_fim,onChange:S=>b({...m,hora_fim:S.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),a.jsxs("div",{className:"space-y-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsxs("h4",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[a.jsx(ct,{className:"w-5 h-5 text-green-600"}),"Local e Espao"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Espao da Igreja"}),a.jsxs("select",{value:m.espaco_id,onChange:S=>b({...m,espaco_id:S.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione um espao..."}),s.map(S=>a.jsxs("option",{value:S.id,children:[S.nome," - Cap. ",S.capacidade," (",S.localizacao,")"]},S.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Endereo Completo"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:m.endereco_completo,onChange:S=>b({...m,endereco_completo:S.target.value}),className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Rua, nmero, bairro, cidade, estado..."}),a.jsxs("button",{type:"button",onClick:v,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition flex items-center gap-2",children:[a.jsx(ct,{className:"w-4 h-4"}),"Mapa"]})]})]})]}),a.jsxs("div",{className:"space-y-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsxs("h4",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[a.jsx(at,{className:"w-5 h-5 text-purple-600"}),"Participantes (",m.participantes.length,")"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Buscar e Adicionar Pessoas"}),a.jsx("input",{type:"text",value:p,onChange:S=>y(S.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Digite pelo menos 2 caracteres..."})]}),p.length>=2&&j.length>0&&a.jsx("div",{className:"max-h-48 overflow-y-auto border border-slate-300 rounded-lg bg-white shadow-lg",children:j.map(S=>{const A=m.participantes.find(I=>I.id===S.id);return a.jsx("button",{type:"button",onClick:()=>g(S),disabled:A,className:`w-full text-left px-4 py-3 transition border-b border-slate-200 last:border-b-0 ${A?"bg-slate-100 cursor-not-allowed opacity-60":"hover:bg-blue-50 cursor-pointer"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-900",children:S.nome_completo}),a.jsx("div",{className:"text-sm text-slate-600",children:S.email})]}),A&&a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Adicionado"})]})},S.id)})}),m.participantes.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h5",{className:"text-sm font-medium text-slate-700",children:"Participantes Adicionados:"}),m.participantes.map(S=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-900",children:S.nome_completo}),a.jsx("div",{className:"text-sm text-slate-600",children:S.email})]}),a.jsx("button",{type:"button",onClick:()=>f(S.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:a.jsx(ut,{className:"w-4 h-4"})})]},S.id))]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),a.jsxs("select",{value:m.status,onChange:S=>b({...m,status:S.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"confirmado",children:"Confirmado"}),a.jsx("option",{value:"pendente",children:"Pendente"}),a.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Observaes"}),a.jsx("textarea",{value:m.observacoes,onChange:S=>b({...m,observacoes:S.target.value}),rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Notas adicionais sobre o evento..."})]})]}),a.jsxs("div",{className:"flex gap-3 justify-end pt-6 border-t border-slate-200",children:[a.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition",children:"Cancelar"}),a.jsxs("button",{type:"button",onClick:_,disabled:h||n,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:opacity-50 flex items-center gap-2",children:[a.jsx(xr,{className:"w-4 h-4"}),h||n?"Salvando...":"Salvar Evento"]})]})]})]})})}function _x({evento:e,onEditar:t,onVoltar:r,onExcluir:n}){const s=c=>{if(!c)return"";const[u,h,d]=c.split("-");return`${d}/${h}/${u}`},i=c=>c?c.substring(0,5):"";(c=>{const u={confirmado:{bg:"bg-green-100",text:"text-green-800",border:"border-green-300"},pendente:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-300"},cancelado:{bg:"bg-red-100",text:"text-red-800",border:"border-red-300"}};return u[c]||u.pendente})(e.status);const l=()=>{if(!e.multiplos_dias)return"1 dia";const c=new Date(e.data_evento),u=new Date(e.data_fim),h=Math.abs(u.getTime()-c.getTime());return`${Math.ceil(h/(1e3*60*60*24))+1} dias`};return a.jsx("div",{className:"max-w-5xl mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[a.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-lg transition mt-1",children:a.jsx(Wt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-3xl font-bold mb-2",children:e.nome}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-lg text-sm font-medium bg-white/20 backdrop-blur-sm",children:[e.status==="confirmado"&&a.jsx(Mg,{className:"w-4 h-4"}),e.status==="pendente"&&a.jsx($n,{className:"w-4 h-4"}),e.status==="cancelado"&&a.jsx(Kg,{className:"w-4 h-4"}),e.status.charAt(0).toUpperCase()+e.status.slice(1)]}),e.dia_inteiro&&a.jsx("div",{className:"px-3 py-1 rounded-lg text-sm font-medium bg-white/20 backdrop-blur-sm",children:"Dia Inteiro"}),e.multiplos_dias&&a.jsx("div",{className:"px-3 py-1 rounded-lg text-sm font-medium bg-white/20 backdrop-blur-sm",children:l()})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:t,className:"px-4 py-2 bg-white text-blue-600 hover:bg-blue-50 rounded-lg transition flex items-center gap-2 font-medium",children:[a.jsx(Xt,{className:"w-4 h-4"}),"Editar"]}),n&&a.jsxs("button",{onClick:n,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition flex items-center gap-2 font-medium",children:[a.jsx(ut,{className:"w-4 h-4"}),"Excluir"]})]})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[e.descricao&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Descrio"}),a.jsx("p",{className:"text-blue-800 whitespace-pre-wrap",children:e.descricao})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(Vt,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Data do Evento"}),a.jsx("p",{className:"font-semibold text-slate-900 text-lg",children:s(e.data_evento)}),e.multiplos_dias&&e.data_fim&&a.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["at ",s(e.data_fim)]})]})]})}),!e.dia_inteiro&&e.hora_inicio&&a.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.jsx(Zn,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Horrio"}),a.jsxs("p",{className:"font-semibold text-slate-900 text-lg",children:[i(e.hora_inicio)," s ",i(e.hora_fim||"")]}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:bx(e.hora_inicio,e.hora_fim)})]})]})}),e.espaco&&a.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(ct,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Espao da Igreja"}),a.jsx("p",{className:"font-semibold text-slate-900",children:e.espaco.nome}),e.espaco.localizacao&&a.jsx("p",{className:"text-sm text-slate-600",children:e.espaco.localizacao}),e.espaco.capacidade&&a.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Capacidade: ",e.espaco.capacidade," pessoas"]})]})]})}),e.endereco_completo&&a.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:a.jsx(ct,{className:"w-5 h-5 text-orange-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Endereo"}),a.jsx("p",{className:"font-medium text-slate-900",children:e.endereco_completo}),a.jsxs("button",{onClick:()=>{const c=encodeURIComponent(e.endereco_completo);window.open(`https://www.google.com/maps/search/?api=1&query=${c}`,"_blank")},className:"text-sm text-blue-600 hover:text-blue-700 mt-2 inline-flex items-center gap-1",children:[a.jsx(ct,{className:"w-3 h-3"}),"Ver no mapa"]})]})]})})]}),e.participantes&&e.participantes.length>0&&a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(at,{className:"w-5 h-5 text-purple-600"}),a.jsxs("h3",{className:"font-semibold text-slate-900 text-lg",children:["Participantes (",e.participantes.length,")"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.participantes.map((c,u)=>{var h;return a.jsx("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200 hover:border-slate-300 transition",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-slate-900",children:((h=c.pessoa)==null?void 0:h.nome_completo)||c.nome_completo}),c.email&&a.jsx("p",{className:"text-sm text-slate-600",children:c.email}),c.telefone&&a.jsx("p",{className:"text-xs text-slate-500",children:c.telefone})]}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${c.confirmacao_presenca==="confirmado"||c.confirmacao==="confirmado"?"bg-green-100 text-green-700":c.confirmacao_presenca==="recusado"||c.confirmacao==="recusado"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:(c.confirmacao_presenca||c.confirmacao||"pendente").charAt(0).toUpperCase()+(c.confirmacao_presenca||c.confirmacao||"pendente").slice(1)})]})},u)})})]}),e.observacoes&&a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Observaes"}),a.jsx("p",{className:"text-slate-700 bg-slate-50 p-4 rounded-lg whitespace-pre-wrap",children:e.observacoes})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-slate-200",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Criado em"}),a.jsx("p",{className:"text-sm font-medium text-slate-900",children:e.created_at?s(e.created_at.split("T")[0]):"-"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Atualizado em"}),a.jsx("p",{className:"text-sm font-medium text-slate-900",children:e.updated_at?s(e.updated_at.split("T")[0]):"-"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Tipo"}),a.jsx("p",{className:"text-sm font-medium text-slate-900",children:e.dia_inteiro?"Dia Inteiro":"Horrio Especfico"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Durao"}),a.jsx("p",{className:"text-sm font-medium text-slate-900",children:l()})]})]})]})]})})}function bx(e,t){if(!e||!t)return"";const[r,n]=e.split(":").map(Number),[s,i]=t.split(":").map(Number),o=s*60+i-(r*60+n),l=Math.floor(o/60),c=o%60;return l===0?`${c} minutos`:c===0?`${l} hora${l>1?"s":""}`:`${l}h ${c}min`}function jx({onBack:e}){const{user:t}=Yt(),{verificarConflitos:r,criarEvento:n,atualizarEvento:s,loading:i}=mx(),[o,l]=N.useState(()=>new Date),[c,u]=N.useState("calendario"),[h,d]=N.useState(!0),[p,y]=N.useState(""),[m,b]=N.useState([]),[k,x]=N.useState([]),[g,f]=N.useState([]),[v,w]=N.useState(null),[_,j]=N.useState(null);N.useEffect(()=>{T()},[]);const T=async()=>{try{d(!0),y("");const[C,O,E]=await Promise.all([R.from("eventos_agenda").select("*, espaco:espaco_id(*)").order("data_evento"),R.from("reservas_espacos").select("*, espaco:espaco_id(*)").order("data_reserva"),R.from("feriados").select("*").order("data")]);C.data&&b(C.data),O.data&&x(O.data),E.data&&f(E.data)}catch(C){y("Erro ao carregar dados do calendrio"),console.error(C)}finally{d(!1)}},S=C=>{const O=new Date(o);C==="anterior"?O.setMonth(O.getMonth()-1):O.setMonth(O.getMonth()+1),l(O)},A=()=>{j(null),w(null),u("form")},I=C=>{j(C),u("form")},te=C=>{w(C),u("detalhes")},je=async C=>{try{if(y(""),!C.dia_inteiro&&C.hora_inicio&&C.hora_fim){const O=await r(C.espaco_id,C.data_evento,C.hora_inicio,C.hora_fim,_==null?void 0:_.id);if(O.existe){y(`Conflito detectado: ${O.conflitos.map(E=>E.nome).join(", ")}`);return}}if(_)await s(_.id,C);else{if(!t)throw new Error("Usurio no autenticado");await n(C,t.id)}await T(),u("calendario"),j(null)}catch(O){y(O.message||"Erro ao salvar evento")}},tt=()=>{u("calendario"),j(null),w(null),y("")},Zt=px(o.getMonth(),o.getFullYear(),g,m,k);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition",children:a.jsx(Wt,{className:"w-5 h-5 text-slate-700"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Agenda da Igreja"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Gerenciar eventos e reservas de espaos"})]}),c==="calendario"&&a.jsxs("button",{onClick:A,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition flex items-center gap-2",children:[a.jsx(et,{className:"w-4 h-4"}),"Novo Evento"]})]}),p&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),c==="calendario"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[a.jsx("button",{onClick:()=>S("anterior"),className:"p-2 hover:bg-slate-100 rounded-lg transition",children:a.jsx(zg,{className:"w-5 h-5 text-slate-700"})}),a.jsx("div",{className:"text-center",children:a.jsxs("h3",{className:"text-xl font-bold text-slate-900",children:[xx(o.getMonth())," de ",o.getFullYear()]})}),a.jsx("button",{onClick:()=>S("proxima"),className:"p-2 hover:bg-slate-100 rounded-lg transition",children:a.jsx(Uh,{className:"w-5 h-5 text-slate-700"})}),a.jsx("button",{onClick:()=>l(new Date),className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-lg transition",children:"Hoje"})]}),h?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-slate-600",children:"Carregando calendrio..."})}):a.jsx(yx,{calendarMes:Zt,onSelectEvento:te,onEditarEvento:I,onNovoEvento:A})]}),c==="form"&&a.jsx(wx,{evento:_,onSalvar:je,onCancelar:tt,loading:i}),c==="detalhes"&&v&&a.jsx(_x,{evento:v,onEditar:()=>I(v),onVoltar:tt})]})}function Nx(){const{user:e,loading:t}=Yt(),[r,n]=N.useState("home");if(t)return a.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center",children:a.jsx("div",{className:"text-slate-600",children:"Carregando..."})});if(!e)return a.jsx(Qg,{});const s=()=>{switch(r){case"home":return a.jsx(tu,{onNavigate:i=>n(i)});case"pessoas":return a.jsx(tx,{onBack:()=>n("home")});case"ministerios":return a.jsx(rx,{onBack:()=>n("home")});case"grupos":return a.jsx(hx,{onBack:()=>n("home")});case"cargos":return a.jsx(fx,{onBack:()=>n("home")});case"agenda":return a.jsx(jx,{onBack:()=>n("home")});default:return a.jsx(tu,{onNavigate:i=>n(i)})}};return a.jsx(Jg,{onNavigateHome:()=>n("home"),children:s()})}ph(document.getElementById("root")).render(a.jsx(N.StrictMode,{children:a.jsx(Nx,{})}));
